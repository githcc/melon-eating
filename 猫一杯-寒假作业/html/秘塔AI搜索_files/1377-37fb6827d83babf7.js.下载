(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1377],{69393:function(e,t,n){"use strict";var r,o=n(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:25,height:25,fill:"none",viewBox:"0 0 25 25"},e),r||(r=o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m15.179 6.264-6 6 6 6"})))}},6888:function(e,t,n){"use strict";var r,o=n(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:23,height:21,fill:"none",viewBox:"0 0 23 21"},e),r||(r=o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21.5 7.5h-20m0-1.2v8.4c0 1.68 0 2.52.327 3.162a3 3 0 0 0 1.311 1.311c.642.327 1.482.327 3.162.327h10.4c1.68 0 2.52 0 3.162-.327a3 3 0 0 0 1.311-1.311c.327-.642.327-1.482.327-3.162V6.3c0-1.68 0-2.52-.327-3.162a3 3 0 0 0-1.311-1.311C19.22 1.5 18.38 1.5 16.7 1.5H6.3c-1.68 0-2.52 0-3.162.327a3 3 0 0 0-1.311 1.311C1.5 3.78 1.5 4.62 1.5 6.3"})))}},2559:function(e,t,n){"use strict";var r,o=n(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:21,height:20,fill:"none",viewBox:"0 0 21 20"},e),r||(r=o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.599 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666M10.599 5a.833.833 0 1 0 0-1.667.833.833 0 0 0 0 1.667M10.599 16.667a.833.833 0 1 0 0-1.667.833.833 0 0 0 0 1.667"})))}},64973:function(e,t,n){"use strict";var r,o=n(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:8,height:8,fill:"none",viewBox:"0 0 8 8"},e),r||(r=o.createElement("circle",{cx:4.167,cy:4,r:3.5,fill:"currentColor"})))}},39814:function(e,t,n){"use strict";var r,o=n(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:25,height:25,fill:"none",viewBox:"0 0 25 25"},e),r||(r=o.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.37 16.164c1.455.731 2.703 1.905 3.614 3.373.18.29.271.436.302.637.064.409-.216.912-.597 1.073-.187.08-.398.08-.82.08m-4.5-9.468a4.5 4.5 0 0 0 0-8.064m-2 4.032a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0M2.93 19.266c1.594-2.394 4.11-3.939 6.94-3.939s5.347 1.545 6.94 3.938c.35.525.525.787.505 1.122-.016.26-.187.58-.395.738-.268.202-.636.202-1.372.202H4.19c-.736 0-1.104 0-1.371-.202a1.1 1.1 0 0 1-.395-.738c-.02-.335.154-.597.503-1.122"})))}},59739:function(e,t,n){"use strict";n.d(t,{K:function(){return MetaHider}});var r=n(35029),o=n(88965),i=n(8001),a=n(57437),s=n(25577),c=n(42744),l=n.n(c),MetaHider=function(e){e.show;var t=(0,i._)(e,["show"]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(s.Z,(0,o._)((0,r._)({},t),{className:l()(e.className,e.show?"":"display-none"),children:e.children}))})}},97284:function(e,t,n){"use strict";var r=n(35029),o=n(88965),i=n(81763),a=n(57437),s=n(11639),c=n(2265),l=n(11607),u=n(54887),d=n(20595),h=n(82748);t.Z=function(e){var t,n,f,p,g,x=(0,c.useRef)(!1),m=(0,i._)((0,h.U8)(e.open,!1,{onChange:function(t){var n;null===(n=e.onOpenChange)||void 0===n||n.call(e,t,x.current),x.current=!1}}),2),v=m[0],_=m[1],b=e.placement,w=(0,c.useRef)(null),k=(0,c.useRef)(null),y=(0,c.useContext)(d.HO),j=e.teleport||y;return(0,l.bQ)({anchor:function(){var e;return null===(e=w.current)||void 0===e?void 0:e.nodeRef.current},popover:function(){var e;return j||(null===(e=k.current)||void 0===e?void 0:e.nodeRef.current)}},v,function(){return _(!1)},e.containsArea),(0,c.useImperativeHandle)(e._ref,function(){return{actionButtonRef:w,setOpen:_}},[]),(0,c.useEffect)(function(){e.needHide&&_(!1)},[e.needHide]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,(0,o._)((0,r._)({ref:w},e.actionButtonProps||{}),{onCloseTag:function(){var t;x.current=!0,null===(t=e.onCloseTag)||void 0===t||t.call(e),_(!1)},tagContent:e.tagContent,classes:null===(t=e.classes)||void 0===t?void 0:t.button,onMouseDown:function(t){e.preventMousedownDefault&&t.preventDefault()},onClick:function(e){_(!v)},sx:null===(n=e.sxs)||void 0===n?void 0:n.actionButton,open:v,children:e.label})),j?(0,u.createPortal)(e.children,j):(0,a.jsx)(l.ZP,{offsetOptions:{mainAxis:10},onUmount:e.onClose,onOpenChanged:function(e){_(e)},placement:void 0===b?"bottom-end":b,isAutoUpdate:!0,classes:null===(f=e.classes)||void 0===f?void 0:f.popover,ref:k,zIndex:e.zIndex,open:v,sxs:null===(p=e.sxs)||void 0===p?void 0:p.popover,noPortal:e.popoverNoPortal,anchor:null===(g=w.current)||void 0===g?void 0:g.nodeRef.current,children:e.children})]})}},11639:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r,o,i=n(86840),a=n(35029),s=n(8001),c=n(81763),l=n(57437),u=n(2265),d=n(35069),h=n(47827),f=n(43226),p=n(52653),g=n(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var close2=function(e){return g.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),r||(r=g.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M17 7 7 17M7 7l10 10"})))};function arrow_thin_up_extends(){return(arrow_thin_up_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var arrow_thin_up=function(e){return g.createElement("svg",arrow_thin_up_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),o||(o=g.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"m18 15-6-6-6 6"})))},x=n(27151),m=n.n(x),v=n(25727),_=n.n(v),b=n(82748),w=(0,u.forwardRef)(function(e,t){var n,r=e.tagContent,o=(e.onCloseTag,e.onChange),g=e.defaultOpen,x=e.children,v=e.open,w=e.className,k=e.noArrow,y=e.clickable,j=(0,s._)(e,["tagContent","onCloseTag","onChange","defaultOpen","children","open","className","noArrow","clickable"]),C=(0,c._)((0,b.U8)(v,void 0!==g&&g,{onChange:o}),2),S=C[0],M=C[1],E=(0,u.useRef)(null);(0,u.useImperativeHandle)(t,function(){return{nodeRef:E}},[]);var T={p:0,display:"flex",alignItems:"center",width:"100%",justifyContent:"space-evenly"};return e.maxTextWidth&&(T.maxWidth=e.maxTextWidth,T.overflow="hidden",T.textOverflow="ellipsis",T.whiteSpace="nowrap"),(0,l.jsx)(h.Z,(0,a._)({clickable:void 0===y||y,ref:E,onClick:function(t){var n,r;M(function(e){return!e}),null===(n=e.onClick)||void 0===n||n.call(e,t),null===(r=window.getSelection())||void 0===r||r.removeAllRanges()},label:r?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f.Z,{className:(0,d.zk)(["content",m().content,m()["tag-content"]]),color:"primary.main",children:r})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:(0,d.zk)(["content",m().content,m()["primary-content"]]),children:x}),!(void 0!==k&&k)&&(0,l.jsx)(arrow_thin_up,{className:(0,d.zk)([m()["arrow-icon"]],(0,i._)({},m()["arrow-icon-reverse"],S))})]}),sx:(0,a._)({backgroundColor:"transparent","&:hover":{backgroundColor:"#f9fafb"},color:r?"theme.palette.primary.light":"#1D2939",p:"0 13px","& .MuiChip-label":T,"& .MuiChip-deleteIcon":{m:0,color:"primary.main","&:hover":{color:"primary.main"}}},e.sx),className:(0,d.zk)([w,m().root],(n={},(0,i._)(n,m()["tag-style"],r),(0,i._)(n,"action-button--active",v),n)),onDelete:r?e.onCloseTag:void 0,deleteIcon:r?(0,l.jsx)(p.Z,{onMouseDown:function(e){return e.stopPropagation()},onClick:function(t){var n;t.stopPropagation(),null===(n=e.onCloseTag)||void 0===n||n.call(e)},sx:{p:0,width:25,height:25,ml:.5},size:"small",children:(0,l.jsx)(close2,{})}):void 0},_()(j,["sx","onClick"])))});w.displayName="ActionButton";var k=w},23141:function(e,t,n){"use strict";n.d(t,{Z:function(){return AvatarMenu},J:function(){return useMenuItems}});var r,o,i,a,s,c,l,u,d=n(16687),h=n(35029),f=n(8001),p=n(81763),g=n(98499),x=n(50044),m=n(57437),v=n(24525),_=n(11607),b=n(35069),w=n(52653),k=n(25577),y=n(8864),j=n(74309),C=n(54986),S=n(2265),M=n(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var icons_layers=function(e){return M.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),r||(r=M.createElement("g",{id:"layers-two-01"},M.createElement("path",{id:"Icon",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m2 14.5 9.642 4.821c.131.066.197.098.266.111q.091.018.184 0c.069-.012.135-.045.266-.11L22 14.5m-20-5 9.642-4.821c.131-.066.197-.099.266-.111a.5.5 0 0 1 .184 0c.069.013.135.045.266.11L22 9.5l-9.642 4.821a1 1 0 0 1-.266.111.5.5 0 0 1-.184 0c-.069-.013-.135-.045-.266-.11z"}))))},E=n(38212),T=n(78276);function user_03_extends(){return(user_03_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var user_03=function(e){return M.createElement("svg",user_03_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:19,fill:"none",viewBox:"0 0 20 19"},e),o||(o=M.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M1 18c2.336-2.477 5.507-4 9-4s6.664 1.523 9 4M14.5 5.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0"})))},I=n(45164);function out_extends(){return(out_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var out=function(e){return M.createElement("svg",out_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),i||(i=M.createElement("g",{id:"log-out-04"},M.createElement("path",{id:"Icon",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m18 8 4 4m0 0-4 4m4-4H9m6-7.796A8.4 8.4 0 0 0 10.667 3C5.88 3 2 7.03 2 12s3.88 9 8.667 9A8.4 8.4 0 0 0 15 19.796"}))))};function frame_extends(){return(frame_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var icons_frame=function(e){return M.createElement("svg",frame_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),a||(a=M.createElement("g",{id:"Frame"},M.createElement("path",{id:"Vector",fill:"#98A2B3",d:"M12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18m0 16.5a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15m0-12.615a3 3 0 0 0-3 3 .75.75 0 1 0 1.5 0 1.5 1.5 0 1 1 1.5 1.5.75.75 0 0 0-.75.75v1.957a.75.75 0 1 0 1.5 0v-1.305A3 3 0 0 0 12 6.885m-.75 9.533a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0"}))))},R=n(70815),Z=n(378),O=n(96521),L=n(6732);function account_extends(){return(account_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var account=function(e){return M.createElement("svg",account_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),s||(s=M.createElement("g",{id:"user-01"},M.createElement("path",{id:"Icon",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 21c0-1.396 0-2.093-.172-2.661a4 4 0 0 0-2.667-2.667c-.568-.172-1.265-.172-2.661-.172h-5c-1.396 0-2.093 0-2.661.172a4 4 0 0 0-2.667 2.667C4 18.907 4 19.604 4 21M16.5 7.5a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0"}))))},N=n(24033),P=n(21377);function coin_extends(){return(coin_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var coin=function(e){return M.createElement("svg",coin_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),c||(c=M.createElement("g",{id:"diamond-01"},M.createElement("path",{id:"Icon",stroke:"#D8B55C",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.5 9h19M10 3 8 9l4 11.5L16 9l-2-6m-1.386 17.263 8.959-10.75c.152-.183.227-.274.256-.376a.5.5 0 0 0 0-.274c-.029-.102-.104-.193-.256-.375l-4.334-5.2c-.088-.106-.132-.159-.186-.197a.5.5 0 0 0-.158-.074C16.831 3 16.763 3 16.625 3h-9.25c-.138 0-.207 0-.271.017a.5.5 0 0 0-.158.074 1 1 0 0 0-.186.197l-4.334 5.2c-.151.182-.227.273-.256.375a.5.5 0 0 0 0 .274c.029.102.105.193.256.375l8.959 10.75c.211.254.316.38.443.427a.5.5 0 0 0 .343 0c.127-.047.232-.173.443-.427"}))))},A=n(54112),H=n(26026);function bubble_extends(){return(bubble_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var bubble=function(e){return M.createElement("svg",bubble_extends({xmlns:"http://www.w3.org/2000/svg",width:25,height:24,fill:"none",viewBox:"0 0 25 24"},e),l||(l=M.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7.932 12h.01m4.49 0h.01m4.49 0h.01m-4.51 9a9 9 0 1 0-8.342-5.616c.081.2.122.3.14.381a1 1 0 0 1 .024.219c0 .083-.015.173-.045.353l-.593 3.558c-.062.373-.093.56-.035.694a.5.5 0 0 0 .262.262c.135.058.321.027.694-.035l3.558-.593c.18-.03.27-.045.353-.045.081 0 .14.006.219.024.08.018.18.059.38.14a9 9 0 0 0 3.385.658m-4-9a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m4.5 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m4.5 0a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0"})))},D=n(6888),F=n(39814);function lock_extends(){return(lock_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var lock=function(e){return M.createElement("svg",lock_extends({xmlns:"http://www.w3.org/2000/svg",width:25,height:25,fill:"none",viewBox:"0 0 25 25"},e),u||(u=M.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.37 11.327v-3a5 5 0 1 0-10 0v3m.8 10h8.4c1.68 0 2.52 0 3.161-.327a3 3 0 0 0 1.311-1.31c.327-.643.327-1.483.327-3.163v-.4c0-1.68 0-2.52-.327-3.162a3 3 0 0 0-1.31-1.31c-.643-.328-1.483-.328-3.163-.328h-8.4c-1.68 0-2.52 0-3.162.327a3 3 0 0 0-1.31 1.311c-.328.642-.328 1.482-.328 3.162v.4c0 1.68 0 2.52.327 3.162A3 3 0 0 0 5.007 21c.642.327 1.482.327 3.162.327"})))};function useMenuItems(){var e=(0,R.LM)(function(e){return e.logOut}),t=(0,N.useRouter)();return(0,S.useMemo)(function(){return{setDefaultItem:{text:"设为默认",listItemButtonProps:{onClick:function(){t.push(O.lM.BrowserSetting)}},icon:(0,m.jsx)(D.Z,{})},aboutItem:{text:"关于",listItemButtonProps:{onClick:function(){t.push(O.lM.AboutUs)}},icon:(0,m.jsx)(I.Z,{style:{width:20,height:20}})},userPolicyItem:{text:"用户协议",listItemButtonProps:{onClick:function(){t.push(O.lM.UserPolicy)}},icon:(0,m.jsx)(F.Z,{})},privacyItem:{text:"隐私政策",listItemButtonProps:{onClick:function(){t.push(O.lM.PrivatePolicy)}},icon:(0,m.jsx)(lock,{})},feedbackItem:{text:"用户反馈",listItemButtonProps:{onClick:function(){t.push(O.lM.Feedback)}},icon:(0,m.jsx)(bubble,{style:{width:22,height:22}})},accountInfoItem:{text:"账号信息",listItemButtonProps:{onClick:function(){t.push(O.lM.UserInfo)}},icon:(0,m.jsx)(account,{})},recordItem:{text:"搜索记录",listItemButtonProps:{onClick:function(){t.push(O.lM.UsageRecord)}},icon:(0,m.jsx)(icons_layers,{})},logOutItem:{text:"退出登录",listItemButtonProps:{onClick:(0,d._)(function(){return(0,x.Jh)(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return n.sent(),t.push(O.lM.Home),[2]}})})},icon:(0,m.jsx)(out,{})}}},[e,t])}function AvatarMenu(e){var t,n,r,o,i,a,s=e.style,c=(e.ref,e.alternateAnchor,e.containAreas,(0,f._)(e,["style","ref","alternateAnchor","containAreas"])),l=(0,S.useRef)(null),u=(0,p._)((0,S.useState)(!1),2),M=u[0],D=u[1],F=(0,S.useRef)(null),B=(0,S.useRef)(null),W=(0,N.useRouter)(),z=(0,R.LM)(),U=z.userInfo,q=z.logOut,anchor=function(){var t;return(null===(t=l.current)||void 0===t?void 0:t.avatarNodeRef.current)||b.Nw.get(e.alternateAnchor)};(0,_.bQ)({anchor:anchor,popover:function(){var e;return null===(e=B.current)||void 0===e?void 0:e.nodeRef.current}},M,function(){return D(!1)},function(){var t;return[F.current].concat((0,g._)((null===(t=b.Nw.get(e.containAreas))||void 0===t?void 0:t.filter(function(e){return!!e}))||[]))}),P.vs.useRegister("avatarMenu",{show:function(){D(!0)},toggle:function(e){D(null!=e?e:!M)}},[M]);var V=e.userInfo||(Z.yG?{userName:"开发环境DummyUser",headImgUrl:"https://img1.baidu.com/it/u=1546227440,2897989905&fm=253&app=138&size=w931&n=0&f=JPEG&fmt=auto?sec=1696870800&t=18b742c7770303efc1da2cd29d0ef3d7",uid:"anything",nickname:"开发环境DummyUser"}:void 0)||U,G=useMenuItems(),Q=G.setDefaultItem,K=G.feedbackItem,J=G.accountInfoItem,X=G.logOutItem,$=G.recordItem,Y=G.aboutItem,ee={text:(0,m.jsx)(m.Fragment,{children:"额度"}),count:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("span",{style:{color:"#667085"},children:null===(n=z.usage)||void 0===n?void 0:n.count})}),icon:(0,m.jsx)(coin,{})},et=(0,S.useMemo)(function(){return[{text:"d1",divider:!0},J,$,K,Q,Y,{text:"d2",divider:!0},X]},[Y,J,K,X,$,Q]),en=(0,S.useMemo)(function(){return[{text:"d1",divider:!0},K,{text:"关于",listItemButtonProps:{onClick:function(){W.push(O.lM.AboutUs)}},icon:(0,m.jsx)(I.Z,{})}]},[q]),er=(t=(0,d._)(function(){var e;return(0,x.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,A.Ic)()];case 1:return 0===(e=t.sent()).data.errCode&&z.setUsage(e.data.data),[2]}})}),function(){return t.apply(this,arguments)});return(0,S.useEffect)(function(){M&&z.login&&er()},[M]),(0,m.jsxs)(m.Fragment,{children:[V&&(0,m.jsx)(w.Z,{ref:F,sx:null===(r=e.sxs)||void 0===r?void 0:r.button,style:s,onClick:function(){return D(!M)},children:(0,m.jsx)(v.B,(0,h._)({userInfo:V,sx:{width:30,height:30},ref:l},c))}),(0,m.jsx)(_.ZP,{sxs:null===(o=e.sxs)||void 0===o?void 0:o.popover,offsetOptions:{mainAxis:10},open:M,isAutoUpdate:!0,ref:B,filterMiddlewares:function(e){return"shift"!==e.name},anchor:anchor(),children:(0,m.jsxs)(k.Z,{sx:{padding:"20px 15px"},children:[V?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(k.Z,{sx:{display:"flex",alignContent:"center",alignItems:"center",marginBottom:"10px"},children:[(0,m.jsx)(v.B,{userInfo:V,sx:{width:24,height:24}}),(0,m.jsx)(k.Z,{sx:{marginLeft:"10px",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:V.userName?V.userName.length>7?V.userName.substring(0,7)+"...":V.userName:""})]}),(0,m.jsxs)(k.Z,{sx:{display:"flex",alignContent:"center",alignItems:"center",justifyContent:"space-between"},children:[(0,m.jsxs)(k.Z,{sx:{display:"flex",alignContent:"center",alignItems:"center"},children:[(0,m.jsx)(y.Z,{sx:{flex:"none",mr:"5px",minWidth:0,"& svg":{width:20,height:20}},children:ee.icon}),(0,m.jsx)(E.Z,{sx:{marginLeft:"7px",fontSize:16,lineHeight:"24px"},primary:ee.text})]}),(0,m.jsxs)(k.Z,{sx:{display:"flex",alignContent:"center",alignItems:"center"},children:[(0,m.jsx)(T.Z,{classes:{tooltip:"custom-tooltip-popper",arrow:"custom-tooltip-arrow"},PopperProps:{style:{zIndex:9999}},placement:"top",arrow:!0,title:z.productType()===O.kv.FREE?"免费版，每天有"+(null===(i=z.usage)||void 0===i?void 0:i.total)+"次搜索额度":"付费版，每天有"+(null===(a=z.usage)||void 0===a?void 0:a.total)+"次搜索额度",children:(0,m.jsx)(y.Z,{sx:{flex:"none",minWidth:0,"& svg":{width:20,height:20}},children:(0,m.jsx)(icons_frame,{})})}),(0,m.jsx)(E.Z,{sx:{marginLeft:"3px",fontSize:16,lineHeight:"24px",textAlign:"right"},primary:ee.count})]})]})]}):(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(j.Z,{sx:{display:"flex",alignContent:"center",alignItems:"center",p:"0 10px"},onClick:function(){(0,H.x3)(),D(!1)},children:[(0,m.jsx)(y.Z,{sx:{mr:"5px",minWidth:"0 !important",width:20,height:20,color:"black",display:"flex",alignItems:"center","& svg":{width:1,height:1,flex:"none"}},children:(0,m.jsx)(user_03,{})}),(0,m.jsx)(E.Z,{sx:{marginLeft:"20px",lineHeight:"1",fontSize:14,color:"#1570EF"},primary:"登录/注册"})]})}),(0,m.jsx)(L.R,{sx:{width:165},items:z.login?et:en,keyPropName:"text",sxs:{listItem:{fontSize:16,height:28,color:"#475467","& + &":{mt:"3px"},".MuiListItemIcon-root":{color:"inherit"}},listItemButton:{height:1,boxSizing:"border-box",p:"5px 10px"}},renderItem:function(e){return e.divider?(0,m.jsx)(C.Z,{sx:{width:"100%"}}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(y.Z,{sx:(0,b.KI)({mr:"5px",minWidth:0,width:20,height:20,color:"black",display:"flex",alignItems:"center","& svg":{width:1,height:1,flex:"none"}}),children:e.icon}),(0,m.jsx)(E.Z,{sx:{marginLeft:"20px",lineHeight:"1",fontSize:14,color:"#000"},primary:e.text})]})}})]})})]})}},54297:function(e,t,n){"use strict";var r=n(35029),o=n(88965),i=n(8001),a=n(81763),s=n(60230),c=n(57437),l=n(13246),u=n(35843),d=n(2265),h=n(82748),f=n(42744),p=n.n(f);function _templateObject(){var e=(0,s._)(["\n    border: 1px solid transparent;\n    &.checkbutton--checked{\n        border-color: #F5F6F5;\n        background-color: #FBFBFA;\n    }\n    border-radius: 0;\n    padding: 5px;\n"]);return _templateObject=function(){return e},e}var g=(0,d.forwardRef)(function(e,t){var n=e.children,s=e.onClick,l=e.onCheckedChange,u=e.className,d=(0,i._)(e,["children","onClick","onCheckedChange","className"]),f=(0,a._)((0,h.U8)(e.checked,e.defaultChecked||!1,{onChange:l}),2),g=f[0],m=f[1];return(0,c.jsxs)(x,(0,o._)((0,r._)({ref:t,className:p()({"checkbutton--checked":g},u),onClick:function(e){m(!g),null==s||s(e)}},d),{children:[n,(0,c.jsx)("input",{hidden:!0,type:"checkbox",value:String(g)})]}))});g.displayName="CheckButton",t.Z=g;var x=(0,u.ZP)(l.Z,{name:"CheckButton"})(_templateObject())},2535:function(e,t,n){"use strict";n.d(t,{SF:function(){return o},V7:function(){return MindMappingOutLine},kU:function(){return useCaseMindMapping},pb:function(){return en},qA:function(){return MarkdownMindMap}});var r,o,i=n(16687),a=n(22977),s=n(35029),c=n(88965),l=n(81763),u=n(98499),d=n(50044),h=n(57437),f=n(2265),p=n(54112),g=n(50410),x=n(61678),m=n(66626),v=n(35805),_=n.n(v),b=n(58328);n(5154);var w=n(25577),k=n(43226),y=n(6882),j=n(72261),C=n(22079),S=n(52653),M=n(59500),E=n(74309),T=n(35069),I=n(64973),R=n(17814),Z=n(81854),O=n(2085),L=n(23091),N=n(73455),P=n(69575),A=n(44826),H=n(21377),D=n(15828),F=n(82748),B=n(33533),W=n(42744),z=n.n(W),U=n(65081),q=n(88613),V=n(18833),G=n(33399),Q=n(88525),K=n(54297),J=n(2559);n(63294);var X=n(23670);n(26026);var $=n(70815),Y=n(56099),ee=n(24033),et=new Map;function useCaseMindMapping(e){var t=e.resultId,n=e.searchKey,r=e.links,o=e.ref,i=(0,l._)((0,f.useState)(null),2),a=i[0],s=i[1];(0,f.useImperativeHandle)(o,function(){return{loadData:function(){return loadData()}}});var c=n+t,loadData=function(){return new Promise(function(e,o){if(et.has(c)){s(et.get(c)),e(et.get(c).markdownTextAfterHandle);return}(0,p.Dr)(t,n).then(function(t){var n=handleMindMappingResult(t.data.data,r);et.set(c,n),s(n),e(n.markdownTextAfterHandle)}).catch(function(e){(0,g.yv)("当前高峰期，为了确保每位用户都能享受最佳体验，建议您稍后再用~",{variant:"warning",autoHideDuration:5e3}),o(e),(0,T.dW)(T.Gy.MIND_MAPPING_REQUEST_ERROR,{param:{resultId:t,searchKey:n},client:(0,V.Fk)(),error:e?e.stack?e.stack.toString():e.message:"error null"})})})};return{mindMapResult:a,loadData:loadData}}(r=o||(o={}))[r.Chart=0]="Chart",r[r.Outline=1]="Outline";var en=(0,f.forwardRef)(function(e,t){var n=e.mode,r=e.links,o=useCaseMindMapping((0,c._)((0,s._)({},e),{ref:t})).mindMapResult;return(0,h.jsxs)(h.Fragment,{children:[o&&0===n&&(0,h.jsx)(MarkdownMindMap,{originData:{mindMap:o.mindMap,links:e.links,gid:e.gid},markdownText:o.markdownTextAfterHandle}),o&&1===n&&(0,h.jsx)(MindMappingOutLine,{isH5:e.isH5,tree:o.treeNode,links:r,queryString:e.queryString,engineType:e.engineType})]})});en.displayName="CaseMindMapping";var er=function(){function TreeNode(e,t,n,r,o,i){(0,a._)(this,TreeNode),this.id=e,this.originText=t,this.referenceNums=n,this.val=r,this.level=o,this.children=i}return TreeNode.prototype.pushChild=function(e){this.children.push(e),e.parent=this},TreeNode}(),parseMindMapText=function(e){var t=function(e){var t=e.split("\n"),n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value,l=c.trim();l.startsWith("#")||l.startsWith("-")||0==n.length?n.push(c):n[n.length-1]+="\n"+c}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e),n=new er("-1","",[],"",-1,[]);if(t.length>1&&t[0].startsWith("# ")){var r=t[0];t=t.slice(1);var o=r.indexOf("- ")+1,i=getTextReferenceNums(r.substring(o+1)),a=i.referenceNums,s=i.textAfterFilter;n=new er("-1",r,a,s,-1,[])}var c=new Map;c.set(n.level,n);for(var l=t.length,u=0;u<l;u++){for(var d=t[u],h=function(e){var t,n,r=e.indexOf("- ");r<0?(t=0,n=e):(t=0==r?1:Math.floor((r+1)/2),n=e.substring(r+2));var o=getTextReferenceNums(n);return{referenceNums:o.referenceNums,textAfterFilter:o.textAfterFilter,level:t}}(d),f=h.referenceNums,g=h.textAfterFilter,x=h.level,m=new er((0,p.DO)(),d,f,g,x,[]),v=x-1;!c.has(v)&&v>-1;)v--;v>=-1&&(c.get(v).pushChild(m),c.set(m.level,m))}return n},MindMappingOutLine=function(e){var t=e.tree,n=e.links,r=e.queryString,o=(0,l._)((0,f.useState)(""),2),i=o[0],a=o[1],s=(0,l._)((0,f.useState)([]),2),c=s[0],u=s[1],d=!t||!t.val||0===t.val.trim().length,p=(0,H.a4)(e.isH5);p.modelRef,p.onsubmit;var g=(0,l._)((0,f.useState)(!1),2),x=g[0],m=g[1],v=(0,l._)((0,f.useState)(!1),2),b=v[0],k=v[1],y=(0,f.useRef)(0),j=(0,f.useCallback)(function(e){e?y.current+=1:y.current-=1,m(y.current>0)},[]);(0,f.useEffect)(function(){var e;return a(t.val),u(t.referenceNums),e=setInterval(function(){var n=document.getElementById("outline"+t.id),r=document.getElementById("outlineParent"+t.id);if(n&&r){var o=n.offsetHeight,i=r.offsetHeight;o>0&&i>0&&(clearInterval(e),k(Math.floor(i-o)>o/2))}},100),function(){clearInterval(e)}},[t.val,t.id]);var outLineClick=function(t){var n=[];for((0,T.oh)("click-mapping-outLine");t;){var o=document.getElementById("outline"+t.id),i=o?o.innerText:function(e){var t=e.replace(/^#+\s+(.*)$/gm,"$1");return(t=(t=(t=(t=(t=(t=t.replace(/^(\s*[-*]\s+)(.*)$/gm,"$2")).replace(/[_*]{1,3}(.+?)[_*]{1,3}/g,"$1")).replace(/\[([^\]]+)\]\(([^\)]+)\)/g,"$1 ($2)")).replace(/!\[([^\]]+)\]\(([^\)]+)\)/g,"")).replace(/```[\s\S]*?```/g,"")).replace(/`(.+?)`/g,"$1")).trim()}(t.val);n.unshift(i),t=t.parent}var a=r||n[0],s=n.slice(1),c=(0,H.G2)(a,"detail",e.engineType,void 0,s);window.open(c)},C=(0,f.useMemo)(function(){return(0,h.jsx)(w.Z,{component:"span",className:z()(_().outLineNumContainer,e.isH5?_().isH5LineBreakStyle:c.length>0&&b?_().isLineBreakStyle:""),children:c.filter(function(e){return e>0&&e<=n.length}).map(function(t,r){return(0,h.jsx)(D.LG,{isH5:e.isH5,num:t,link:n[t-1],onTooltipHoverChange:j},t)})})},[c,j,b]);return t?(0,h.jsxs)(w.Z,{display:"flex",flexDirection:"column",paddingLeft:t.level>0?"12px":"0",sx:{wordBreak:"break-all"},margin:"1px 0",children:[t.level>=0&&!d&&(0,h.jsxs)(w.Z,{display:"flex",className:"case-mind-mapping-content-prefix",flexDirection:"row",sx:{lineHeight:"22px",fontSize:"14px",fontWeight:"400"},children:[t.level>0&&(0,h.jsx)(w.Z,{sx:{mr:1.25},children:(0,h.jsx)(I.Z,{style:{color:"#667085"}})}),(0,h.jsxs)(w.Z,{className:z()(_().outLineContent,"case-mind-mapping-content"),id:"outlineParent"+t.id,"data-tooltip-hovered":x,children:[(0,h.jsx)(w.Z,{component:"span",className:_().outLineMarkdownContainer,id:"outline"+t.id,onClick:function(e){return outLineClick(t)},children:(0,h.jsx)(OutLineMarkdown,{content:i})}),C]})]}),t.children&&(0,h.jsx)(w.Z,{paddingLeft:t.level>0?"4px":"0",children:(0,h.jsx)(w.Z,{borderLeft:t.level>0?"1px solid #EAECF0":"none",children:t.children.map(function(t){return(0,h.jsx)(MindMappingOutLine,{isH5:e.isH5,tree:t,links:n,queryString:r,engineType:e.engineType},t.id)})})})]}):(0,h.jsx)(h.Fragment,{})};function OutLineMarkdown(e){var t=(0,T.BL)((0,T.tk)(e.content));return(0,h.jsx)(R.D,{remarkPlugins:[Z.Z,O.Z,L.Z],rehypePlugins:[N.Z,[P.Z,{detect:!1,ignoreMissing:!0}],A.Z],components:{pre:function(e){return(0,h.jsx)("span",{children:e.children})}},skipHtml:!0,children:t})}var handleMindMappingResult=function(e,t){var n=parseMindMapText(e);filterDangerRow(n,t);var r=getMarkdownTextByTreeNode(n,t);return{treeNode:n,markdownTextAfterHandle:r,mindMap:e}},filterDangerRow=function(e,t){e.originText;var n=t.length,r=[],o=!1,i=!0,a=!1,s=void 0;try{for(var c,l=e.referenceNums[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value;u<=n?(u>0&&u<=t.length&&t[u-1].danger&&(e.danger=!0),r.push(u)):o=!0}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}e.referenceNums=r,o&&(0,T.dW)(T.Gy.MindMappingReferenceError,{node:e.originText,links:t}).catch(function(e){});var d=e.children.length,h=!0,f=!1,p=void 0;try{for(var g,x=e.children[Symbol.iterator]();!(h=(g=x.next()).done);h=!0){var m=g.value;filterDangerRow(m,t)}}catch(e){f=!0,p=e}finally{try{h||null==x.return||x.return()}finally{if(f)throw p}}e.children=e.children.filter(function(e){return!e.danger}),0==e.children.length&&0!=d&&(e.danger=!0)},getMarkdownTextByTreeNode=function(e,t){if(!e.children||0==e.children.length)return extractCurrentNodeMarkdownText(e,t);var n=extractCurrentNodeMarkdownText(e,t)+"\n";return -1==e.level&&(n=""),n+e.children.map(function(e){return getMarkdownTextByTreeNode(e,t)}).join("\n")},extractCurrentNodeMarkdownText=function(e,t){return e.originText.replace(/\[(\[\d+])+]/g,"")+e.referenceNums.filter(function(e){return e>0&&e<=t.length}).map(function(e){return referenceNumConvertMindMappingNode(e,t[e-1])}).join("")},referenceNumConvertMindMappingNode=function(e,t){return'<a href="'.concat(t.link,'" target="_blank" class="').concat(_().mindMappingReferenceDot,'">').concat(e,"</a>")},getTextReferenceNums=function(e){var t=[],n=e.replace(/\[(\[\d+])+]/g,function(e){var n=e.match(/\[(\d+)]/g);return n&&t.push.apply(t,(0,u._)(n.map(function(e){return parseInt(e.substring(1,e.length-1))}))),""});return{referenceNums:t,textAfterFilter:n}},eo=new x.$T((0,u._)(x.Y4)),ei=(0,f.forwardRef)(function(e,t){var n,r,o=e.originData,a=e.markdownText,s=e.fullScreenClicked,c=e.showToolBar,u=e.hideFullScreenButton,p=e.hideDownloadButton,x=e.toolBarSx,v=(0,f.useRef)(null),_=(0,f.useRef)(),w=(0,l._)((0,f.useState)(!1),2),j=w[0],C=w[1],S=(0,l._)((0,f.useState)(""),2),M=S[0],E=S[1];(0,f.useImperativeHandle)(t,function(){return{fit:function(){var e;null===(e=_.current)||void 0===e||e.fit()},download:function(){N()}}},[]),(0,f.useEffect)(function(){var e=m.v$.create(v.current);return _.current=e,function(){e&&e.destroy()}},[]);var T=(0,l._)((0,f.useState)(null),2),I=T[0],R=T[1],Z=(0,f.useCallback)((0,i._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:if(!_.current)return[3,2];return[4,_.current.fit()];case 1:e.sent(),e.label=2;case 2:return recordGWidth(),[2]}})}),[]),recordGWidth=function(){v.current&&R(getCurrentGWidth())},getCurrentGWidth=function(){return v.current&&v.current.children.length>=2?v.current.children[1].getBoundingClientRect().width:null};(0,f.useEffect)(function(){var e=_.current;if(e){var t=eo.transform(a).root;e.setData(t),Z()}},[_.current,a]);var O=(n=(0,i._)(function(){var e,t;return(0,d.Jh)(this,function(n){return v.current?(e=window.innerHeight,t=v.current.width.baseVal.value*(e/v.current.height.baseVal.value),[2,(0,b.SE)(v.current,{canvasWidth:t,canvasHeight:e})]):[2]})}),function(){return n.apply(this,arguments)}),L=(r=(0,i._)(function(){var e,t;return(0,d.Jh)(this,function(n){switch(n.label){case 0:if(new Date().getTime(),e=getCurrentGWidth(),!(_.current&&(null==I||null==e||Math.abs(e-I)>1)))return[3,2];return[4,Z()];case 1:n.sent(),n.label=2;case 2:return new Date().getTime(),[4,O()];case 3:return t=n.sent(),new Date().getTime(),[2,t]}})}),function(){return r.apply(this,arguments)}),N=(0,f.useCallback)((0,i._)(function(){var e,t,n,r,o,a,s,c,l,u;function openImageDialog(){return _openImageDialog.apply(this,arguments)}function _openImageDialog(){return(_openImageDialog=(0,i._)(function(){return(0,d.Jh)(this,function(e){return C(!0),E(o),[2]})})).apply(this,arguments)}return(0,d.Jh)(this,function(i){switch(i.label){case 0:return r=!1,[4,(0,b.YM)(v.current)];case 1:if(o=i.sent(),(null===(e=window)||void 0===e?void 0:e.webkit)?(r=!0,null===(l=window)||void 0===l||null===(c=l.webkit)||void 0===c||null===(s=c.messageHandlers)||void 0===s||null===(a=s.nativeHandler)||void 0===a||a.postMessage(JSON.stringify({type:"imageBase64",value:o}))):(null===(t=window)||void 0===t?void 0:t.nativeHandler)&&(r=!0,window.nativeHandler.postMessage(JSON.stringify({type:"imageBase64",value:o}))),r)return[2];if(!(null===(n=(0,V.ZD)())||void 0===n?void 0:n.isMiniWebView))return[3,3];return[4,openImageDialog()];case 2:return i.sent(),[2];case 3:return F.mk&&(0,g.yv)((0,h.jsx)(k.Z,{sx:{textDecoration:"underline",textUnderlineOffset:"2px"},onClick:openImageDialog,children:"无法保存？请点击此处"}),{variant:"info"}),[4,L()];case 4:return u=i.sent(),(0,q.saveAs)(u,"脑图.png"),[2]}})}),[L]),P=(0,f.useCallback)((0,i._)(function(){var e;return(0,d.Jh)(this,function(t){switch(t.label){case 0:return[4,L()];case 1:return e=t.sent(),navigator.clipboard.write([new ClipboardItem({"image/png":e})]),(0,g.yv)("复制成功",{variant:"success",autoHideDuration:3e3}),[2]}})}),[L]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("svg",{style:{flex:"1 1",backgroundColor:"white"},ref:v,onClick:function(e){e.target instanceof HTMLAnchorElement&&(0,U.Uq)(e.target.href,e.currentTarget.parentElement)&&e.preventDefault()}}),c&&(0,h.jsx)(MindMapToolBar,{originData:o,sx:x,fullScreenClicked:s,downloadImage:N,copyImage:P,hideDownloadButton:p,hideFullScreenButton:u}),(0,h.jsx)(G.k,{open:j,onClose:function(){return C(!1)},children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Q.K,{sx:{width:"min(300px, 80vw)",minHeight:350},children:M?(0,h.jsx)("img",{style:{width:"100%"},src:M}):(0,h.jsx)(y.Z,{size:"1.5em",sx:{color:"gray"},thickness:2})}),(0,h.jsx)(k.Z,{textAlign:"center",children:"请长按上方图片手动保存"})]})})]})});ei.displayName="_MarkdownMindMap";var ea=f.forwardRef(function(e,t){return(0,h.jsx)(j.Z,(0,s._)({ref:t},e))}),MarkdownMindMap=function(e){var t=e.markdownText,n=e.originData,r=(0,f.useRef)(null),o=(0,l._)((0,f.useState)(!1),2),i=o[0],a=o[1],s=(0,F.F)(),handleClose=function(){var e;a(!1),null===(e=r.current)||void 0===e||e.fit()};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ei,{originData:n,markdownText:t,fullScreenClicked:function(){a(!0)},showToolBar:!0,hideFullScreenButton:s}),!s&&(0,h.jsxs)(C.Z,{fullScreen:!0,keepMounted:!0,open:i,onClose:handleClose,TransitionComponent:ea,sx:{"& .MuiBackdrop-root":{backgroundColor:"transparent"}},children:[(0,h.jsxs)(w.Z,{display:"flex",justifyContent:"space-between",p:"5px 10px",children:[(0,h.jsx)(w.Z,{}),(0,h.jsx)(S.Z,{edge:"start",color:"inherit",onClick:handleClose,"aria-label":"close",children:(0,h.jsx)(B.Z,{})})]}),(0,h.jsx)(ei,{originData:n,ref:r,markdownText:t,showToolBar:!0,hideFullScreenButton:!0,toolBarSx:{right:"22px!important"}})]})]})},MindMapToolBar=function(e){var t=e.hideDownloadButton,n=e.hideFullScreenButton,r=e.fullScreenClicked,o=e.downloadImage,i=e.copyImage,a=e.originData,s=e.sx,c=(0,l._)((0,f.useState)(!1),2),u=c[0],d=c[1],g=(0,l._)((0,f.useState)(!1),2),x=g[0],m=g[1],v=(0,f.useRef)(null),b=(0,F.F)(),k=(0,$.LM)(),j=(0,f.useRef)(!1),C=(0,Y.A)().removeUrlCmd,T=(0,ee.useSearchParams)(),I=(0,f.useCallback)(function(e){m(e)},[]);(0,f.useEffect)(function(){k.hasHydrated&&Z()},[k.hasHydrated]);var R=(0,f.useCallback)(function(){j.current||(j.current=!0,d(!0),(0,p.fL)(a.mindMap.split("\n")[0].replace("# ",""),a.mindMap,a.links).then(function(e){d(!1),j.current=!1,window.open(e.data.data+"?exp=true")}))},[]),Z=(0,Y.Q)(function(e,t){var n;v.current&&e.find(function(e){return e.type===X.a.ExportMind})&&T.get("gid")==a.gid&&(null===(n=v.current)||void 0===n||n.scrollIntoView({block:"center"}),setTimeout(function(){R()},500),setTimeout(function(){C(X.a.ExportMind)},100))},{deps:[R]});return(0,h.jsxs)(w.Z,{className:_().toolBar,sx:s,children:[!n&&(0,h.jsx)(S.Z,{className:_().toolBarItem,onClick:r,children:(0,h.jsx)("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{d:"M6 1.8562H5.8C4.11984 1.8562 3.27976 1.8562 2.63803 2.18318C2.07354 2.4708 1.6146 2.92974 1.32698 3.49423C1 4.13596 1 4.97604 1 6.6562V6.8562M6 19.8562H5.8C4.11984 19.8562 3.27976 19.8562 2.63803 19.5292C2.07354 19.2416 1.6146 18.7827 1.32698 18.2182C1 17.5764 1 16.7364 1 15.0562V14.8562M19 6.8562V6.6562C19 4.97604 19 4.13596 18.673 3.49423C18.3854 2.92974 17.9265 2.4708 17.362 2.18318C16.7202 1.8562 15.8802 1.8562 14.2 1.8562H14M19 14.8562V15.0562C19 16.7364 19 17.5764 18.673 18.2182C18.3854 18.7827 17.9265 19.2416 17.362 19.5292C16.7202 19.8562 15.8802 19.8562 14.2 19.8562H14",stroke:"#98A2B3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),!t&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(K.Z,{ref:v,checked:x,sx:{color:"#667085",width:36,height:36,minWidth:0,fontSize:"16px",fontWeight:400},onCheckedChange:I,children:u?(0,h.jsx)(y.Z,{size:"1.5em",sx:{color:"gray"},thickness:2}):(0,h.jsx)(J.Z,{})}),(0,h.jsxs)(M.ZP,{id:"export-type",open:x,anchorEl:v.current,onClose:function(){m(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[(0,h.jsx)(E.Z,{onClick:function(){m(!1),o&&o()},style:{fontSize:"14px",color:"#344054"},children:"下载图片"}),!b&&(0,h.jsx)(E.Z,{onClick:function(){m(!1),i&&i()},style:{fontSize:"14px",color:"#344054"},children:"复制图片"})]})]})]})}},19507:function(e,t,n){"use strict";n.r(t),n.d(t,{ChangeSearchRangeButton:function(){return ChangeSearchRangeButton},HomeAccountUI:function(){return HomeAccountUI},HomeBridgeV2:function(){return Y},HomeSearchBox:function(){return HomeSearchBox},SearchSetting:function(){return ee},SearchSettingNInputDrawer_singleton:function(){return et},useHomeEffects:function(){return useHomeEffects}});var r=n(86840),o=n(35029),i=n(88965),a=n(81763),s=n(98499),c=n(57437),l=n(2265),u=n(25577),d=n(52653),h=n(43226),f=n(73724),p=n(54986),g=n(45421),x=n(98075),m=n(91339),v=n(8864),_=n(51060),b=n.n(_),w=n(51095),k=n(26715),y=n.n(k),j=n(56099),C=n(23670),S=n(70815),M=n(26026),E=n(23141),T=n(11607),I=n(24033),R=n(6732),Z=n(96521),O=n(18833),L=n(88525),N=n(13246),P=n(2559),A=n(38212),H=n(42744),D=n.n(H),F=n(20595),B=n(54112),W=n(72502),z=n(21377),U=n(69393),q=n(25727),V=n.n(q),G=n(35069),Q=n(73328),K=n(97284),J=n(82748),X=n(84232),$=n(85480),Y=y()();function HomeSearchBox(e){var t=(0,l.useRef)(null),n=(0,a._)((0,l.useState)(!1),2),r=n[0],o=n[1],i=(0,a._)((0,l.useState)((0,Z.CU)(e.engineType||Z.rG.DEFAULT)),2),s=i[0],d=i[1],h=e.inputRef||t,f=(0,a._)(l.useState(null),2),p=f[0],g=f[1];(0,l.useRef)(!1),Y.useRegister("homeSearchBox",function(){return{getText:function(){var e;return(null===(e=h.current)||void 0===e?void 0:e.getTexts()[0])||""}}},[]);var x=(0,l.useContext)(F.HO),m=(0,l.useRef)(null);(0,T.bQ)({anchor:function(){return p},popover:function(){var e;return x||(null===(e=m.current)||void 0===e?void 0:e.nodeRef.current)}},r,function(){return o(!1)});var v=(0,j.A)(),_=v.removeUrlCmd,k=v.store,y=(0,j.Q)(function(e){var t=e.find(function(e){return e.type===C.a.HomeInputSetting});if(t){var n=JSON.parse(t.payload);h.current.setArgumentText(n.text),k.get("ModelTab")?_(C.a.HomeInputSetting):k.set("HomeSearchBox",1)}});return(0,l.useEffect)(function(){y()},[]),(0,l.useEffect)(function(){d(localStorage.getItem("defaultEngine")?(0,Z.CU)(Z.rG.SCHOLAR):(0,Z.CU)(Z.rG.DEFAULT))},[]),(0,c.jsxs)(u.Z,{className:b()["home-search-box"],children:[(0,c.jsx)(w.ZP,{hideIcon:!0,isH5:e.isH5,cache:e.isH5?{open:!0,id:Z.dF}:void 0,ref:h,onSubmit:function(t){e.onSubmit([t[0],s.value])},onArgumentChange:function(){if(e.isH5){var t,n,r=null===(n=h.current)||void 0===n?void 0:null===(t=n.argumentRef.current)||void 0===t?void 0:t.textareaRef.current;r&&(r.style.setProperty("height","0px"),r.style.setProperty("height","".concat(r.scrollHeight,"px")))}},sx:{height:"100%"},onlyArgument:!0,placeholders:{argument:e.isH5?"点击输入想了解的问题":"请输入，Enter键发送，Shift+Enter键换行"},bottomLeftComponent:(0,c.jsx)(ChangeSearchRangeButton,{dropDownVisible:r,activeRange:s,onClick:function(e){g(e.currentTarget),o(!r)}})}),(0,c.jsx)(T.ZP,{anchor:p,ref:m,open:r,isAutoUpdate:!0,children:(0,c.jsx)(u.Z,{children:(0,c.jsx)(ee,{showSearchRange:!0,engineType:s.value,onChange:function(e){e.value?localStorage.setItem("defaultEngine",e.value):localStorage.removeItem("defaultEngine"),d(e)}})})})]})}function ColorDot(e){return(0,c.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("circle",{cx:"6",cy:"6",r:"4.5",fill:e.fill,stroke:e.stroke,strokeWidth:"3"})})}var ee=(0,l.forwardRef)(function(e,t){var n=e.engineType||Z.rG.DEFAULT,s=(0,a._)((0,l.useState)(n),2),x=s[0],m=s[1],v=(0,l.useMemo)(function(){return[(0,Z.CU)(Z.rG.DEFAULT),(0,Z.CU)(Z.rG.SCHOLAR)]},[e.engineType]),_=(0,l.useMemo)(function(){return(0,i._)((0,o._)({},(0,Z.CU)(x||Z.rG.DEFAULT)),{active:!0})},[x]),w=(0,a._)((0,l.useState)("undefined"!=typeof localStorage&&localStorage.getItem("output-lang")||Z.$v.ZH),2),k=w[0],y=w[1],j=(0,a._)((0,l.useState)(k),2),C=j[0],M=j[1],E=(0,a._)((0,l.useState)("undefined"!=typeof localStorage&&localStorage.getItem("scholarSearchDomain")||Z.RM.ALL),2),T=E[0],I=E[1],O=(0,S.LM)(),L=O.userInfo,P=(0,a._)((0,l.useState)(null!=L&&L.extensionReadingEnable||O.extensionReadingEnable),2),A=P[0],H=P[1],F=(0,a._)((0,l.useState)(O.advancedSearchEnable),2),z=(F[0],F[1]),q=(0,a._)((0,l.useState)(!!e.engineType||!A),2),V=q[0],Y=q[1],ee=(0,l.useRef)(A),et=(0,l.useRef)(null),en=(0,l.useRef)(null),er=(0,l.useCallback)(function(){m(n),e.engineType&&Y(!0)},[n]),eo=(0,l.useCallback)(function(e){O.hasHydrated&&(O.login?(0,B.JQ)(e).then(function(e){0===e.data.errCode&&O.updateUserInfo()}):O.setExtensionReadingEnable(e),H(e))},[O.hasHydrated]);(0,l.useCallback)(function(e){O.hasHydrated&&(O.setAdvancedSearchEnable(e),z(e))},[O.hasHydrated]);var ei=(0,l.useCallback)(function(){er(),eo(ee.current),e.onRestore&&e.onRestore(),M(k)},[er,e.onRestore,eo]);(0,l.useImperativeHandle)(t,function(){return{getStatus:function(){return{activeRange:_,switchChecked:A}},onChange:function(e){Y(!A||"学术"===_.name||"detail"!==e)},restore:function(){ei()}}},[ei,A,_]),(0,l.useEffect)(function(){O.hasHydrated&&(null!==L?(H(L.extensionReadingEnable),ee.current=!!L.extensionReadingEnable):(H(O.extensionReadingEnable),ee.current=O.extensionReadingEnable),z(O.advancedSearchEnable))},[L,O.hasHydrated]),(0,l.useEffect)(function(){Y(!A||"学术"===_.name||C!==Z.$v.ZH)},[A,_,C]),(0,l.useEffect)(function(){er()},[er]),(0,l.useEffect)(function(){O.login?(H(O.userInfo.extensionReadingEnable),O.setExtensionReadingEnable(O.userInfo.extensionReadingEnable),ee.current=O.userInfo.extensionReadingEnable):ee.current=O.extensionReadingEnable},[O.hasHydrated]);var onItemClick=function(t){(0,G.oh)("change-search-range"),m(t.value||Z.rG.DEFAULT);var n=(0,Z.CU)(t.value||Z.rG.DEFAULT);e.onChange(n)},onLanguageItemClick=function(t){if(e.isH5)M(t.value);else{var n;y(t.value),null===(n=et.current)||void 0===n||n.setOpen(!1)}},onLanguageRangeItemClick=function(e){var t;I(e.value),null===(t=en.current)||void 0===t||t.setOpen(!1)},ea=(0,J.fl)();(0,l.useEffect)(function(){ea.current&&localStorage.setItem("scholarSearchDomain",T)},[T]),(0,l.useEffect)(function(){ea.current&&(M(k),k?localStorage.setItem("output-lang",k):localStorage.removeItem("output-lang"))},[k]);var es=(0,l.useRef)(!1),ec=(0,l.useId)(),el=(0,l.useCallback)(function(){var t,closeDrawer=function(){var t;arguments.length>0&&void 0!==arguments[0]&&arguments[0],r(!0),null===(t=e.onH5LangRangeSettingClose)||void 0===t||t.call(e)};if(!es.current){null===(t=e.onH5LangRangeSettingOpen)||void 0===t||t.call(e),es.current=!0;var n=(0,X.uM)({id:ec,onUnMount:function(){es.current=!1},drawerProps:{onClose:function(){closeDrawer()},anchor:"bottom",sx:{".MuiPaper-root":{borderRadius:"10px 10px 0 0",pb:4,minHeight:"40vh"}}},onMounted:function(){o()},children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(u.Z,{sx:{py:2,color:"black"},children:[(0,c.jsx)(d.Z,{sx:{position:"absolute",m:-1,left:16},onClick:function(){closeDrawer()},children:(0,c.jsx)(U.Z,{})}),(0,c.jsx)(h.Z,{sx:{textAlign:"center",fontSize:18,fontWeight:"bold"},children:"文献范围"})]}),(0,c.jsx)(H5LanguageRangeSetting,{onConfirm:function(e){closeDrawer(),I(e)},activeRangeType:T})]})}),r=n.close,o=n.open}},[e.onH5LangRangeSettingClose,e.onH5LangRangeSettingOpen,ec,T]),eu=e.isH5,ed=(0,l.useCallback)(function(){m(Z.rG.DEFAULT)},[]),isActive=function(e){return x===e.value};return(0,c.jsxs)(u.Z,{className:b()["select-popover"],children:[e.showSearchRange&&(0,c.jsx)(h.Z,{className:b().title,children:"搜索范围"}),e.showSearchRange&&(0,c.jsx)(c.Fragment,{children:eu?(0,c.jsx)(Q.M,{children:v.map(function(e,t){return(0,c.jsx)(f.Z,{onClick:function(){return onItemClick(e)},className:D()(b()["item-button"],isActive(e)?b()["active-item-button"]:""),children:e.name},t)})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(u.Z,{className:b()["search-setting-actions"],children:v.map(function(e,t){return(0,c.jsxs)(W.Z,{className:D()(b()["range-item"],isActive(e)?b().active:""),onClick:function(){return onItemClick(e)},children:[(0,c.jsx)(ColorDot,{fill:e.fill,stroke:e.stroke}),(0,c.jsx)(u.Z,{className:b()["range-item-name"],children:e.name}),isActive(e)&&(0,c.jsx)("svg",{width:"16",height:"11",viewBox:"0 0 16 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M14.6666 1L5.49992 10.1667L1.33325 6",stroke:"#1570EF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]},t)})}),"scholar"===_.value&&(0,c.jsxs)(u.Z,{className:D()(b()["search-setting-actions"],b().extension),children:[(0,c.jsx)(h.Z,{sx:{flex:1,textAlign:"left",paddingLeft:"22px"},children:"文献范围"}),(0,c.jsx)(K.Z,{_ref:en,popoverNoPortal:!0,zIndex:105,placement:"top-end",sxs:{actionButton:{marginRight:"-17px"}},label:(0,c.jsx)(u.Z,{sx:{fontSize:"16px"},children:$.OX.find(function(e){return e.value===T}).label}),children:(0,c.jsx)(R.R,{sx:{padding:"10px 0"},sxs:{listItem:{padding:"0 10px"}},keyPropName:"value",items:$.OX,renderItem:function(e,t){return{content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(u.Z,{sx:{width:"100px"},children:e.label}),e.value===T&&(0,c.jsx)("svg",{width:"16",height:"11",viewBox:"0 0 16 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M14.6666 1L5.49992 10.1667L1.33325 6",stroke:"#1570EF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),listItemButtonProps:{className:D()(b()["range-item"],e.value===T?b().active:""),sx:{p:"0 5px !important"},onClick:function(){onLanguageRangeItemClick(e)}}}}})})]}),(0,c.jsx)(p.Z,{sx:{width:"100%",marginTop:"10px"}})]})}),eu&&x===Z.rG.SCHOLAR&&e.showSearchRange&&(0,c.jsx)(u.Z,{className:b().title,sx:{pt:"0 !important"},children:(0,c.jsxs)(N.Z,{sx:(0,G.KI)({color:"inherit",width:1,p:"10px 0px !important",justifyContent:"space-between"}),onClick:el,children:[(0,c.jsx)("span",{children:"文献范围"}),(0,c.jsx)(U.Z,{style:{transform:"rotate(180deg)",color:"#98A2B3"}})]})}),eu&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h.Z,{className:b().title,children:"输出语言"}),(0,c.jsx)(Q.M,{children:$.Mj.map(function(t,n){return(0,c.jsx)(f.Z,{onClick:onLanguageItemClick.bind(null,t),className:D()(b()["item-button"],(0,r._)({},b()["active-item-button"],t.value===(e.isH5?C:k))),children:t.label},t.value||"")})})]}),(0,c.jsx)(h.Z,{className:b().title,children:"高级设置"}),(0,c.jsxs)(u.Z,{className:D()(b()["search-setting-actions"],b().extension),children:[(0,c.jsx)(h.Z,{children:"延伸阅读"}),(0,c.jsx)(g.Z,{checked:A,onChange:function(e,t){eo(e.target.checked)},classes:{root:"switch-root",switchBase:"switch-base",thumb:"switch-thumb",track:"switch-track"}})]}),!eu&&(0,c.jsxs)(u.Z,{className:D()(b()["search-setting-actions"],b().extension),children:[(0,c.jsx)(h.Z,{sx:{flex:1,textAlign:"left"},children:"输出语言"}),(0,c.jsx)(K.Z,{_ref:et,popoverNoPortal:!0,zIndex:105,placement:"top-end",sxs:{actionButton:{marginRight:"-17px"}},label:(0,c.jsx)(u.Z,{sx:{fontSize:"16px"},children:$.Mj.find(function(e){return e.value===k}).label}),children:(0,c.jsx)(R.R,{sx:{padding:"10px 0"},sxs:{listItem:{padding:"0 10px"}},keyPropName:"value",items:$.Mj,renderItem:function(e,t){return{content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(u.Z,{sx:{width:"100px"},children:e.label}),e.value===k&&(0,c.jsxs)("svg",{width:"16",height:"11",viewBox:"0 0 16 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsx)("path",{d:"M14.6666 1L5.49992 10.1667L1.33325 6",stroke:"#1570EF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),"1"]})]}),key:t,listItemButtonProps:{className:D()(b()["range-item"],e.value===k?b().active:""),sx:{p:"0 5px !important"},onClick:function(){onLanguageItemClick(e)}}}}})})]}),eu&&(0,c.jsxs)(Q.M,{columnCount:2,sx:{mt:2},children:[(0,c.jsx)(f.Z,{className:b()["item-button"],disabled:!V,onClick:function(){ed(),Y(!1),eo(!0),I(Z.RM.ALL),y(Z.$v.ZH),M(Z.$v.ZH),e.onRestore&&e.onRestore(!0)},children:"重置"}),(0,c.jsx)(f.Z,{className:D()(b()["item-button"],b()["primary-btn"]),onClick:function(){var t,n;ee.current=A,null===(t=e.onConfirm)||void 0===t||t.call(e),null===(n=e.onClose)||void 0===n||n.call(e),y(C)},children:"确定"})]})]})});function H5LanguageRangeSetting(e){var t=(0,a._)((0,J.U8)(e.activeRangeType,Z.RM.ALL,{isControlled:!1}),2),n=t[0],r=t[1];return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(x.Z,{className:"flex-auto-height",children:[(0,c.jsx)(Q.M,{sx:{mt:2},children:$.OX.map(function(e,t){return(0,c.jsx)(f.Z,{onClick:r.bind(null,e.value),className:D()(b()["item-button"],e.value===n?b()["active-item-button"]:""),children:e.label},e.value)})}),(0,c.jsxs)(Q.M,{columnCount:2,sx:{mt:"auto"},children:[(0,c.jsx)(f.Z,{className:b()["item-button"],disabled:n===Z.RM.ALL,onClick:function(){r(Z.RM.ALL)},children:"重置"}),(0,c.jsx)(f.Z,{className:D()(b()["item-button"],b()["primary-btn"]),onClick:e.onConfirm.bind(null,n),children:"确定"})]})]})})}var et=(0,l.forwardRef)(function(e,t){var n=(0,a._)((0,l.useState)(!1),2),r=n[0],f=n[1],p=(0,l.useRef)(null),g=(0,a._)((0,l.useState)(null),2),x=g[0],v=g[1],_=(0,l.useRef)(null),b=(0,l.useMemo)(function(){return{toggle:function(e){f(null!=e?e:!r)},onChange:function(e){var t;null===(t=p.current)||void 0===t||t.onChange(e)},setTuneData:v}},[r]);return z.HK.useRegister("searchSettingDrawer",function(){return b},[b]),(0,l.useImperativeHandle)(t,function(){return b},[b]),(0,l.useEffect)(function(){if(!r){var e;null==x||null===(e=x.onClose)||void 0===e||e.call(x)}},[r]),(0,c.jsxs)(m.ZP,{open:r,onClose:function(){var e;f(!1),null===(e=p.current)||void 0===e||e.restore()},keepMounted:!0,anchor:"bottom",sx:{"& .MuiPaper-root":{overflow:"hidden",borderRadius:"10px 10px 0 0"}},children:[(0,c.jsxs)(u.Z,{sx:{p:2,position:"relative"},children:[x&&(0,c.jsx)(d.Z,{sx:{position:"absolute",m:-1,left:16},onClick:x.onBack,children:(0,c.jsx)(U.Z,{})}),(0,c.jsx)(h.Z,{sx:{textAlign:"center",fontSize:18,fontWeight:"bold"},children:"设置"})]}),e.topNode,(0,c.jsx)(ee,(0,i._)((0,o._)({},V()(e,["onChange"])),{onH5LangRangeSettingOpen:function(){_.current=x,v(null),f(!1)},onH5LangRangeSettingClose:function(){v(_.current),_.current=null,f(!0)},ref:p,onChange:function(){for(var t,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];e.isH5||null===(t=e.onChange)||void 0===t||t.call.apply(t,[e].concat((0,s._)(r)))},onClose:function(){return f(!1)},onConfirm:function(){var t,n,r;null==x||null===(t=x.onConfirm)||void 0===t||t.call(x),null===(n=e.onConfirm)||void 0===n||n.call(e),null===(r=e.onChange)||void 0===r||r.call(e,p.current.getStatus().activeRange)},isH5:!0}))]})});function ChangeSearchRangeButton(e){var t=e.activeRange,n=e.dropDownVisible;return(0,c.jsxs)(N.Z,{sx:{p:1,m:-1},onClick:function(t){e.onClick(t)},className:D()(b()["search-range"]),children:[(0,c.jsx)(ColorDot,{fill:t.fill,stroke:t.stroke}),(0,c.jsx)(u.Z,{sx:{margin:"0 10px 0 5px"},children:t.name}),(0,c.jsx)(u.Z,{className:n?b().expand:b().collapse,children:(0,c.jsx)("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"#98A2B3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})}function HomeAccountUI(){return(0,S.LM)(function(e){return e.login})?(0,c.jsx)(E.Z,{}):(0,c.jsx)(H5LoginButton,{onClick:function(){return(0,M.x3)()}})}function H5LoginButton(e){var t=(0,a._)((0,l.useState)(!1),2),n=t[0],r=t[1],o=(0,a._)((0,l.useState)(null),2),i=o[0],s=o[1],h=(0,a._)((0,T.bQ)({anchor:i},n,function(){return r(!1)}),1)[0];(0,I.useRouter)();var f=(0,E.J)(),p=f.setDefaultItem,g=f.aboutItem,x=f.feedbackItem,m=f.userPolicyItem,_=f.privacyItem,b=(0,l.useMemo)(function(){var e,t=[g];return(null===(e=(0,O.ZD)())||void 0===e?void 0:e.isMiniWebView)?[].concat([m,_,x],t):[].concat(x,p,t)},[]);return(0,c.jsxs)(L.K,{sx:{display:"inline-flex"},children:[(0,c.jsx)(N.Z,{onClick:e.onClick,sx:{minWidth:0,height:46,color:"#344054"},variant:"text",children:"登录"}),(0,c.jsx)(d.Z,{ref:function(e){e instanceof HTMLElement&&s(e)},sx:{m:-1,p:1},onClick:r.bind(null,!n),children:(0,c.jsx)(P.Z,{style:{width:20,height:20,color:"#667085"}})}),(0,c.jsx)(T.ZP,{open:n,placement:"bottom-end",offsetOptions:{mainAxis:10,crossAxis:-18},isAutoUpdate:!0,anchor:i,ref:h,children:(0,c.jsx)(u.Z,{sx:{p:"10px"},children:(0,c.jsx)(R.R,{sx:{width:165},items:b,keyPropName:"text",renderItem:function(e){return{content:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(v.Z,{sx:(0,G.KI)({mr:"5px",minWidth:0,width:20,height:20,color:"black",display:"flex",alignItems:"center","& svg":{width:1,height:1,flex:"none"}}),children:e.icon}),(0,c.jsx)(A.Z,{sx:{ml:"10px",fontSize:14,color:"#000"},primary:e.text})]})}},sxs:{listItem:{fontSize:16,height:28,color:"#475467","& + &":{mt:"3px"},".MuiListItemIcon-root":{color:"inherit"}},listItemButton:{height:1,boxSizing:"border-box",p:"5px 10px"}}})})})]})}var useHomeEffects=function(){}},21377:function(e,t,n){"use strict";n.d(t,{SI:function(){return AcademicReference},ld:function(){return AppendQuestionBox},tz:function(){return ExportGenerateReportButtonV2},Sb:function(){return MindMappingBox},DR:function(){return q},fG:function(){return tU},sW:function(){return tR},fS:function(){return tG},V7:function(){return tD},K1:function(){return tF},_R:function(){return QuickAccess},KW:function(){return QuickAccessLoading},X6:function(){return z},X7:function(){return tH},QS:function(){return tA},Rj:function(){return SearchBox},vs:function(){return tT},HK:function(){return tI},fR:function(){return SearchNoDataContentView},Qo:function(){return W},G2:function(){return buildSearchQuery},Im:function(){return tV},xi:function(){return openAcademicReference},rr:function(){return useAutoScroll},WK:function(){return useAutoScrollV2},X9:function(){return useMindMapping},xv:function(){return useMindTabName},Fw:function(){return useOrganizationAndPeople},Rx:function(){return useSearch},a4:function(){return useSearchEffect},ww:function(){return useSearchPageEffect},S0:function(){return useSearchResultCollapseEffect},ey:function(){return useSkeletonTimeRecord},P4:function(){return useUniqueExpandEffect}});var r,o,i,a,s,c,l,u,d,h,f,p,g,x,m,v,_,b,w,k,y,j,C,S,M,E,T,I,R,Z,O,L,N,P,A,H,D,F,B,W,z,U,q,V,G,Q=n(16687),K=n(86840),J=n(35029),X=n(88965),$=n(81763),Y=n(92495),ee=n(98499),et=n(50044),en=n(57437),er=n(2265),eo=n(97765),ei=n(22977),ea=n(54112),es=n(96521),ec=n(35069),el={OVERFLOW_LIMIT:"overflow_limit",SENSITIVE_CHECK_FAILED:"sensitive_check_failed"},eu={CANCEL:"cancel"},ed=function(){function StreamGenerate(e){(0,ei._)(this,StreamGenerate),this.stream=e,this.tempMd="",this.params=null,this.eventSource=null}var e=StreamGenerate.prototype;return e.stop=function(){tryClose(this.eventSource)},e.cancel=function(){tryClose(this.eventSource)},e.post=function(e,t){var n,r,o,i,a,s=this;this.params=t;var c=this;t=t||{};var l=document.querySelector("#meta-token").getAttribute("content");Object.assign(t,ea.vO.headers),Object.assign(t,{token:l});var u=new EventSource((n="".concat("https://metaso.cn","/").concat(e),r=t,i=(o=n).lastIndexOf("?"),a=Object.entries(r).map(function(e){var t=(0,$._)(e,2),n=t[0],r=t[1];return r?"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r)):""}).filter(function(e){return e.trim().length>0}).join("&"),i>-1?o+="&"+a:o+="?"+a,o),{withCredentials:!0});c.eventSource&&tryClose(c.eventSource),this.eventSource=u,u.addEventListener("open",function(e){c.tempMd="",s.stream.begin()}),u.addEventListener("message",function(e){s.stream.receive(e.data);var n=e.data;if("[DONE]"===n){c.stream.down(t,c.tempMd),tryClose(u);return}if("[LIMIT]"===n){c.stream.commonEventListener&&c.stream.commonEventListener(el.OVERFLOW_LIMIT,t),c.stream.error({code:-1,msg:"字数超限"});return}if("[INPUT_SENSITIVE]"===n){c.stream.commonEventListener&&c.stream.commonEventListener(el.SENSITIVE_CHECK_FAILED,t),c.stream.error({code:-2,msg:"输入敏感词"});return}if("[OUTPUT_SENSITIVE]"===n){c.stream.commonEventListener&&c.stream.commonEventListener(el.SENSITIVE_CHECK_FAILED,t),c.stream.error({code:-3,msg:"输出敏感词"});return}if("[TOO_MANY_REQUESTS]"===n){c.stream.error({code:es.cO.TOO_MANY_REQUESTS,msg:"请求频繁"});return}try{c.stream.receive(JSON.parse(n))}catch(e){throw(0,ec.dW)("event-parse-chunk-error",n),e}}),u.addEventListener("error",function(e){if(c.stream.error)try{c.stream.error(e)}catch(e){}tryClose(u)})},StreamGenerate}();function tryClose(e){if(e)try{e.close()}catch(e){}}var eh=n(26715),ef=n.n(eh);n(6774);var ep=n(23670),eg=n(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var pan_baidu=function(e){return eg.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:15,height:12,className:"icon",viewBox:"0 0 1280 1024"},e),u||(u=eg.createElement("path",{fill:"#06A7FF",d:"M308.096 396.8a346 346 0 0 1-4.672-56.832C303.424 152.192 454.016 0 639.808 0c185.728 0 336.32 152.192 336.32 339.968 0 19.072-1.536 38.08-4.672 56.832 170.56.96 308.544 140.992 308.544 313.6 0 173.184-138.88 313.6-310.272 313.6a307.71 307.71 0 0 1-221.056-93.568 78.4 78.4 0 0 1 .448-109.568 76.416 76.416 0 0 1 111.68 3.008c28.16 27.648 66.624 44.736 109.056 44.736 86.4 0 156.416-70.784 156.416-158.08 0-87.36-70.08-158.08-156.416-158.08a154.88 154.88 0 0 0-103.424 39.424l-.128-.128-2.56 2.624a129 129 0 0 0-8.832 8.896l-5.888 5.952.064.128-317.056 320.448A307.71 307.71 0 0 1 310.208 1024C138.944 1024 0 883.584 0 710.4c0-172.48 137.728-312.384 308.096-313.6m2.304 471.808c86.4 0 156.416-70.784 156.416-158.08 0-87.36-70.08-158.08-156.416-158.08-86.4 0-156.416 70.72-156.416 158.08 0 87.296 70.016 158.08 156.416 158.08m329.408-344.32c100.736 0 182.4-82.56 182.4-184.32s-81.664-184.32-182.4-184.32-182.4 82.56-182.4 184.32 81.664 184.32 182.4 184.32"})),d||(d=eg.createElement("path",{fill:"#FF436A",d:"M821.184 367.104a71 71 0 0 1-.448-8.32c0-40.896 34.752-73.984 77.632-73.984S976 317.888 976 358.784c0 3.136-.192 6.208-.64 9.28C964.928 535.808 818.752 668.8 640 668.8S315.072 535.808 304.64 368a71 71 0 0 1-.64-9.216c0-40.896 34.752-73.984 77.632-73.984s77.632 33.088 77.632 73.984c0 2.816-.128 5.568-.448 8.32 9.6 87.232 87.04 155.136 181.184 155.136 94.08 0 171.52-67.968 181.184-155.2z"})))};function pan_ali_extends(){return(pan_ali_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var pan_ali=function(e){return eg.createElement("svg",pan_ali_extends({xmlns:"http://www.w3.org/2000/svg",width:17,height:16,className:"icon",viewBox:"0 0 1088 1024"},e),h||(h=eg.createElement("path",{fill:"#1855FB",d:"M492.504 1021.607c-175.51-20.915-326.588-116.41-416.965-264.033-31.342-51.17-57.246-118.457-70.358-184.018C1.215 553.728 0 533.452 0 483.115c0-57.118.895-68.951 6.972-98.949C46.756 188.316 186.576 49.52 387.032 6.217 411.145.908 424.769.013 477.985.013c69.718-.256 91.913 3.198 153.444 22.642 72.084 23.474 128.69 57.95 185.36 112.764 69.719 67.544 111.038 142.443 132.209 238.833 9.019 39.912 9.914 131.76 1.79 170.202-4.668 22.386-4.668 25.712-.639 33.068 4.99 9.594 4.67 9.338 74.132 27.12 52.576 13.56 58.972 16.694 62.746 31.66 4.094 15.863-33.708 97.862-68.247 147.88-84.877 123.19-217.086 206.596-370.785 233.46-30.83 5.372-123.446 7.675-155.427 3.965zm135.151-195.083a363.3 363.3 0 0 0 172.313-86.156c34.859-31.15 73.555-85.708 89.226-126.644 14.775-38.44 15.99-37.61-91.593-64.473-30.51-7.931-36.01-16.118-31.341-48.355 11.897-81.679-20.66-171.865-83.982-231.541a291.025 291.025 0 0 0-364.07-28.207c-82.51 57.118-126.131 149.542-121.206 257.51 4.093 91.272 40.104 170.457 106.624 234.61 84.557 82 206.02 116.73 324.029 93.256"})))};function pan_quark_extends(){return(pan_quark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var pan_quark=function(e){return eg.createElement("svg",pan_quark_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,className:"icon",viewBox:"0 0 1024 1024"},e),f||(f=eg.createElement("path",{fill:"#1855FB",d:"M469.344 990.4c-112.96-9.984-220.736-60.96-297.824-140.48-77.344-80-116.608-158.304-135.392-270.272-4.896-29.024-5.6-98.304-1.216-126.848 10.496-70.496 33.92-137.344 65.856-188.8C191.264 118.08 343.232 32 510.08 32c71.232 0 135.392 12.928 197.12 40 53.92 23.68 113.184 65.856 152.96 109.056 62.176 67.552 94.144 125.12 117.568 211.968 18.56 68.544 19.008 164.896 1.44 232.96-19.744 75.392-46.592 129.28-94.88 189.056-41.952 52.192-86.08 89.024-144.16 120.256-60.992 32.96-117.344 49.28-188.576 55.136-34.88 2.912-48.288 2.912-82.208 0zm86.112-244.384c11.968-5.12 21.216-19.52 21.216-33.44 0-23.904 4.64-50.976 10.752-62.944 12.448-24.384 29.024-32.928 79.264-40.736 19.52-2.912 39.52-7.04 44.416-9.024 13.888-6.08 25.376-17.792 32.928-34.144 6.816-14.88 7.072-16.32 7.072-54.4-.256-42.208-1.696-51.456-16.32-89.28-21.76-56.832-78.816-113.408-135.424-133.92a400 400 0 0 0-50.496-12.672c-26.816-4.384-31.936-4.64-55.104-1.952-45.856 5.344-74.176 14.4-105.888 33.408-20 12.192-21.44 13.44-45.6 37.312-35.392 34.88-53.664 68.8-64.896 119.552-19.52 89.024 15.872 182.944 90.016 239.552 30.976 23.648 76.352 42.688 109.28 45.856 28.288 2.912 68.32 1.216 78.784-3.2z"})))};function pan_lanzou_extends(){return(pan_lanzou_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var pan_lanzou=function(e){return eg.createElement("svg",pan_lanzou_extends({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,className:"icon",viewBox:"0 0 1024 1024"},e),p||(p=eg.createElement("path",{fill:"#FFFEFE",d:"M0 886.4V748l92-59.2c51.2-32.8 100.8-68 111.2-77.6 9.6-10.4 24.8-41.6 32-68.8C252 480 292.8 423.2 342.4 392c32.8-20.8 44.8-24 97.6-24 43.2 0 70.4 4.8 95.2 16.8 20 8.8 40 14.4 45.6 12s23.2-29.6 40-60.8c44-84 103.2-140 199.2-187.2 70.4-35.2 87.2-40 141.6-43.2l62.4-4V1024H0z"})),g||(g=eg.createElement("path",{fill:"#FF6500",d:"M0 388.8V0h1024v125.6l-51.2 4c-39.2 3.2-68 12.8-129.6 43.2C748 220 690.4 274.4 644 360.8c-40.8 76-56 82.4-122.4 52.8-28.8-12.8-61.6-21.6-82.4-21.6-73.6.8-153.6 78.4-180 173.6-7.2 27.2-20 56.8-28.8 66.4-19.2 20.8-188.8 132-212 139.2L0 776.8z"})))};function pan_xunlei_extends(){return(pan_xunlei_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var pan_xunlei=function(e){return eg.createElement("svg",pan_xunlei_extends({xmlns:"http://www.w3.org/2000/svg",width:14,height:14,className:"icon",viewBox:"0 0 1024 1024"},e),x||(x=eg.createElement("path",{fill:"#3475ED",d:"M3.258 240.635C4.241 124.603 81.487 2.665 233.582 2.192c152.092-.51 416.83 0 555.651 1.455 138.747 1.455 232.294 93.891 232.294 239.426 0 145.538.472 385.001.472 535.457 0 150.451-97.957 244.38-262.805 243.356-164.848-.945-362.733.514-508.88 0-146.15-.469-243.632-78.667-246.546-252.208-2.99-173.54-1.496-413.008-.51-529.043"})),m||(m=eg.createElement("path",{fill:"#FCFCFC",d:"M80.19 219.764c48.703 17.231 181.818 76.468 187.96 168.666 0 34.654-10.318 50.154-9.332 95.384.238 61.205 36.185 126.617 86.62 166.185 53.39 45.238 149.612 76.702 200.401 117.57 58.47 38.037 175.363 158.99 175.363 158.99S634.31 717.105 588.087 639.693c74.294-41.3 357.77-80.633 357.77-80.633-25.83-25.33-168.552-88.501-253.946-87.556 41.102-63.406 120.593-181.41 120.593-181.41l-27.56 4.172c34.922-75.208 73.784-135.193 109.73-183.609-154.064 40.785-315.722 126.1-461.873 245.087-21.415-32.45-75.787-102.27-141.501-100.577-25.826 0-34.961 1.493-51.655 11.093-47.993-20.651-110.242-42.557-159.459-46.496z"})))};function pan_123_extends(){return(pan_123_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var pan_123=function(e){return eg.createElement("svg",pan_123_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,className:"icon",viewBox:"0 0 1024 1024"},e),v||(v=eg.createElement("path",{fill:"#597DFB",d:"M998.172 513.82c0 96.37.456 192.74-.113 289.11-.455 76.117-34.361 133.916-99.67 172.714-29.127 17.295-61.212 25.032-95.004 25.145-194.788.114-389.575.57-584.477-.113-108.999-.342-194.446-86.244-194.787-195.47-.569-194.56-.455-389.007 0-583.567.227-109.682 86.699-194.901 197.29-195.129 135.169-.341 270.337-.114 405.505-.114 57.116 0 114.346-.113 171.463 0 105.358.114 186.709 72.477 198.997 177.152.91 8.079.683 16.27.683 24.349.113 95.346.113 190.578.113 285.923M258.276 286.948v80.44h132.096c12.06 0 24.007.683 35.726 3.528 28.103 6.599 41.529 23.893 40.96 53.134-.455 24.348-16.953 42.553-43.008 47.559-19.229 3.64-38.685 1.479-58.027 2.048-53.02 1.593-90.112 29.127-106.496 79.53-5.916 18.205-8.647 37.092-8.76 56.207-.115 40.618-.115 81.123 0 121.742 0 3.072-.911 6.372 1.592 9.216h309.02v-80.327H347.25c1.139-22.528-1.592-44.032 2.39-65.309 3.413-18.66 14.336-30.037 32.427-35.043 7.85-2.162 15.815-3.413 24.007-3.413 19.456-.114 38.912.682 58.14-.683 42.78-3.072 76.118-21.163 94.208-62.35 17.522-39.709 20.822-80.441 8.42-121.743-13.653-45.624-43.805-73.841-91.591-81.578-11.492-1.82-23.097-2.845-34.702-2.958-58.255-.456-116.395-.456-174.65-.57-2.275 0-4.664.342-7.622.57m363.52 373.304v79.417c1.251.57 1.934 1.024 2.503 1.024 60.302-.455 120.718 3.3 180.793-2.844 32.995-3.413 61.553-17.522 83.626-43.008 34.816-40.164 37.66-129.82-25.486-176.583-3.186-2.39-7.168-3.982-9.216-8.42 19.456-12.402 36.181-26.738 46.763-47.104 40.39-77.369-14.678-172.714-102.059-175.218-56.434-1.592-112.868-.796-169.301-1.137-2.39 0-4.779.341-7.282.569v80.554c39.026 0 77.141-.114 115.257 0 8.76 0 17.75 0 26.396 1.252 28.558 4.21 42.78 23.324 41.757 55.068-.91 28.103-15.133 42.44-44.032 45.511-28.559 3.072-57.117.91-85.675 1.707-3.755.114-7.737-1.252-11.264 1.593v77.71c4.551 2.162 8.875 1.138 12.97 1.252 28.218.91 56.434-1.707 84.538 1.82 18.545 2.276 33.792 9.671 39.936 28.217 6.94 21.163 7.395 42.44-7.51 61.326-4.892 6.258-11.491 10.354-19.114 12.63-9.558 2.844-19.229 4.437-29.128 4.437-37.432.114-74.752.114-112.184.227zm-418.816 80.1V286.948H106.95v453.404z"})))};function language_extends(){return(language_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var language=function(e){return eg.createElement("svg",language_extends({xmlns:"http://www.w3.org/2000/svg",width:19,height:19,fill:"none",viewBox:"0 0 19 19"},e),_||(_=eg.createElement("g",{clipPath:"url(#clip0_1137_9934)"},eg.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m4.246 6.188 3.75 3.75m-4.5.75 4.5-4.5 1.5-2.25m-7.5 0h9m-5.25-2.25h.75m3.685 11.25h5.38m-5.38 0-1.435 3m1.435-3 2.149-4.494c.173-.362.26-.543.378-.6a.38.38 0 0 1 .326 0c.119.057.205.238.378.6l2.15 4.493m0 0 1.434 3"}))),b||(b=eg.createElement("defs",null,eg.createElement("clipPath",{id:"clip0_1137_9934"},eg.createElement("path",{fill:"currentColor",d:"M.496.188h18v18h-18z"})))))},ex=n(2559),em=n(25577),ev=n(98075),e_=n(6882),eb=n(52653),ew=n(59500),ek=n(54986),ey=n(41135),ej=n(73724),eC=n(40819),eS=n(43226),eM=n(91339),eE=n(35843),eT=n(22079),eI=n(74309),eR=n(77261),eZ=n(41101),eO=n(51469),eL=n(24033),eN=n(97284),eP=n(50410),eA=n(15828),eH=n(21366),eD=n(98489),eF=n(30666),eB=n(64973);function sloganDefault_extends(){return(sloganDefault_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var sloganDefault=function(e){return eg.createElement("svg",sloganDefault_extends({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),w||(w=eg.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14.667A6.667 6.667 0 1 0 8 1.334a6.667 6.667 0 0 0 0 13.333"})))},eW=n(2535),ez=n(51095),eU=n(60230),eq=n(25727),eV=n.n(eq),eG=n(20574),eQ=n(8303),eK=n(42744),eJ=n.n(eK),eX=n(82748),e$=n(84390);function search_setting_extends(){return(search_setting_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var search_setting=function(e){return eg.createElement("svg",search_setting_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:21,fill:"none",viewBox:"0 0 20 21"},e),k||(k=eg.createElement("path",{stroke:"#667085",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.67,d:"M1.665 6.923h2.363m14.307 0h-5.876"})),y||(y=eg.createElement("path",{stroke:"#667085",strokeLinecap:"round",strokeWidth:1.67,d:"M1.665 14.031h6.068m10.602 0H16.1"})),j||(j=eg.createElement("circle",{cx:8.309,cy:6.968,r:2.033,stroke:"#667085",strokeWidth:1.67})),C||(C=eg.createElement("circle",{cx:11.819,cy:14.032,r:2.033,stroke:"#667085",strokeWidth:1.67})))},eY=n(7951),e0=n.n(eY),e1=n(13246);function _templateObject(){var e=(0,eU._)(["\n  padding:  8px;\n  color: #344054;\n  & svg{\n    width: 30px;\n    height: 30px;\n  }\n  &:hover{\n    color: #475467;\n  }\n  &:active{\n    color: #414c5e;\n  }\n  &[disabled]{\n    color: #9aa3b2;\n  }\n"]);return _templateObject=function(){return e},e}var e2=(0,er.forwardRef)(function(e,t){var n=e.onSubmit,r=e.boxShadow,o=e.autoFocus,i=e.showSettingButton,a=e.placeholders,s=void 0===a?{argument:"点击输入想了解的问题",law:""}:a,c=e.prefixSetting,l=e.onArgumentChange,u=e.sx,d=(0,$._)((0,er.useState)(""),2),h=d[0],f=d[1],submit=function(){h&&n(h)},p=(0,eX.I1)(submit,e.isH5),g=(0,er.useRef)("external"),x=(0,eX.a8)(),m=(0,er.useRef)(null),v=(0,$._)((0,eX.U8)(e.disabled,!1,{isControlled:!1}),2),_=v[0],b=v[1];(0,er.useEffect)(function(){if("external"!==g.current||!x)return},[h]),(0,er.useImperativeHandle)(t,function(){return{setText:function(e){return g.current="external",f(e)},getText:function(){return h},setDisabled:function(e){b(e)},submit:submit,argumentRef:m}},[h]);var w=tI.useAPI("searchSettingDrawer");(0,er.useRef)(null);var k=(0,er.useCallback)(function(){var t,n=w.current;null==n||n.toggle(!0),null===(t=e.onSettingClicked)||void 0===t||t.call(e)},[]),y=(0,eX.sd)(),j=y.isQQ,C=y.version;(0,eX.a8)();var S=(0,er.useCallback)(function(){var e,t;f(""),null===(t=m.current)||void 0===t||null===(e=t.textareaRef.current)||void 0===e||e.focus()},[]);return(0,en.jsxs)(em.Z,{className:(0,ec.zk)([e0()["search-consult-input-wrapper"]],(0,K._)({},e0().shadow,r)),component:"form",onSubmit:function(e){return e.preventDefault()},sx:(0,J._)({},u),children:[c,(0,en.jsx)(ez.Kx,(0,X._)((0,J._)({disabled:_,sx:{"& textarea":{width:"100%"},pl:"20px",pr:"min(4%, 20px)",color:h?"black":"#667085","&[class]":{minWidth:"invalid"},"& textarea::placeholder":{color:"#667085"}},icon:e.hideIcon?null:(0,en.jsx)(eG.Z,{}),ref:m,rows:4,autoFocus:void 0===o||o,value:h,onFocus:function(){g.current="user"},onChange:function(e){f(e),null==l||l(e),g.current="user"}},p),{placeholder:s.argument})),(0,en.jsxs)("div",{style:{display:"flex",height:"47px",alignItems:"center",padding:"0 20px"},children:[(0,en.jsxs)(em.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,en.jsx)(e$.o4,{isFollowUpQuestion:!!s.argument&&s.argument.startsWith("继续提问"),onChange:function(e){f(e),n(e)}}),(void 0===i||i)&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(ek.Z,{sx:{mx:1,height:24},orientation:"vertical"}),(0,en.jsx)(eb.Z,(0,X._)((0,J._)({},(0,eX.mY)(k)),{children:(0,en.jsx)(search_setting,{})}))]}),(0,en.jsx)(en.Fragment,{children:(0,en.jsx)(e1.Z,(0,X._)((0,J._)({sx:{ml:2,px:.5,fontSize:"14px",fontWeight:400,lineHeight:"22px",textAlign:"center",minWidth:0,color:"#98A2B3"},onMouseDown:function(e){e.preventDefault()}},(0,eX.mY)(S)),{children:"清空"}))})]}),(0,en.jsx)(e5,(0,X._)((0,J._)({},(0,eX.mY)(submit)),{sx:{position:"absolute",right:12},disabled:_||!h}))]}),j&&C>=14.9&&(0,en.jsxs)(em.Z,{sx:{px:2.5},children:[(0,en.jsx)(ek.Z,{sx:{my:1.5}}),(0,en.jsx)(eS.Z,{sx:{fontSize:14,color:"#98A2B3",textAlign:"center",my:1.5,lineHeight:1.5},children:"没有广告，直达结果"})]})]})});e2.displayName="SearchConsultInput";var e5=(0,eE.ZP)(function(e){return(0,en.jsx)(eb.Z,(0,X._)((0,J._)({className:eJ()(e.className,"send-arrow-button")},eV()(e,"className")),{children:(0,en.jsx)(eQ.Z,{})}))},{name:"sendArrow"})(_templateObject());function menu05_extends(){return(menu05_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function align_left20_extends(){return(align_left20_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var e3=n(50934);function mind_map_extends(){return(mind_map_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function outline_extends(){return(outline_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var e6=n(59739),e4=n(11607);function table_filter_extends(){return(table_filter_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var table_filter=function(e){return eg.createElement("svg",table_filter_extends({xmlns:"http://www.w3.org/2000/svg",width:19,height:18,fill:"none",viewBox:"0 0 19 18"},e),I||(I=eg.createElement("g",{id:"filter-funnel-02"},eg.createElement("path",{id:"Icon",stroke:"#667085",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.04 4.25c-.568-.634-.851-.95-.862-1.22a.75.75 0 0 1 .272-.608c.208-.172.633-.172 1.484-.172h11.132c.85 0 1.276 0 1.484.172a.75.75 0 0 1 .272.608c-.01.27-.294.586-.862 1.22l-4.28 4.783c-.113.127-.17.19-.21.262a.8.8 0 0 0-.077.204c-.018.08-.018.165-.018.334v4.01c0 .148 0 .22-.024.284a.4.4 0 0 1-.099.147c-.05.045-.118.072-.254.127l-2.55 1.02c-.276.11-.414.165-.524.142a.38.38 0 0 1-.237-.16c-.062-.094-.062-.242-.062-.54v-5.03c0-.17 0-.254-.018-.334a.8.8 0 0 0-.078-.204c-.04-.072-.097-.135-.21-.262z"}))))},e8=n(5411),e7=n(25578);function checked_extends(){return(checked_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var icons_checked=function(e){return eg.createElement("svg",checked_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),R||(R=eg.createElement("path",{stroke:"#1570EF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16.667 5 7.5 14.167 3.334 10"})))},e9=n(70815),te=n(84232),tt=n(11639),tn=n(88525),tr=n(51060),to=n.n(tr),ti=n(63477),ta=n(71100),ts=n(54887),tc=n(18833),tl=n(20595);function star_06_extends(){return(star_06_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var star_06=function(e){return eg.createElement("svg",star_06_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),Z||(Z=eg.createElement("path",{stroke:"url(#paint0_linear_2207_6109)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.5 22v-5m0-10V2M2 4.5h5m-5 15h5M13 3l-1.734 4.509c-.282.733-.423 1.1-.643 1.408a3 3 0 0 1-.706.707c-.308.219-.675.36-1.408.642L4 12l4.509 1.734c.733.282 1.1.423 1.408.643.273.194.512.433.707.706.219.308.36.675.642 1.408L13 21l1.734-4.509c.282-.733.423-1.1.643-1.408.194-.273.433-.512.706-.707.308-.219.675-.36 1.408-.642L22 12l-4.509-1.734c-.733-.282-1.1-.423-1.408-.642a3 3 0 0 1-.706-.707c-.22-.308-.36-.675-.643-1.408z"})),O||(O=eg.createElement("defs",null,eg.createElement("linearGradient",{id:"paint0_linear_2207_6109",x1:9.866,x2:31.003,y1:31.348,y2:14.27,gradientUnits:"userSpaceOnUse"},eg.createElement("stop",{stopColor:"#9358F7"}),eg.createElement("stop",{offset:.26,stopColor:"#7B78F2"}),eg.createElement("stop",{offset:.501,stopColor:"#6197EE"}),eg.createElement("stop",{offset:.767,stopColor:"#45B5E9"}),eg.createElement("stop",{offset:1,stopColor:"#10D7E2"})))))};function star_05_extends(){return(star_05_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var tu=n(26026),td=n(56099),th=n(63294),tf=n(508),tp=n(46849),tg=n(65081),tx=n(19507);function search_menu05_extends(){return(search_menu05_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var search_menu05=function(e){return eg.createElement("svg",search_menu05_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:8,fill:"none",viewBox:"0 0 18 8"},e),N||(N=eg.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.5 1.084h15m-15 5.833h15"})))};function menu01_extends(){return(menu01_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var menu01=function(e){return eg.createElement("svg",menu01_extends({xmlns:"http://www.w3.org/2000/svg",width:18,height:12,fill:"none",viewBox:"0 0 18 12"},e),P||(P=eg.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.5 6h15m-15-5h15m-15 10h15"})))};function start_06_extends(){return(start_06_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var start_06=function(e){return eg.createElement("svg",start_06_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),A||(A=eg.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.75 18.333v-4.167m0-8.333V1.666M1.667 3.749h4.166m-4.166 12.5h4.166m5-13.75L9.388 6.257c-.235.61-.352.916-.535 1.173a2.5 2.5 0 0 1-.589.589c-.257.183-.562.3-1.173.535L3.333 10l3.758 1.445c.61.236.916.353 1.173.536q.344.245.589.588c.183.257.3.563.535 1.174l1.445 3.757 1.446-3.757c.235-.611.352-.917.535-1.174.162-.227.36-.426.588-.588.258-.183.563-.3 1.174-.536L18.333 10l-3.757-1.445c-.611-.235-.917-.352-1.174-.535a2.5 2.5 0 0 1-.588-.589c-.183-.257-.3-.562-.535-1.173z"})))};function globe_01_extends(){return(globe_01_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var globe_01=function(e){return eg.createElement("svg",globe_01_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),H||(H=eg.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.667,d:"M1.667 10h16.666M1.667 10A8.333 8.333 0 0 0 10 18.332M1.667 9.999A8.333 8.333 0 0 1 10 1.666m8.333 8.333A8.333 8.333 0 0 1 10 18.333m8.333-8.334A8.333 8.333 0 0 0 10 1.666m0 0a12.75 12.75 0 0 1 3.333 8.333A12.75 12.75 0 0 1 10 18.333m0-16.667a12.75 12.75 0 0 0-3.333 8.333A12.75 12.75 0 0 0 10 18.333"})))};function graducation_hat_01_extends(){return(graducation_hat_01_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var graducation_hat_01=function(e){return eg.createElement("svg",graducation_hat_01_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",viewBox:"0 0 20 16"},e),D||(D=eg.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.667,d:"M4.167 6.334v5.01c0 .299 0 .448.045.58q.061.177.193.312c.097.1.231.166.499.3l4.5 2.25c.218.11.328.164.442.186q.154.028.308 0c.114-.022.224-.076.442-.186l4.5-2.25c.268-.134.402-.2.5-.3a.8.8 0 0 0 .192-.312c.045-.132.045-.281.045-.58v-5.01M1.667 5.084l8.035-4.017c.11-.055.164-.082.221-.093q.077-.015.154 0c.057.01.112.038.221.093l8.035 4.017-8.035 4.018a1 1 0 0 1-.221.093.4.4 0 0 1-.154 0c-.057-.011-.112-.038-.221-.093z"})))},tm=n(78276),tv=n(54297),t_=n(73328),tb=n(17814),tw=n(81854),tk=n(2085),ty=n(23091),tj=n(73455),tC=n(69575),tS=n(44826),tM=new Map;(F||(F={})).SearchSkeletonDataReadyTime="SearchSkeletonDataReadyTime";var tE=n(63090);(r=B||(B={})).EventTable="eventTable",r.OrganizationTable="organizationTable",r.PeopleTable="peopleTable";var myClearInterval=function(e){try{clearInterval(e)}catch(e){}},tT=(0,eo.E)(),tI=ef()(),tR={简洁:"concise",研究:"research",深入:"detail",concise:"简洁",research:"研究",detail:"深入",standard:"深入"};(o=W||(W={})).ImageSearch="ImageSearch",o.Clawer="Clawer",o.Write="Write";var useSearch=function(e){var t,n,r,o,i,a,s,c,l,u,doGetExtensionReading=function(e){var t;(!eK.login||(null===(t=eK.userInfo)||void 0===t?void 0:t.extensionReadingEnable))&&(eK.login||eK.extensionReadingEnable)&&e&&(0,ea.aB)(e).then(function(e){if(0===e.data.errCode){var t=e.data.data.result;(t=t.sort(function(e,t){return t.analysis.length-e.analysis.length})).length>=1&&(ek(t.slice(0,Math.min(2,t.length))),K(!0))}else(0,eP.yv)("获取延伸阅读失败",{variant:"error"})})},show=function(t,n){if("query"===t.type){eK.login||td.current||(td.current=!0,eQ.addResultCount(e.id)),eo.current=eU?50:33.34,Y.current&&(myClearInterval(Y.current),Y.current=null,et.current=0);var r=t.data;eF.current=r,et.current=0,Y.current=setInterval(function(){"research"===e.mode?updateResearchProgress(r):updateProgressNormal(r)},100),t.id&&(X.current=t.id),t.list&&w(t.list),t.realQuestion&&f(t.realQuestion),j(t.label),M(t.xiezuocat)}else if("set-reference"===t.type)t.resultId&&(e_(t.resultId),e3(!0),eq.current=t.resultId),t.list&&(w(t.list),"detail"===e.mode&&t.list.length>=4&&doGetExtensionReading(t.resultId));else if("update-reference"===t.type){var o,i,a=eU?50:33;eU&&(null===(i=A.current)||void 0===i||i.updateStepTips(2,"深度研究",!0)),ei.current=0,eU?eo.current<88&&(eo.current=88):eo.current<=66.66&&(eo.current=66.66),null===(o=A.current)||void 0===o||o.onProgress({step:Math.ceil(eo.current/a)+1,totalProgress:eo.current,currentStepProgress:ei.current}),t.list&&(w(t.list),t.list.length>=4&&doGetExtensionReading(eq.current)),myClearInterval(Y.current),Y.current=setInterval(function(){var t;eU?ei.current<90?ei.current+=.15:ei.current+=(100-ei.current)/100:eo.current<=96&&(eo.current<90?eo.current+=eo.current>80?t_[e.mode]:.2:eo.current+=((eU?80:96)-eo.current)/100),null===(t=A.current)||void 0===t||t.onProgress({step:Math.ceil(eo.current/a)+1,totalProgress:eo.current,currentStepProgress:ei.current})},50)}else if("append-text"===t.type)v.current=eg.current,eg.current+=t.text,x(eg.current),"research"!==e.mode?eU?eo.current<60&&(eo.current=60):eo.current<=66.66&&(eo.current=66.66):eU&&(eo.current<60&&(eo.current=60,null===(c=A.current)||void 0===c||c.onProgress({step:Math.ceil(eo.current/50)+1,totalProgress:eo.current,currentStepProgress:ei.current})),null===(s=A.current)||void 0===s||s.updateStepTips(1,"初步研究",!1)),eU||null===(l=A.current)||void 0===l||l.updateStepTips(1,e.engineType?"学术搜索":tk.current?"阅读网页":"全网搜索");else if("official-website"===t.type)I(t.officialWebsite);else if("pan-links"===t.type)P(!1),O(t.panLinks);else if("pan-links-init"===t.type)P(!0);else if("error"===t.type){if(myClearInterval(Y.current),myClearInterval(ee.current),myClearInterval(eD.current),t.code&&t.code===es.cO.NOT_FOUND){e.engineType===es.rG.SCHOLAR&&n.scholarSearchDomain!==es.RM.ALL?(onFinished(!0),n.stop(),(0,eP.yv)((0,en.jsx)(em.Z,{sx:{fontSize:"16px",fontFamily:"Noto Sans SC"},children:"[中/英]文库中未找到相关的参考文献，已为您自动切换到不限范围 "}),{variant:"info",autoHideDuration:6e3,style:{alignItems:"start"}}),setTimeout(function(){z(!0),tw(e.mode,void 0,es.RM.ALL),z(!0)},300)):(to(!0),onFinished(!0));return}if(t.code===es.cO.UNKOWN_ERROR?null==n||null===(h=n.error)||void 0===h||h.call(n,t):t.msg&&(0,eP.yv)(t.msg,{variant:"warning",autoHideDuration:3e3}),4001===t.code){var s,c,l,u,d,h,p,g=new URL(location.href);g.searchParams.set("aq",e.question),(0,tu.x3)({showTips:!0,redirectUrl:g.href}),onFinished(!0),null===(p=eI.current)||void 0===p||p.deleteItem(e.index);return}4002===t.code||(eK.login?null===(u=eG.current)||void 0===u||u.reload():eQ.deleteRecord(e.id),eV.current?null===(d=eV.current)||void 0===d||d.back():el.push(es.lM.Home))}},onFinished=function(e){var t,n,r;myClearInterval(ee.current),myClearInterval(eD.current),eD.current=null,eC(0),null===(t=eI.current)||void 0===t||t.updateLoading(!1),null===(n=eI.current)||void 0===n||n.setFinishResult(eg.current),v.current=eg.current,x(eg.current),F(!0),V(!1),Y.current&&(myClearInterval(Y.current),Y.current=null),null===(r=A.current)||void 0===r||r.onProgress({step:4,totalProgress:100,currentStepProgress:100}),setTimeout(function(){z(!1)},e?0:1e3)},d=(0,$._)((0,er.useState)(e.realQuestion||e.question),2),h=d[0],f=d[1],p=(0,$._)((0,er.useState)((null===(t=e.history)||void 0===t?void 0:t.answer)||""),2),g=p[0],x=p[1],m=(0,er.useMemo)(function(){var e,t,n,r,o,i,a=null!==(r=null==g?void 0:null===(e=g.match(/[\u4e00-\u9fa5]/g))||void 0===e?void 0:e.length)&&void 0!==r?r:0,s=null!==(o=null==g?void 0:null===(t=g.match(/\b[a-zA-Z]+\b/g))||void 0===t?void 0:t.length)&&void 0!==o?o:0;return(a+s===0?null!==(i=null==g?void 0:null===(n=g.replace(/[\u3000-\u303F\u4E00-\u9FA5\uFE30-\uFFA0^\w\s]/g,""))||void 0===n?void 0:n.length)&&void 0!==i?i:0:a+s)<=150},[g]),v=(0,er.useRef)((null===(n=e.history)||void 0===n?void 0:n.answer)||""),_=(0,$._)((0,er.useState)((null===(r=e.history)||void 0===r?void 0:r.references)||[]),2),b=_[0],w=_[1],k=(0,$._)((0,er.useState)((null===(o=e.history)||void 0===o?void 0:o.label)||null),2),y=k[0],j=k[1],C=(0,$._)((0,er.useState)((null===(i=e.history)||void 0===i?void 0:i.xiezuocat)||null),2),S=C[0],M=C[1],E=(0,$._)((0,er.useState)((null===(a=e.history)||void 0===a?void 0:a.officialWebsite)||null),2),T=E[0],I=E[1],R=(0,$._)((0,er.useState)((null===(s=e.history)||void 0===s?void 0:s.panLinks)||[]),2),Z=R[0],O=R[1],L=(0,$._)((0,er.useState)(!1),2),N=L[0],P=L[1],A=tT.useBridge("progress",function(){});(0,er.useRef)(0);var H=(0,$._)((0,er.useState)(e.history),2),D=H[0],F=H[1],B=(0,$._)((0,er.useState)(!e.history),2),W=B[0],z=B[1],U=(0,$._)((0,er.useState)(!1),2),q=U[0],V=U[1],G=(0,$._)((0,er.useState)(!1),2),Q=G[0],K=G[1],J=(0,er.useRef)(null),X=(0,er.useRef)((null===(c=e.history)||void 0===c?void 0:c.id)||""),Y=(0,er.useRef)(null),ee=(0,er.useRef)(null),et=(0,er.useRef)(0),eo=(0,er.useRef)(0),ei=(0,er.useRef)(0),el=(0,eL.useRouter)(),eh=(0,$._)((0,er.useState)(e.mode),2),ef=eh[0],ep=eh[1],eg=(0,er.useRef)(""),ex=(0,$._)((0,er.useState)((null===(l=e.history)||void 0===l?void 0:l.resultId)||""),2),ev=ex[0],e_=ex[1],eb=(0,$._)((0,er.useState)([]),2),ew=eb[0],ek=eb[1],ey=(0,$._)((0,er.useState)(0),2),ej=ey[0],eC=ey[1],eS=(0,$._)((0,er.useState)(!1),2),eM=eS[0],eE=eS[1],eT={},eI=tT.useBridge("resultAPI"),eR=(0,er.useRef)(null),eZ=(0,er.useRef)(null),eO=(0,er.useRef)(null),eN=(0,er.useRef)(null),eA=(0,er.useRef)(null),eH=(0,er.useRef)(null),eD=(0,er.useRef)(null),eF=(0,er.useRef)([]),eB=(0,$._)((0,er.useState)(!1),2),eW=eB[0],ez=eB[1],eU=(0,eX.F)(),eq=(0,er.useRef)(""),eV=tT.useBridge("homeAPI"),eG=tT.useBridge("menuAPI"),eQ=(0,ta.a2)(),eK=(0,e9.LM)(),eJ=(0,$._)((0,er.useState)(e.history&&(e.history.debugId||e.history.resultId)),2),e$=eJ[0];eJ[1];var eY=(0,$._)((0,er.useState)(!1),2),e0=eY[0],e1=eY[1],e2=(0,$._)((0,er.useState)(!1),2),e5=e2[0],e3=e2[1],e6=(0,$._)((0,er.useState)(!e.isLast),2),e4=e6[0],e8=e6[1],e7=(0,$._)((0,er.useState)(e.isLast),2),te=e7[0],tt=e7[1],tn=(0,$._)((0,er.useState)((null===(u=e.history)||void 0===u?void 0:u.notFound)||"ImageSearch"===y),2),tr=tn[0],to=tn[1],ti=(0,$._)((0,er.useState)(!e.history),2),ts=ti[0],tl=ti[1],td=(0,er.useRef)(!1),th=(0,$._)((0,er.useState)(!!e.history),2),tf=th[0],tp=th[1];(0,er.useEffect)(function(){!tf&&g.length>0&&tp(!0)},[g,tf]);var tg=(0,er.useMemo)(function(){return b?b.filter(function(e){return!e.danger}):[]},[b]),tx=(0,er.useMemo)(function(){return!!y&&y.indexOf("Clawer")>=0},[y]);(0,er.useEffect)(function(){e4&&tl(!1)},[e4]),(0,er.useEffect)(function(){tt(e.isLast),e.isLast&&!e5&&ev&&(0,ea.nB)(ev).then(function(e){0===e.data.errCode&&e3(e.data.data)})},[e.isLast]);var tm=(0,er.useMemo)(function(){return e.onStatusChange?{resultExist:e5,label:y,noData:tr,isLast:te,collapse:e4}:{}},[e5,y,tr,te,e4]),tv=(0,eX.fl)();(0,er.useEffect)(function(){tv.current&&e.onStatusChange&&e.onStatusChange(tm)},[tm]),(0,er.useEffect)(function(){if("ImageSearch"===y){var e;null===(e=eI.current)||void 0===e||e.center()}},[y]),(0,er.useEffect)(function(){var e;null===(e=eI.current)||void 0===e||e.updateNoData(tr)},[tr]);var t_={concise:eU?.5:1,research:eU?.02:.04,detail:eU?.15:.25},tb=new ed({begin:function(){eT.begin&&eT.begin()},receive:function(e){eT.receive&&eT.receive(e)},down:function(e,t){eT.down&&eT.down()},error:function(e){if(e&&e.code===es.cO.TOO_MANY_REQUESTS){eT.verify&&eT.verify();return}eT.error&&eT.error(e)}});eT.stop=function(){tb.stop()};var post=function(e,t){tb.post(e,t)};(0,er.useEffect)(function(){if(eK.hasHydrated){if(e.history){var t;null===(t=eI.current)||void 0===t||t.updateLoading(!1),"concise"!==e.mode&&b.length>=4&&doGetExtensionReading(ev)}else tw(e.mode);return function(){myClearInterval(Y.current),myClearInterval(ee.current),myClearInterval(eD.current),tb.cancel()}}},[eK.hasHydrated]),eT.begin=function(){eE(!1)},eT.receive=function(t){try{show(t,eT)}catch(n){throw(0,ec.dW)("search-net-work-error",{data:t,error:n?n.stack?n.stack.toString():n.message:"error null"},{sessionId:e.id,question:e.question,searchType:e.searchType,client:(0,tc.Fk)(),source:"receive_handle_error"}),n}},eT.down=function(){try{onFinished(),null==tb||tb.stop()}catch(t){throw(0,ec.dW)("search-net-work-error",t?t.stack?t.stack.toString():t.message:"error null",{sessionId:e.id,question:e.question,searchType:e.searchType,client:(0,tc.Fk)(),source:"down_handle_error"}),t}},eT.error=function(t){if(t&&t.message===eu.CANCEL);else if(t&&t.code===es.cO.SENSITIVE_WORD);else{(0,eP.yv)("网络错误",{variant:"error",autoHideDuration:3e3});var n="";n=t?t.stack?t.stack.toString():t.message?t.message:JSON.stringify(t):"error null",(0,ec.dW)("search-net-work-error",n,{sessionId:e.id,question:e.question,searchType:e.searchType,client:(0,tc.Fk)()}),eq.current&&onFinished()}},eT.verify=function(){if(!(0,ea.RG)()){el.push(es.lM.Home);return}var t=0,n=setInterval(function(){t+=1,"true"===localStorage.getItem("cloudflareVerifySuccess")&&(tw(e.mode),myClearInterval(n)),t>=300&&myClearInterval(n)},1e3)};var tw=(0,er.useCallback)(function(t,n,r){if(r?eT.scholarSearchDomain=r:eT.scholarSearchDomain=e.languageDomain,!eK.login&&!eQ.canSearch()){var o,i,a=new URL(location.href);a.searchParams.set("aq",e.question),(0,tu.x3)({showTips:!0,redirectUrl:a.href}),onFinished(!0),null===(i=eI.current)||void 0===i||i.deleteItem(e.index);return}eC(0);var s=0;ee.current=setInterval(function(){eC(s++)},1e3),null===(o=eI.current)||void 0===o||o.updateLoading(!0),x(""),v.current="",eg.current="",F(!1),q||(V(!0),eo.current=eU?15:0),et.current=0,Y.current=setInterval(function(){var e,t,n=eU?50:33;et.current+=1,et.current<=10?null===(e=A.current)||void 0===e||e.onProgress({step:1,totalProgress:0,currentStepProgress:10*et.current}):(eo.current+=eo.current<n-3?.6:(n-eo.current)/10,null===(t=A.current)||void 0===t||t.onProgress({step:2,totalProgress:eo.current,currentStepProgress:eo.current})),eo.current>=n&&(myClearInterval(Y.current),Y.current=null)},50),z(!0),eg.current="",v.current="";var c={sessionId:e.id,question:e.question,searchType:e.searchType,lang:localStorage.getItem("output-lang")||es.$v.ZH,mode:t,resultId:n};e.engineType===es.rG.SCHOLAR&&(c.scholarSearchDomain=eT.scholarSearchDomain),post("api/searchV2",c),c.isContinueSearch=e.index>0,c.engineType=e.engineType,(0,ec.dW)("search-event",c),(0,ec.oh)("search-event")},[q,e.id,e.question,ef,eK.login,eQ.isHydrated]),updateProgressNormal=function(t){var n,r,o,i=eU?50:33;tk.current?null===(r=A.current)||void 0===r||r.updateStepTips(1,"阅读网页"):(eU||eo.current<66.66&&t.length>0)&&(t.length>0&&!tk.current&&(null===(o=A.current)||void 0===o||o.updateStepTips(1,"#"+(0,ec.IA)(t[Math.floor(et.current/5)%t.length],12))),et.current+=1),null===(n=A.current)||void 0===n||n.onProgress({step:Math.ceil(eo.current/i)+1,totalProgress:eo.current,currentStepProgress:eo.current}),eo.current<=(eU?80:96)&&(eo.current<(eU?75:90)?eo.current+=eo.current>(eU?60:66.66)?t_[e.mode]:2:eo.current+=((eU?80:96)-eo.current)/100)},updateResearchProgress=function(t){var n,r,o,i,a,s=eU?50:33;tk.current?null===(n=A.current)||void 0===n||n.updateStepTips(1,"阅读网页"):(eU&&eo.current<=50||eo.current<43&&t.length>0)&&!eg.current&&(null===(r=A.current)||void 0===r||r.updateStepTips(1,"#"+(0,ec.IA)(t[Math.floor(et.current/5)%t.length],12),eU),et.current+=1),eU&&ei.current<100&&!eg.current?(ei.current+=3,null===(o=A.current)||void 0===o||o.onProgress({step:2,totalProgress:49,currentStepProgress:ei.current})):((eU||eg.current)&&(null===(a=A.current)||void 0===a||a.updateStepTips(1,eU?"初步研究":e.engineType?"学术搜索":tk.current?"阅读网页":"全网搜索",!1)),eo.current<=(eU?80:66)&&(eo.current<(eU?75:60)?eo.current+=eo.current>(eU?60:45)?.5:1.5:eo.current+=((eU?80:66)-eo.current)/100),null===(i=A.current)||void 0===i||i.onProgress({step:Math.ceil(eo.current/s)+1,totalProgress:eo.current,currentStepProgress:eo.current}))},tk=(0,er.useRef)(!1);return(0,er.useEffect)(function(){tk.current=tx},[tx]),{finished:D,setFinished:F,showProgress:W,result:g,setResult:x,isResultLessThan100:m,lastTextRef:v,links:b,setLinks:w,modeSelectRef:J,showExtends:Q,setShowExtends:K,analyzeMode:ef,setAnalyzeMode:ep,idRef:X,doSearch:tw,startLoading:q,resultId:ev,loadingTime:ej,mindMappingLoaded:eM,setMindMappingLoaded:eE,eventTableRef:eR,eventTableFilterRef:eZ,organizationTableRef:eO,organizationTableFilterRef:eN,userTableRef:eA,userTableFilterRef:eH,eventDataNotEmptyAfterLoad:eW,setEventDataNotEmptyAfterLoad:ez,notDangerLinks:tg,extensionReadings:ew,noData:tr,setNoData:to,label:y,xiezuocat:S,officialWebsite:T,panLinks:Z,panLinksInit:N,debugId:e$,isClawerLabel:tx,showAppendBox:e0,setShowAppendBox:e1,collapse:e4,setCollapse:e8,isLast:te,setIsLast:tt,resultExist:e5,showFadeAnimation:ts,realQuestion:h,resultStatus:tm,hasResult:tf}};function SearchNoDataContentView(e){var t=e.question,n=e.sx;return(0,en.jsxs)(em.Z,{color:"#000000",lineHeight:"28px",sx:n,children:[(0,en.jsxs)(em.Z,{fontWeight:"700",fontSize:"20px",children:["未找到有关 ",(0,en.jsx)(em.Z,{component:"span",color:"#D92D20",children:t})," 的结果"]}),(0,en.jsx)(em.Z,{fontWeight:"400",fontSize:"16px",marginTop:"5px",children:"请检查你的拼写或尝试使用其他关键字。"})]})}function QuickAccessLoading(){return(0,er.useEffect)(function(){(0,ec.dW)("metaso-pan-auth-start",{url:location.href,client:(0,tc.Fk)()})},[]),(0,en.jsx)(em.Z,{className:to()["quick-access"],children:(0,en.jsxs)(ev.Z,{direction:"row",className:"".concat(to()["access-type"]," ").concat(to()["quick-access-loading"]),children:[(0,en.jsx)(e_.Z,{size:"1.5em",sx:{color:"gray"},thickness:2}),(0,en.jsx)(em.Z,{sx:{paddingLeft:"20px"},children:"正在搜索网盘资源"})]})})}function CloudIcon(e){var t=e.cloudType,n=e.className;return(0,en.jsxs)(em.Z,{className:n,children:[("baidu"===t||"pansou"===t||"xuebapan"===t)&&(0,en.jsx)(pan_baidu,{}),("aliyundrive"===t||"alipan"===t)&&(0,en.jsx)(pan_ali,{}),"quark"===t&&(0,en.jsx)(pan_quark,{}),"lanzou"===t&&(0,en.jsx)(pan_lanzou,{}),"xunlei"===t&&(0,en.jsx)(pan_xunlei,{}),"123pan"===t&&(0,en.jsx)(pan_123,{})]})}function QuickAccess(e){var t,n=e.type,r=e.name,o=e.url,i=e.iconUrl,a=e.data,s=(0,$._)((0,er.useState)(""),2),c=s[0],l=s[1],u=(0,$._)((0,er.useState)(!1),2),d=u[0],h=u[1],f=(0,$._)((0,er.useState)(!1),2),p=f[0],g=f[1],x=(0,er.useRef)(null),checkIconUrlActive=function(){x.current&&(x.current.onload=function(){g(!0),h(!0)},x.current.onerror=function(){g(!1),h(!0)},setTimeout(function(){h(!0)},500))};(0,er.useEffect)(function(){i&&(g(!1),h(!1),checkIconUrlActive())},[i]),(0,er.useEffect)(function(){"cloud"===n&&(0,ec.dW)("metaso-pan-auth-end",{url:location.href,client:(0,tc.Fk)()})},[]),(0,er.useEffect)(function(){"Website"===n?l(o):"cloud"===n&&(a.extract_code?l("提取码："+a.extract_code):l("无需提取码"))},[n,o,a]);var m=!!(null===(t=(0,tc.ZD)())||void 0===t?void 0:t.isMiniWebView);return(0,en.jsxs)(em.Z,{className:to()["quick-access"],onClick:function(){"Website"===n?m?((0,ec.vQ)(o),(0,tg.pv)()):window.open(o,"_blank"):"cloud"===n&&(m?((0,ec.vQ)(o),(0,tg.pv)()):(a.extract_code&&(0,ec.vQ)(a.extract_code),setTimeout(function(){window.open(o,"_blank")},100)))},children:[(0,en.jsx)(em.Z,{className:to()["access-type"],children:"快捷访问"}),"Website"===n&&(0,en.jsxs)(ev.Z,{direction:"row",className:to()["access-detail"],children:[(0,en.jsx)(em.Z,{className:"".concat(to()["access-icon"]," ").concat(d||p?to()["access-icon-hide"]:"")}),(0,en.jsx)("img",{ref:x,src:i,className:"".concat(to()["access-icon"]," ").concat(d&&p?"":to()["access-icon-hide"])}),(0,en.jsx)(sloganDefault,{className:"".concat(to()["access-icon"]," ").concat(d&&!p?"":to()["access-icon-hide"])}),(0,en.jsx)(em.Z,{className:to()["access-name"],children:r})]}),"cloud"===n&&(0,en.jsxs)(ev.Z,{direction:"row",className:to()["access-detail"],children:[(0,en.jsx)(CloudIcon,{cloudType:a.type,className:to()["access-icon"]}),(0,en.jsx)(em.Z,{className:to()["access-name"],children:r})]}),(0,en.jsx)(em.Z,{className:to()["access-link"],children:c})]})}(i=z||(z={})).WEBSITE="Website",i.CLOUD="cloud";var tZ=new Map,tO=(a=(0,Q._)(function(e){var t;return(0,et.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,ea.XS)(e)];case 1:return t=n.sent(),[2,(0,ec.HU)(t.data.data)]}})}),function(e){return a.apply(this,arguments)}),useSearchPageEffect=function(e){(0,eX.F)();var t,n,r,o,i,a,s,c=(0,$._)((0,er.useState)(!1),2),l=c[0],u=c[1],d=(0,$._)((0,er.useState)(null),2),h=d[0],f=d[1],p=(0,$._)((0,er.useState)(!0),2),g=p[0],x=p[1],m=(t=null==h?void 0:h.id,r=(n=(0,$._)((0,er.useState)(""),2))[0],o=n[1],tT.useBridge("menuAPI"),(0,er.useRef)(""),(0,er.useEffect)(function(){if(t&&g){if(!tZ.has(t)){var e;tZ.set(t,new Promise((e=(0,Q._)(function(e){var n,r,o;return(0,et.Jh)(this,function(i){switch(i.label){case 0:if(!(n=new URLSearchParams(location.search)).has("ssi"))return[3,1];return e((0,ec.HU)(n.get("ssi"))),[3,4];case 1:return i.trys.push([1,3,,4]),[4,tO(t)];case 2:return r=i.sent(),localStorage.setItem("shareLink",r),e(r),[3,4];case 3:return o=i.sent(),(0,eP.yv)("获取分享链接失败:".concat(o.message),{variant:"error"}),e(""),[3,4];case 4:return[2]}})}),function(t){return e.apply(this,arguments)})))}tZ.get(t).then(function(e){return o(e)})}},[t,g]),r),v=tT.useBridge("menuAPI"),_=(0,$._)((0,er.useState)((null===(i=v.current)||void 0===i?void 0:i.isCollapse())||!0),2),b=_[0],w=_[1],k=(0,$._)((0,er.useState)(!0),2),y=k[0],j=k[1],C=(0,ta.a2)(),S=(0,e9.LM)(),M=(0,$._)((0,er.useState)(!1),2),E=M[0],T=M[1],I=(0,er.useRef)(!1),R=(0,er.useRef)(!1),Z=(0,eL.useSearchParams)(),O=tT.useBridge("homeAPI"),L=(0,$._)((0,er.useState)(""),2),N=L[0],P=L[1],A=(0,$._)((0,er.useState)(!1),2),H=A[0],D=A[1],F=(0,$._)((0,er.useState)([]),2),B=F[0],W=F[1],z=(0,eL.useRouter)(),U=(0,$._)((0,er.useState)(new Map),2),q=U[0],V=U[1],G=(0,er.useMemo)(function(){return h&&h.mode?h.mode:"detail"},[h]),_showMind=function(){var e;w(!0),null===(e=v.current)||void 0===e||e.hide()},updateSessionDTO=function(e){if(!S.login&&(null==e?void 0:e.resultCount)&&C.updateResultCount(e.id,e.resultCount),!e){f(e);return}e.mode&&"standard"!==e.mode||(e.mode="detail"),f(e)};tT.useRegister("resultAPI",{hideMind:function(){var e;w(!1),null===(e=v.current)||void 0===e||e.open()},showMind:function(){_showMind()},updateLoading:function(e){j(e)},setFinishResult:function(e){P(e)},updateNoData:function(e){D(e)},appendItem:function(e){var t=(0,ee._)(B);t.push(e),W(t)},deleteItem:function(e){if(e<h.results.length){var t=(0,J._)({},h);t.results.splice(e,1),f(t)}else{var n=(0,ee._)(B);n.splice(e-h.results.length,1),W(n)}},center:function(){T(!0)}},[h,B]),tT.useRegister("exportMarkdownAPI",{updateExportMarkdownTextMap:function(e,t,n){V(function(r){return new Map(r).set(e+t,n)})},getExportMarkdownTextMap:function(e,t){return q.get(e+t)}}),(0,er.useEffect)(function(){var t={question:e.params.question,mode:e.params.mode,searchType:e.params.searchType,engineType:e.params.engineType,groupId:void 0,scholarSearchDomain:localStorage.getItem("scholarSearchDomain")||es.RM.ALL};C.isHydrated&&S.hasHydrated&&tc.MC.isMyInfoLoaded&&!I.current&&(I.current=!0,e.params.id?requestSearchRecord():e.params.path&&e.params.path.length>0?(0,ea.a5)(e.params.question,e.params.path).then(function(e){0===e.data.errCode?(t.question=e.data.data,onSubmit(t)):(0,eP.yv)("获取问题失败",{variant:"error",autoHideDuration:3e3})}).catch(function(e){(0,eP.yv)("获取问题失败",{variant:"error",autoHideDuration:3e3})}):onSubmit(t))},[S,e.version,C.isHydrated,null===(a=v.current)||void 0===a?void 0:a.isLoaded(),tc.MC.isMyInfoLoaded]),(0,er.useEffect)(function(){l&&x(!0),m&&l&&(u(!1),(0,ec.vQ)(m).then(function(e){(0,eP.yv)("分享链接已成功复制到剪贴板",{variant:"success"})}))},[m,l]),(0,er.useEffect)(function(){var e;w((null===(e=v.current)||void 0===e?void 0:e.isCollapse())||!1)},[null===(s=v.current)||void 0===s?void 0:s.isCollapse()]);var K=(0,er.useCallback)(function(){if(O.current){var e;null===(e=O.current)||void 0===e||e.back()}else z.push(es.lM.Home)},[]),requestSearchRecord=function(){var t=new Date;if(e.params.id){var n={id:e.params.id,shareKey:Z.get("shareKey")};(0,ea.VU)(e.params.id,Z.get("shareKey")).then(function(e){if(e.data.errCode===es.cO.TOO_MANY_REQUESTS){var r=0,o=setInterval(function(){r+=1,"true"===localStorage.getItem("cloudflareVerifySuccess")&&(requestSearchRecord(),myClearInterval(o)),r>=300&&myClearInterval(o)},1e3);(0,ec.dW)(ec.Gy.GET_SESSION_TIME_LOG,getSearchRecordOrCreateSessionTimeLogParam(t,n,"get_search_record_too_many_requests",{client:(0,tc.Fk)()}))}else if(e.data.errCode===es.cO.SENSITIVE_WORD)(0,eP.yv)(e.data.errMsg,{variant:"warning",autoHideDuration:3e3}),(0,ec.dW)(ec.Gy.GET_SESSION_TIME_LOG,getSearchRecordOrCreateSessionTimeLogParam(t,n,"get_search_record_reject_by_sensitive_check_",{client:(0,tc.Fk)()})),K();else{var i=e.data.data;if(0===i.results.length)i.results.push({question:i.question,mode:i.mode,uuid:(0,ea.DO)()});else{var a="".concat(i.groupId,"-").concat(i.engineType||"","-").concat(i.languageDomain);(0,ec.Do)("group-session-cache",a,i,10)}updateSessionDTO(i),(0,ec.dW)(ec.Gy.GET_SESSION_TIME_LOG,getSearchRecordOrCreateSessionTimeLogParam(t,n,"get_search_record_success",{client:(0,tc.Fk)()}))}}).catch(function(e){(0,eP.yv)("网络错误",{variant:"warning",autoHideDuration:3e3}),(0,ec.dW)(ec.Gy.GET_SESSION_TIME_LOG,getSearchRecordOrCreateSessionTimeLogParam(t,n,"get_search_record_error",{client:(0,tc.Fk)()})),K()})}},onSubmit=function(e){var t=new Date,n=buildSearchQuery(e.question,e.mode,e.engineType,e.searchType);if(!S.login&&!C.canSearch()){(0,tu.x3)({showTips:!0,redirectUrl:n}),O.current?O.current.back(e.question):z.push(es.lM.Home);return}(0,ea.ed)(e).then(function(n){if(0===n.data.errCode){var r,o,i,a,s,c=n.data.data;c.results=[{question:c.question,mode:c.mode,uuid:(0,ea.DO)()}],updateSessionDTO(c),S.login?null===(s=v.current)||void 0===s||s.add(c):C.appendRecord(c),null===(a=v.current)||void 0===a||a.updateActiveId(c.id),t&&(0,ec.dW)(ec.Gy.CREATE_SESSION_TIME_LOG,getSearchRecordOrCreateSessionTimeLogParam(t,e,"create-session-success")),new URL(location.href).searchParams.has("q")?window.history.replaceState(null,"",(0,ec.gY)(es.lM.Search,{id:c.id})+"?q="+encodeURIComponent(c.question)):window.history.pushState(null,"",(0,ec.gY)(es.lM.Search,{id:c.id})+"?q="+encodeURIComponent(c.question))}else n.data.errCode===es.cO.SENSITIVE_WORD?((0,eP.yv)("本次请求涉及的领域暂不支持",{variant:"warning",autoHideDuration:3e3}),t&&(0,ec.dW)(ec.Gy.CREATE_SESSION_TIME_LOG,getSearchRecordOrCreateSessionTimeLogParam(t,e,"create-session-sensitive")),null===(r=O.current)||void 0===r||r.back()):n.data.errCode===es.cO.USER_CREDIT_RUN_OUT?(S.productType()===es.kv.FREE?(0,eP.yv)("今日".concat("research"===e.mode?"研究模式":"","搜索次数已用尽，升级后可继续使用"),{variant:"info",autoHideDuration:3e3,className:"info-blue"}):(0,eP.yv)("今日".concat("research"===e.mode?"研究模式":"","搜索次数已用尽"),{variant:"info",autoHideDuration:3e3,className:"info-blue"}),t&&(0,ec.dW)(ec.Gy.CREATE_SESSION_TIME_LOG,getSearchRecordOrCreateSessionTimeLogParam(t,e,"create-session-USER_CREDIT_RUN_OUT")),null===(o=O.current)||void 0===o||o.back()):(t&&(0,ec.dW)(ec.Gy.CREATE_SESSION_TIME_LOG,getSearchRecordOrCreateSessionTimeLogParam(t,e,"create-session-error",{res:n.data})),(0,eP.yv)(n.data.errMsg,{variant:"warning",autoHideDuration:3e3}),null===(i=O.current)||void 0===i||i.back())}).catch(function(r){var o,i;r instanceof ea.dp?r.code===es.cO.CREDIT_RUN_OUT&&((0,tu.x3)({showTips:!0,redirectUrl:n}),O.current?null===(o=O.current)||void 0===o||o.back(e.question):z.push(es.lM.Home)):(t&&(0,ec.dW)(ec.Gy.CREATE_SESSION_TIME_LOG,getSearchRecordOrCreateSessionTimeLogParam(t,e,"create-session-error",{error:{message:null==r?void 0:r.message,stack:null==r?void 0:r.stack}})),(0,eP.yv)("网络错误",{variant:"warning",autoHideDuration:3e3}),O.current?null===(i=O.current)||void 0===i||i.back(e.question):z.push(es.lM.Home))})},X=(0,er.useRef)(null),Y=(0,er.useRef)(null),en=(0,$._)((0,er.useTransition)(),2),eo=(en[0],en[1]),ei=(0,er.useCallback)(function(e,t){if(T(!1),h){var n="".concat(h.groupId,"-").concat(e,"-").concat(t),r=(0,ec.DI)("group-session-cache").get(n);if(r){setTimeout(function(){eo(function(){updateSessionDTO(r.item)})},300);return}Y.current=setTimeout(function(){Y.current=null,X.current&&eo(function(){updateSessionDTO(X.current),X.current=null})},300),(0,ea.bI)(h.groupId,e,t).then(function(r){if(r.data.data){var o=r.data.data;0===o.results.length?o.results=[{question:o.question,mode:o.mode,uuid:(0,ea.DO)()}]:(0,ec.Do)("group-session-cache",n,o,10),Y.current?X.current=o:eo(function(){updateSessionDTO(o)})}else onSubmit({question:h.question,mode:h.mode,engineType:e,scholarSearchDomain:t,searchType:"web",groupId:h.groupId})})}},[onSubmit,h,updateSessionDTO]);(0,er.useEffect)(function(){if(h&&!R.current){R.current=!0;var e=new URL(location.href);if(e.searchParams.has("aq")){var t=e.searchParams.get("aq");e.searchParams.delete("aq"),W([{question:t,mode:h.mode,engineType:h.engineType}]),history.replaceState(null,"",e.href)}}},[h]);var el=(0,$._)((0,er.useState)({}),2),eu=el[0],ed=el[1],eh=(0,er.useMemo)(function(){return"ImageSearch"!==eu.label},[eu]);return{isLoading:y,showMind:b,setShowMind:w,setIsLoading:j,sessionDTO:h,shareLink:m,homeRef:O,firstResultStatus:eu,setFirstResultStatus:ed,showModelTip:eh,setNeedCopyShareLink:u,finishResult:N,noData:H,appendSessionResults:B,center:E,searchMode:G,getGroupSessionRecord:ei,onSearchDomainChange:function(e,t){e!==tE.o.Image&&ei(tL[e],t||es.RM.ALL)}}};function getSearchRecordOrCreateSessionTimeLogParam(e,t,n,r){var o,i,a,s;return o=F.SearchSkeletonDataReadyTime,i=new Date,tM.set(o,i),s={param:t,spendTime:a=new Date().getTime()-e.getTime(),desc:n},a>2e3&&Object.assign(s,{"too-slow":!0}),r&&Object.assign(s,r),s}var tL=(U={},(0,K._)(U,tE.o.All,es.rG.DEFAULT),(0,K._)(U,tE.o.Scholar,es.rG.SCHOLAR),U),buildSearchQuery=function(e,t,n,r,o){return(0,ec.lz)(location.origin,{q:e,m:t,st:r,et:n,pt:o})},useSearchEffect=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,eL.useSearchParams)(),r=(0,$._)((0,er.useState)(!1),2),o=r[0],i=r[1],a=n.get("q"),s=n.get("m")||"detail",c=n.get("st"),l=n.get("et");(0,er.useEffect)(function(){if(null===n.get("m")&&localStorage.getItem("defaultMode")){var e=localStorage.getItem("defaultMode");h.current=e,b.current.mode=e}null===n.get("et")&&!l&&localStorage.getItem("defaultEngine")&&(l=localStorage.getItem("defaultEngine"),b.current.engineType=l),i(!0)},[]);var u=n.getAll("pt"),d=(0,eL.useRouter)(),h=(0,er.useRef)(s),f=tT.useBridge("homeAPI"),p=tT.useBridge("menuAPI"),g=[{label:"简洁",value:"concise"},{label:"深入",value:"detail"},{label:(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(star_06,{}),"研究"]}),value:"research"}],x=(0,$._)((0,er.useState)(0),2),m=x[0],v=x[1];(0,er.useRef)(!1);var _=(0,er.useRef)(""),b=(0,er.useRef)(a?{question:a,mode:s,searchType:c,engineType:l,path:u}:{}),w=(0,$._)((0,er.useState)(!!a),2),k=w[0],y=w[1],j=(0,e9.LM)(),C=(0,eL.usePathname)();(0,eX.F)();var S=(0,$._)((0,er.useState)([{title:"中国AI教父李一舟",value:"中国AI教父李一舟"},{title:"特斯拉未来股价走势",value:"特斯拉未来股价走势"},{title:"infj真的稀有吗？",value:"infj真的稀有吗？"},{title:"罗永浩为什么人称龙哥",value:"罗永浩为什么人称龙哥"},{title:"2023年末经济指标分化，如何理解当下的宏观运行？",value:"2023年末经济指标分化，如何理解当下的宏观运行？"},{title:"什么是辩证逻辑？",value:"什么是辩证逻辑？"}]),2),M=S[0],E=S[1],T=(0,$._)((0,er.useState)([]),2),I=T[0],R=T[1],Z=(0,$._)((0,er.useState)(t?20:25),2),O=Z[0],L=Z[1],N=(0,$._)((0,er.useState)(10),2),P=N[0],A=N[1],H=(0,$._)((0,er.useState)(4),2),D=H[0],F=H[1],B=(0,$._)((0,er.useState)(280),2),W=B[0],z=B[1],U=(0,$._)((0,er.useState)(140),2),q=U[0],V=U[1],G=(0,$._)((0,er.useState)(56),2),K=G[0],J=G[1],listener=function(){window.location.pathname===es.lM.Home?y(!1):d.push(location.href)};(0,er.useEffect)(function(){try{if(j.metasoAIConfig){if(t){var e=M;j.metasoAIConfig.appDemos&&(e=JSON.parse(j.metasoAIConfig.appDemos),E(e)),L(j.metasoAIConfig.appDemoMaxWordCount),A(j.metasoAIConfig.urlQuestionAppMaxWordCount1),F(j.metasoAIConfig.urlQuestionAppMaxWordCount2),R(e.slice(0,j.metasoAIConfig.appDemoCount))}else{var n=M;j.metasoAIConfig.pcDemos&&(n=JSON.parse(j.metasoAIConfig.pcDemos),E(n)),L(j.metasoAIConfig.pcDemoMaxWordCount),A(j.metasoAIConfig.urlQuestionPcMaxWordCount1),F(j.metasoAIConfig.urlQuestionPcMaxWordCount2),R(n.slice(0,j.metasoAIConfig.pcDemoCount))}}}catch(e){setExamplesDefault()}},[j.metasoAIConfig]),(0,er.useEffect)(function(){return window.addEventListener("popstate",listener),function(){window.removeEventListener("popstate",listener)}},[]);var setExamplesDefault=function(){t?R(M.slice(0,4)):R(M.slice(0,6))},getHtmlTextMaxWidthByWordCount=function(e){var t=document.createElement("canvas");t.style.display="none",document.body.appendChild(t);var n=t.getContext("2d");if(n){n.font="14px Arial";for(var r="",o=0;o<e;o++)r+="哈";var i=n.measureText(r).width;return i+=n.measureText(".....").width,document.body.removeChild(t),i}};(0,er.useEffect)(function(){z(getHtmlTextMaxWidthByWordCount(O))},[O]),(0,er.useEffect)(function(){V(getHtmlTextMaxWidthByWordCount(P))},[P]),(0,er.useEffect)(function(){J(getHtmlTextMaxWidthByWordCount(D))},[D]);var X=(0,er.useCallback)(function(e,t,n,r,o){if(!t||(null===(i=(0,tc.ZD)())||void 0===i?void 0:i.isMiniWebView))C===es.lM.Home?null===(a=f.current)||void 0===a||a.search({question:e,mode:h.current,autoChange:!0,searchType:n,engineType:r}):d.push(buildSearchQuery(e,h.current,r,n));else{var i,a,s=es.lM.Home+"?q=".concat(encodeURIComponent(e),"&m=").concat(h.current).concat(n?"&st=".concat(n):"","&et=").concat(r||"");(0,Q._)(function(){var e;return(0,et.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=window.open(),[4,new Promise(function(e){return setTimeout(e)})];case 1:return t.sent(),e.location=s,[3,3];case 2:return t.sent(),location.href=s,[3,3];case 3:return[2]}})})()}},[C,m]),Y=(0,er.useCallback)((e=(0,Q._)(function(e){var t,n,r,o,i,a,c,l;return(0,et.Jh)(this,function(u){switch(u.label){case 0:if(n=(t=(0,$._)(e,6))[0],r=t[1],o=t[2],i=t[3],a=t[4],c=t[5],l=buildSearchQuery(n,h.current,r,a,c),"research"!==h.current)return[3,2];return[4,tV()];case 1:if(!u.sent()){if(!j.login)return(0,tg.z$)(null),(0,tu.x3)({showTips:!0,tipsHtml:"登录后，可<b>免费</b>使用<u>研究模式</u>",redirectUrl:l}),h.current=s,[2];if(!i)return(0,eP.yv)("研究模式超过当日上限，请明天再来～",{variant:"info",autoHideDuration:3e3,className:"info-blue"}),[2];h.current="detail",(0,eP.yv)("【研究模式】超过当日上限，已为您切换到【深入模式】继续搜索",{variant:"info",autoHideDuration:3e3,className:"info-blue"})}u.label=2;case 2:return X(n,o,a,r,c),[2]}})}),function(t){return e.apply(this,arguments)}),[X,j.login,s]);return(0,er.useEffect)(function(){if(a){var e;null===(e=p.current)||void 0===e||e.hide()}},[]),{modelRef:h,onsubmit:Y,models:g,examples:I,exampleMaxWidth:W,exampleMaxWidth1:q,exampleMaxWidth2:K,userStore:j,showSearchResult:k,setShowSearchResult:y,inputDataRef:b,router:d,version:m,setVersion:v,menuRef:p,lastQuestionRef:_,loadFinish:o}},tN=["#12B76A","#D92D20","#475467"],tP=["正面","负面","中性"],FilterItem=function(e){var t=e.name,n=e.count,r=e.checked,o=e.onClick;return(0,en.jsxs)(em.Z,{display:"flex",sx:{fontWeight:"400",cursor:"pointer",padding:"5px 10px",fontSize:"16px",lineHeight:"22px","&  .num":{color:"#667085"},"&:hover":{color:"#1570EF","&  .num":{color:"#1570EF"}},"&.active":{color:"#1570EF","&  .num":{color:"#1570EF"}}},flexDirection:"row",justifyContent:"space-between",alignItems:"center",className:r?"active":"",onClick:o,alignContent:"center",children:[(0,en.jsxs)(em.Z,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,en.jsx)("span",{children:t}),(0,en.jsx)("span",{className:"num",style:{fontSize:"14px",fontWeight:"700",marginLeft:"8px",lineHeight:"18px",verticalAlign:"bottom"},children:n})]}),r?(0,en.jsx)(icons_checked,{}):(0,en.jsx)(em.Z,{})]})},FilterGroupTitle=function(e){var t=e.title;return(0,en.jsx)(em.Z,{style:{fontSize:"10px",color:"#98A2B3",lineHeight:"18px",fontWeight:"700",padding:"5px 10px"},children:t})},tA=(0,er.forwardRef)(function(e,t){var n=(0,$._)((0,er.useState)({all:0,emotionType:[],descTag:[]}),2),r=n[0],o=n[1],i=(0,$._)((0,er.useState)({type:"all"}),2),a=i[0],s=i[1],filterClick=function(t,n){var r,o={type:t,by:n};s(o),null===(r=e.tableRef.current)||void 0===r||r.filterBy(o)},calculateStatistic=function(e){var t=new Map,n=new Map,r=0,o=!0,i=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;r+=1,l.hasOwnProperty("emotionType")&&(t.has(l.emotionType)||t.set(l.emotionType,{name:tP[l.emotionType],count:0,filterValue:l.emotionType}),t.get(l.emotionType).count+=1),l.hasOwnProperty("descTag")&&l.descTag.trim().length>0&&(n.has(l.descTag)||n.set(l.descTag,{name:l.descTag,count:0,filterValue:l.descTag}),n.get(l.descTag).count+=1)}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}return{all:r,emotionType:(0,ee._)(t.keys()).sort().map(function(e){return t.get(e)}),descTag:(0,ee._)(n.values())}},c=e.source;(0,er.useImperativeHandle)(t,function(){return{tableDataUpdated:function(e){o(calculateStatistic(e))}}},[o]);var l=(0,er.useCallback)(function(e,t){return"attr"===a.type&&a.by.attrName===e&&a.by.attrVal===t.filterValue},[a]),u=(0,er.useMemo)(function(){return"attr"===a.type?r[a.by.attrName].find(function(e){return e.filterValue===a.by.attrVal}):null},[a,r]),d=document.getElementById(e.portalId||""),h=u&&(0,en.jsx)(tt.Z,{sx:{ml:"10px"},onCloseTag:function(){filterClick("all")},className:"related-event-action-button",tagContent:(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)("span",{style:{fontSize:"14px",fontWeight:"400",lineHeight:"22px"},children:u.name}),(0,en.jsx)("span",{style:{fontSize:"12px",fontWeight:"700",lineHeight:"18px",marginLeft:"4px"},children:u.count})]})});return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)(em.Z,{display:"flex",className:"related-event-table-filter-icon",flexDirection:"row",alignItems:"center",minHeight:"30px",children:[(0,en.jsx)(e8.ZP,{variant:"popover",popupId:"NavigationMenu-popover",children:function(e){return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(eb.Z,(0,X._)((0,J._)({sx:{ml:-1,boxSizing:"border-box",height:30,width:30}},(0,e7.vW)(e)),{children:(0,en.jsx)(table_filter,{style:{flex:"none"}})})),(0,en.jsx)(ew.ZP,(0,X._)((0,J._)({},(0,e7.ZW)(e)),{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},style:{marginTop:"10px",marginLeft:"35px"},children:(0,en.jsxs)(em.Z,{width:"200px",padding:"15px 20px",children:[(0,en.jsx)(em.Z,{children:(0,en.jsx)(FilterItem,{name:"全部",count:r.all,onClick:function(){e.close(),filterClick("all")},checked:"all"===a.type})}),r.emotionType.length>0&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(ek.Z,{sx:{margin:"5px 0 "},light:!0}),(0,en.jsxs)(em.Z,{children:[(0,en.jsx)(FilterGroupTitle,{title:"事件情感"}),r.emotionType.map(function(t){return(0,en.jsx)(FilterItem,{name:t.name,count:t.count,checked:l("emotionType",t),onClick:function(){e.close(),filterClick("attr",{attrName:"emotionType",attrVal:t.filterValue})}},t.filterValue)})]})]}),r.descTag.length>0&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(ek.Z,{sx:{margin:"5px 0 "},light:!0}),(0,en.jsxs)(em.Z,{children:[(0,en.jsx)(FilterGroupTitle,{title:"event"===c?"事件类型":"organization"===c?"组织类型":"人物类型"}),r.descTag.map(function(t){return(0,en.jsx)(FilterItem,{name:t.name,count:t.count,checked:l("descTag",t),onClick:function(){e.close(),filterClick("attr",{attrName:"descTag",attrVal:t.filterValue})}},t.filterValue)})]})]})]})}))]})}}),!d&&h]}),d&&(0,ts.createPortal)(h,d)]})});tA.displayName="RelatedEventTableFilter";var tH=(0,er.forwardRef)(function(e,t){var n=e.resultId,r=e.links,o=e.filterRef,i=e.updateDataIsNotEmptyAfterLoad,a=e.updateCount,s=e.isH5,c=e.submit,l=(0,$._)((0,er.useState)([]),2),u=l[0],d=l[1];(0,er.useImperativeHandle)(t,function(){return{filterBy:function(e){_(e)}}},[]);var h=(0,$._)((0,er.useState)(!1),2),f=h[0],p=h[1],g=(0,er.useMemo)(function(){if(!u||0==u.length)return"";var e="## 相关事件\n\n|事件名称|事件时间|事件概述|类型|\n|---|---|---|---|\n",t=!0,n=!1,r=void 0;try{for(var o,i=u[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;a&&(e+="|".concat((0,ec.P_)(a.name),"|").concat((0,ec.P_)(a.time),"|").concat((0,ec.P_)(a.desc),"|").concat((0,ec.P_)(a.descTag),"|\n"))}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e},[u]),x=tT.useBridge("exportMarkdownAPI");(0,er.useEffect)(function(){var e;null===(e=x.current)||void 0===e||e.updateExportMarkdownTextMap("eventTable",n,g)},[g]);var m=(0,$._)((0,er.useState)({type:"all"}),2),v=m[0],_=m[1],b=(0,$._)((0,er.useState)([]),2),w=b[0],k=b[1];(0,er.useEffect)(function(){"all"===v.type?k(u):"attr"===v.type&&k(u.filter(function(e){return e[v.by.attrName]===v.by.attrVal}))},[u,v]),(0,er.useEffect)(function(){var e;null==o||null===(e=o.current)||void 0===e||e.tableDataUpdated(u),null==a||a(u.length)},[u]),(0,er.useEffect)(function(){n&&(null==i||i(!1),p(!0),(0,ea.rn)(n).then(function(e){var t=e.data.data,n=[],o=!0,a=!1,s=void 0;try{for(var c,l=t[Symbol.iterator]();!(o=(c=l.next()).done);o=!0)!function(){var e=c.value,t=e["情感分析"],o=2;t.indexOf("正面")>=0?o=0:t.indexOf("负面")>=0&&(o=1);var i=e["来源"],a=[],s=!1;if(i){var l=i.match(/\[(\d+)]/g);a=l?l.map(function(e){var t=Number(e.substring(1,e.length-1));return t>0&&t<=r.length&&r[t-1].danger&&(s=!0),Object.assign({num:t},r[t-1])}):[]}if(!s){var u={name:e["事件名称"],desc:e["概括"],time:e["时间"],descTag:e["事件类型"],emotionType:o,referenceNum:a};n.push(u)}}()}catch(e){a=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}d(n),null==i||i(n.length>0)}).finally(function(){p(!1)}))},[n]);var onEventNameClicked=function(e){null==c||c(e)};return f?(0,en.jsx)(e_.Z,{size:"1.5em",sx:{color:"gray"},thickness:2}):(0,en.jsx)(eH.ZP,{containerSx:{boxShadow:"none"},sx:{color:"black",borderRadius:"1px",border:"2px solid #EAECF0","& th,td":{borderRight:"1px solid #EAECF0",borderBottom:"1px solid #EAECF0",fontSize:s?"12px":"14px"}},style:{minWidth:s?"300px":"650px"},head:(0,en.jsxs)(eD.Z,{sx:{"& th":{fontWeight:"700",fontSize:"16px",lineHeight:"24px",position:"relative",zIndex:0}},children:[s&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(eF.Z,{width:"40",children:"事件名称"}),(0,en.jsx)(eF.Z,{width:"60",children:"事件概述"})]}),!s&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(eF.Z,{width:"170px",children:"事件名称"}),(0,en.jsx)(eF.Z,{width:"135px",children:"事件时间"}),(0,en.jsx)(eF.Z,{children:"事件概述"})]})]}),body:(0,en.jsx)(en.Fragment,{children:w.map(function(t,n){return(0,en.jsxs)(eD.Z,{children:[(0,en.jsx)(eF.Z,{children:(0,en.jsxs)(em.Z,{className:"".concat(s?"":to()["pc-event-box"]),sx:{lineHeight:"22px"},children:[(0,en.jsxs)(em.Z,{className:"".concat(s?to()["h5-event-time-box"]:""),children:[!s&&(0,en.jsx)(eB.Z,{style:{color:tN[t.emotionType],minWidth:8,minHeight:8}}),s&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(eB.Z,{style:{color:tN[t.emotionType],minWidth:8,minHeight:8}}),(0,en.jsx)(em.Z,{className:"".concat(s?to()["h5-event-time"]:""),children:t.time})]})]}),(0,en.jsxs)(em.Z,{className:"".concat(s?to()["h5-event-name"]:""),children:[(0,en.jsx)("span",{style:{cursor:"pointer"},onClick:function(){onEventNameClicked(t.name)},children:t.name}),t.referenceNum.map(function(t,n){return(0,en.jsx)(eA.LG,{isH5:e.isH5,num:t.num,link:t},n)})]})]})}),!s&&(0,en.jsx)(eF.Z,{children:(0,en.jsx)(NoReferenceText,{text:t.time})}),(0,en.jsxs)(eF.Z,{children:[t.descTag&&(0,en.jsx)(Tag,{sx:{marginRight:"5px"},children:t.descTag}),(0,en.jsx)("span",{children:(0,en.jsx)(NoReferenceText,{text:t.desc})})]})]},n)})})})});function NoReferenceText(e){var t=e.text.replace(/\[(\[\d+])+]/g,"");return(0,en.jsx)(en.Fragment,{children:t})}function useOrganizationAndPeople(e){var t=e.resultId,n=e.links,r=e.setOrgCount,o=e.setPeopleCount,i=(0,$._)((0,er.useState)([]),2),a=i[0],s=i[1],c=(0,$._)((0,er.useState)([]),2),l=c[0],u=c[1];return(0,er.useEffect)(function(){r(a.length)},[a]),(0,er.useEffect)(function(){o(l.length)},[l]),(0,er.useEffect)(function(){t&&(0,ea.fR)(t).then(function(e){var t=e.data.data.orgnization,r=e.data.data.people,o=[],i=[],a=!0,c=!1,l=void 0;try{for(var d,h=t[Symbol.iterator]();!(a=(d=h.next()).done);a=!0)!function(){var e=d.value,t=e["来源"],r=[],i=!1;if(t){var a=t.match(/\[(\d+)]/g);r=a?a.map(function(e){var t=Number(e.substring(1,e.length-1));return t>0&&t<=n.length&&n[t-1].danger&&(i=!0),Object.assign({num:t},n[t-1])}):[]}i||o.push({name:e["机构名称"],desc:e["描述"],descTag:e["类型"],referenceNum:r}),s(o)}()}catch(e){c=!0,l=e}finally{try{a||null==h.return||h.return()}finally{if(c)throw l}}var f=!0,p=!1,g=void 0;try{for(var x,m=r[Symbol.iterator]();!(f=(x=m.next()).done);f=!0)!function(){var e=x.value,t=e["来源"],r=[],o=!1;t&&(r=t.match(/\[(\d+)]/g).map(function(e){var t=Number(e.substring(1,e.length-1));return t>0&&t<=n.length&&n[t-1].danger&&(o=!0),Object.assign({num:t},n[t-1])})),o||i.push({name:e["人名"],desc:e["描述"],descTag:e["类型"],referenceNum:r}),u(i)}()}catch(e){p=!0,g=e}finally{try{f||null==m.return||m.return()}finally{if(p)throw g}}})},[t]),{organizationTableData:a,userTableData:l}}tH.displayName="RelatedEventTable";var tD=(0,er.forwardRef)(function(e,t){var n=e.resultId,r=(e.links,e.filterRef),o=e.tableData,i=e.isH5,a=e.submit,s=(0,$._)((0,er.useState)(!1),2),c=s[0];s[1];var l=(0,$._)((0,er.useState)({type:"all"}),2),u=l[0],d=l[1],h=(0,$._)((0,er.useState)([]),2),f=h[0],p=h[1];(0,er.useImperativeHandle)(t,function(){return{filterBy:function(e){d(e)}}},[]),(0,er.useEffect)(function(){var e;null==r||null===(e=r.current)||void 0===e||e.tableDataUpdated(o)},[o]),(0,er.useEffect)(function(){var e;null==r||null===(e=r.current)||void 0===e||e.tableDataUpdated(o)},[o]);var g=(0,er.useMemo)(function(){if(!o||0==o.length)return"";var e="## 相关组织\n\n|组织名称|概述|类型|\n|---|---|---|\n",t=!0,n=!1,r=void 0;try{for(var i,a=o[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s&&(e+="|".concat((0,ec.P_)(s.name),"|").concat((0,ec.P_)(s.desc),"|").concat((0,ec.P_)(s.descTag),"|\n"))}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e},[o]),x=tT.useBridge("exportMarkdownAPI");(0,er.useEffect)(function(){var e;null===(e=x.current)||void 0===e||e.updateExportMarkdownTextMap("organizationTable",n,g)},[g]),(0,er.useEffect)(function(){"all"===u.type?p(o):"attr"===u.type&&p(o.filter(function(e){return e[u.by.attrName]===u.by.attrVal}))},[u,o]);var onEventNameClicked=function(e){null==a||a(e)};return c?(0,en.jsx)(e_.Z,{size:"1.5em",sx:{color:"gray"},thickness:2}):(0,en.jsx)(eH.ZP,{containerSx:{boxShadow:"none"},sx:{color:"black",borderRadius:"1px",border:"2px solid #EAECF0","& th,td":{borderRight:"1px solid #EAECF0",borderBottom:"1px solid #EAECF0",fontSize:i?"12px":"14px"}},style:{minWidth:i?"300px":"650px"},head:(0,en.jsxs)(eD.Z,{sx:{"& th":{fontWeight:"700",fontSize:"16px",lineHeight:"24px",position:"relative",zIndex:0}},children:[(0,en.jsx)(eF.Z,{width:"40",children:"组织名称"}),(0,en.jsx)(eF.Z,{width:"60",children:"概述"})]}),body:(0,en.jsx)(en.Fragment,{children:f.map(function(t,n){return(0,en.jsxs)(eD.Z,{children:[(0,en.jsx)(eF.Z,{children:(0,en.jsx)(em.Z,{display:"flex",flexDirection:"row",gap:"10px",sx:{lineHeight:"22px"},children:(0,en.jsxs)(em.Z,{children:[(0,en.jsx)("span",{style:{cursor:"pointer"},onClick:function(){onEventNameClicked(t.name)},children:t.name}),t.referenceNum.map(function(t,n){return(0,en.jsx)(eA.LG,{isH5:e.isH5,num:t.num,link:t},n)})]})})}),(0,en.jsxs)(eF.Z,{children:[t.descTag&&(0,en.jsx)(Tag,{sx:{marginRight:"5px"},children:t.descTag}),(0,en.jsx)("span",{children:t.desc})]})]},n)})})})}),tF=(0,er.forwardRef)(function(e,t){var n=e.resultId,r=(e.links,e.filterRef),o=e.tableData,i=e.isH5,a=e.submit,s=(0,$._)((0,er.useState)(!1),2),c=s[0];s[1];var l=(0,$._)((0,er.useState)({type:"all"}),2),u=l[0],d=l[1],h=(0,$._)((0,er.useState)([]),2),f=h[0],p=h[1];(0,er.useImperativeHandle)(t,function(){return{filterBy:function(e){d(e)}}},[]),(0,er.useEffect)(function(){var e;null==r||null===(e=r.current)||void 0===e||e.tableDataUpdated(o)},[o]);var g=(0,er.useMemo)(function(){if(!o||0==o.length)return"";var e="## 相关人物\n\n|人物名称|概述|类型|\n|---|---|---|\n",t=!0,n=!1,r=void 0;try{for(var i,a=o[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s&&(e+="|".concat((0,ec.P_)(s.name),"|").concat((0,ec.P_)(s.desc),"|").concat((0,ec.P_)(s.descTag),"|\n"))}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e},[o]),x=tT.useBridge("exportMarkdownAPI");(0,er.useEffect)(function(){var e;null===(e=x.current)||void 0===e||e.updateExportMarkdownTextMap("peopleTable",n,g)},[g]),(0,er.useEffect)(function(){"all"===u.type?p(o):"attr"===u.type&&p(o.filter(function(e){return e[u.by.attrName]===u.by.attrVal}))},[u,o]);var onEventNameClicked=function(e){null==a||a(e)};return c?(0,en.jsx)(e_.Z,{size:"1.5em",sx:{color:"gray"},thickness:2}):(0,en.jsx)(eH.ZP,{containerSx:{boxShadow:"none"},sx:{color:"black",borderRadius:"1px",border:"2px solid #EAECF0","& th,td":{borderRight:"1px solid #EAECF0",borderBottom:"1px solid #EAECF0",fontSize:i?"12px":"14px"}},style:{minWidth:i?"300px":"650px"},head:(0,en.jsxs)(eD.Z,{sx:{"& th":{fontWeight:"700",fontSize:"16px",lineHeight:"24px",position:"relative",zIndex:0}},children:[(0,en.jsx)(eF.Z,{width:"40",children:"人物名称"}),(0,en.jsx)(eF.Z,{width:"60",children:"概述"})]}),body:(0,en.jsx)(en.Fragment,{children:f.map(function(e,t){return(0,en.jsxs)(eD.Z,{children:[(0,en.jsx)(eF.Z,{children:(0,en.jsx)(em.Z,{display:"flex",flexDirection:"row",gap:"10px",sx:{lineHeight:"22px"},children:(0,en.jsxs)(em.Z,{children:[(0,en.jsx)("span",{style:{cursor:"pointer"},onClick:function(){onEventNameClicked(e.name)},children:e.name}),e.referenceNum.map(function(e,t){return(0,en.jsx)(eA.LG,{isH5:i,num:e.num,link:e},t)})]})})}),(0,en.jsxs)(eF.Z,{children:[e.descTag&&(0,en.jsx)(Tag,{sx:{marginRight:"5px"},children:e.descTag}),(0,en.jsx)("span",{children:e.desc})]})]},t)})})})});function Tag(e){var t=e.children,n=e.sx,r=e.onClick;return(0,en.jsx)(em.Z,{component:"span",sx:n,className:to().eventDesTag,onClick:r,children:t})}(s=q||(q={})).MindMappingChart="MindMappingChart",s.MindMappingOutline="MindMappingOutline";var tB=[{id:0,label:"简洁",checked:!1,value:"concise",icon:(0,en.jsx)(function(e){return eg.createElement("svg",menu05_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),S||(S=eg.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.5 7.083h15m-15 5.834h15"})))},{})},{id:1,label:"深入",checked:!0,value:"detail",icon:(0,en.jsx)(function(e){return eg.createElement("svg",align_left20_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),M||(M=eg.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.333 8.333H2.5M16.667 5H2.5m14.167 6.667H2.5M13.333 15H2.5"})))},{})},{id:2,label:"研究",checked:!1,value:"research",icon:(0,en.jsx)(function(e){return eg.createElement("svg",star_05_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),L||(L=eg.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.75 18.333v-4.166m0-8.334V1.667M1.667 3.75h4.166m-4.166 12.5h4.166m5-13.75L9.388 6.257c-.235.611-.352.917-.535 1.174a2.5 2.5 0 0 1-.589.589c-.257.182-.562.3-1.173.535L3.333 10l3.758 1.445c.61.235.916.353 1.173.535q.344.245.589.59c.183.256.3.562.535 1.173l1.445 3.757 1.445-3.757c.236-.611.353-.917.536-1.174a2.5 2.5 0 0 1 .588-.589c.257-.182.563-.3 1.174-.535L18.333 10l-3.757-1.445c-.611-.235-.917-.353-1.174-.535a2.5 2.5 0 0 1-.588-.59c-.183-.256-.3-.562-.536-1.173z"})))},{})}],tW=new Set;tB.forEach(function(e){return tW.add(e.value)});var getProcessedAnalyzeModes=function(e){return e&&tW.has(e)?tB.map(function(t){var n=(0,J._)({},t);return n.checked=t.value===e,n}):(tW.has(e)||(0,ec.dW)(ec.Gy.SEARCH_MODE_ERROR,1,{mode:e}),Array.from(tB))},getActiveModeValue=function(e){var t=e.find(function(e){return e.checked});return t?t.value:"detail"};function SearchBox(e){var t=(0,$._)((0,er.useState)(getProcessedAnalyzeModes(e.mode)),2),n=t[0],r=t[1],o=(0,$._)((0,er.useState)(getProcessedAnalyzeModes(e.mode)),2),i=o[0],a=o[1],s=(0,$._)((0,er.useState)(!1),2),c=s[0],l=s[1],u=(0,$._)((0,er.useState)(!1),2),d=u[0],h=u[1],f=(0,$._)((0,er.useState)(e.title||""),2),p=f[0],g=f[1],x=(0,er.useRef)(null),m=(0,er.useRef)(null),v=e.engineType||es.rG.DEFAULT,_=(0,$._)((0,er.useState)((0,es.CU)(v)),2),b=_[0],w=_[1],k=(0,$._)((0,er.useState)(null),2);k[0],k[1];var y=(0,er.useRef)(!1),j=(0,er.useCallback)(function(){e.onSubmit(p,getActiveModeValue(n),b.value)},[p,e.onSubmit,n,b]);(0,er.useEffect)(function(){localStorage.setItem("defaultEngine",b.value)},[b]),tT.useRegister("searchBox",{show:function(e){e&&g(e),h(!0)},setActiveRange:w,setTitleIfNotPolluted:function(e){return!E.current&&(g(e),!0)},hide:function(){h(!1)},isFocused:function(){return c}}),(0,er.useEffect)(function(){p||y.current||!e.title||(y.current=!0,g(e.title))},[e.title,p,c]);var updateRangeAndModes=function(){if(r(getProcessedAnalyzeModes(e.mode)),a(getProcessedAnalyzeModes(e.mode)),"detail"!==e.mode){var t;null===(t=m.current)||void 0===t||t.onChange(e.mode)}w((0,es.CU)(v))};(0,er.useEffect)(function(){updateRangeAndModes()},[e.mode,v]);var C=(0,er.useRef)(null),S=(0,eX.I1)(j,e.isH5),M=tI.useAPI("searchInputDrawer");tI.useAPI("root");var E=(0,er.useRef)(!1),T=(0,er.useRef)(null),onItemClick=function(e){(0,ec.oh)("change-search-strength"),n.forEach(function(t){t.id===e.id?(localStorage.setItem("defaultMode",t.value),t.checked=!0):t.checked=!1}),r((0,ee._)(n))},onTopNodeItemClick=function(e){var t;a((0,ee._)(i).map(function(t){var n,r=(0,J._)({},t);return t.id===e.id?r.checked=!0:r.checked=!1,null===(n=m.current)||void 0===n||n.onChange(e.value),r})),"detail"!==e.value&&(null===(t=m.current)||void 0===t||t.onChange(e.value))},I=getActiveModeValue(n);return b.value===es.rG.SCHOLAR&&e.isH5,(0,er.useRef)(!1),(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)(em.Z,{component:"form",onSubmit:function(e){return e.preventDefault()},sx:e.sx,className:eJ()([to()["search-box"],e.isH5?to()["search-box-h5"]:to()["search-box-desktop"],e.className],(0,K._)({},to().active,d)),children:[e.isH5?(0,en.jsx)(eb.Z,{sx:{fontSize:"16px",p:1,my:-1},onClick:function(){var e;return null===(e=m.current)||void 0===e?void 0:e.toggle(!0)},children:(0,en.jsx)(search_setting,{})}):(0,en.jsx)(eN.Z,{_ref:x,placement:"bottom-start",sxs:{popover:{contentWrapper:{borderRadius:"1px"},position:{left:"-10px !important"}},actionButton:{padding:e.isH5?"0 10px":"0 5px",borderRadius:0,marginRight:e.isH5?0:"10px"}},actionButtonProps:{noArrow:!0},label:(0,en.jsx)(tn.K,{sx:{fontSize:"16px"},children:(0,en.jsx)(search_setting,{})}),children:(0,en.jsxs)(em.Z,{onMouseEnter:function(){clearTimeout(T.current)},onMouseLeave:function(){clearTimeout(T.current),T.current=setTimeout(function(){var e;null===(e=x.current)||void 0===e||e.setOpen(!1)},500)},children:[(0,en.jsx)(em.Z,{className:to()["list-title"],children:"搜索强度"}),(0,en.jsx)(ey.Z,{color:"primary",className:to()["mode-item-container"],sx:{padding:"0px",margin:"5px 20px"},children:n.map(function(e,t){return(0,en.jsx)(ej.Z,{onClick:function(){onItemClick(e)},className:eJ()(to()["mode-item"],(0,K._)({},to().active,e.checked)),children:e.label},t)})}),(0,en.jsx)(tx.SearchSetting,{showSearchRange:!1,engineType:b.value,isH5:e.isH5,onChange:w})]})}),!e.isH5&&(0,en.jsx)(ek.Z,{orientation:"vertical",sx:{height:"20px",marginRight:"10px"}}),(0,er.createElement)(eC.ZP,(0,X._)((0,J._)({},eV()(S,"onKeyDown")),{onKeyDown:function(e){var t;null===(t=S.onKeyDown)||void 0===t||t.call(S,e),E.current=!0},sx:{flex:1,fontSize:e.isH5?14:16,fontFamily:"Noto Sans SC"},id:"search-result-input",onClick:function(){if(e.isH5){var t;null===(t=M.current)||void 0===t||t.show(p,getActiveModeValue(n))}},value:p,placeholder:"点击输入想了解的问题",key:"search-box-base-input",className:"search-box-base-input",onFocus:function(t){var n;null===(n=e.onFocus)||void 0===n||n.call(e,t),l(!0)},ref:C,onBlur:function(t){var n;null===(n=e.onBlur)||void 0===n||n.call(e,t),l(!1)},onChange:function(e){g(e.target.value.length>1e3?e.target.value.substring(0,1e3):e.target.value)}})),(0,en.jsx)(ev.Z,{className:"search-box-ops",sx:{height:1},direction:"row",alignItems:"center",onClick:function(e){return e.preventDefault()},children:e.isH5?(0,en.jsx)(en.Fragment,{children:(0,en.jsx)(tn.K,{sx:{height:1,"&>.MuiIconButton-root":{boxSizing:"content-box"}},children:(0,en.jsx)(e$.o4,{onChange:function(t){g(t),e.onSubmit(t,getActiveModeValue(n),b.value)}})})}):(0,en.jsxs)(en.Fragment,{children:[!!p&&(0,en.jsx)(eb.Z,{onMouseDown:function(e){return e.preventDefault()},onClick:function(){g("");var e,t=null===(e=C.current)||void 0===e?void 0:e.querySelector(":scope input");null==t||t.focus()},children:(0,en.jsx)(e3.Z,{})}),(0,en.jsx)(ez.DV,{sx:{m:-.5,p:.5,width:32,height:32},onClick:j,disabled:!p.trim()})]})})]}),e.isH5&&(0,en.jsx)(tz,{onSearchConsultInputSubmit:function(t){e.onSubmit(t,I,b.value)},onEngineTipClose:function(){return w((0,es.CU)(es.rG.DEFAULT))},activeRange:b}),e.isH5&&(0,en.jsx)(tx.SearchSettingNInputDrawer_singleton,{onRestore:function(e){a(getProcessedAnalyzeModes(e?"detail":I))},isH5:e.isH5,engineType:b.value,topNode:(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(eS.Z,{className:to().title,children:"搜索强度"}),(0,en.jsx)(t_.M,{children:i.map(function(e,t){return(0,en.jsx)(ej.Z,{onClick:function(){return onTopNodeItemClick(e)},className:eJ()(to()["item-button"],e.checked?to()["active-item-button"]:""),children:e.label},t)})})]}),ref:m,onConfirm:function(){var e=!0,t=!1,n=void 0;try{for(var o,a=i[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=o.value;if(s.checked){localStorage.setItem("defaultMode",s.value);break}}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}r((0,ee._)(i))},onChange:function(e){w(e)}})]})}var tz=(0,er.forwardRef)(function(e,t){var n=e.onSearchConsultInputSubmit,r=(0,er.useRef)(null),o=(0,$._)((0,er.useState)(null),2),i=o[0],a=o[1],s=(0,$._)((0,er.useState)(null),2),c=s[0],l=s[1],u=(0,er.useRef)(null),d=(0,$._)((0,er.useState)(null),2),h=(d[0],d[1]),f=(0,er.useCallback)(function(){(0,ec.Kn)(function(){setTimeout(function(){var e=r.current.argumentRef.current.textareaRef.current;e.focus(),e.scrollTop=e.scrollHeight},0)},[],3)},[]);tI.useRegister("searchInputDrawer",function(){return{show:function(e,t,n,o){h(o||null),x(!0),setTimeout(function(){var t;null===(t=r.current)||void 0===t||t.setText(e||""),f()},0),n&&l(function(){return n})},edit:function(e,t){x(!0),setTimeout(function(){var n;null===(n=r.current)||void 0===n||n.setText(e),u.current=t,f()},0)},hide:function(){x(!1)},setTuneData:a,searchConsultInput:r}},[f]);var p=(0,$._)((0,er.useState)(!1),2),g=p[0],x=p[1];(0,er.useEffect)(function(){g||l(null),u.current&&(u.current=null)},[g]);var m=tI.useAPI("searchSettingDrawer");return(0,en.jsx)(eM.ZP,{open:g,disableAutoFocus:!0,disableRestoreFocus:!0,transitionDuration:0,onClose:function(){var e;x(!1),null==i||null===(e=i.onClose)||void 0===e||e.call(i)},sx:{".MuiPaper-root":{borderRadius:"10px 10px 0 0",pb:"env(safe-area-inset-bottom)"}},keepMounted:!0,anchor:"bottom",children:(0,en.jsx)(e2,{ref:r,isH5:!0,sx:{"& .textarea-root":{px:"20px"}},showSettingButton:null==i?void 0:i.showSettingButton,onSettingClicked:function(){var recoverDrawer=function(){e.toggle(!1),setTimeout(function(){x(!0),setTimeout(function(){var e,t,n;null===(n=r.current)||void 0===n||null===(t=n.argumentRef.current)||void 0===t||null===(e=t.textareaRef.current)||void 0===e||e.focus()})})};x(!1);var e=m.current;null==e||e.setTuneData({onBack:function(){recoverDrawer()},onConfirm:function(){recoverDrawer()},onClose:function(){e.setTuneData(null)}})},autoFocus:!1,placeholders:{argument:(null==i?void 0:i.placeholder)||"点击输入想了解的问题"},onSubmit:function(e){if(null==i?void 0:i.onSubmit){i.onSubmit(e),x(!1);return}u.current?(u.current(e),x(!1)):(n(e),x(!1),c&&(c(e),l(null)))},hideIcon:!0})})}),tU=(V={},(0,K._)(V,"MindMappingOutline",{showOnActive:!1,title:"大纲",caseMapMode:eW.SF&&eW.SF.Outline,icon:(0,en.jsx)(function(e){return eg.createElement("svg",outline_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20"},e),T||(T=eg.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.5 10h-10m10-5h-10m10 10h-10m-3.333-5A.833.833 0 1 1 2.5 10a.833.833 0 0 1 1.667 0m0-5A.833.833 0 1 1 2.5 5a.833.833 0 0 1 1.667 0m0 10A.833.833 0 1 1 2.5 15a.833.833 0 0 1 1.667 0"})))},{})}),(0,K._)(V,"MindMappingChart",{showOnActive:!0,title:"脑图",caseMapMode:eW.SF&&eW.SF.Chart,icon:(0,en.jsx)(function(e){return eg.createElement("svg",mind_map_extends({xmlns:"http://www.w3.org/2000/svg",width:21,height:20,fill:"none",viewBox:"0 0 21 20"},e),E||(E=eg.createElement("g",{id:"git-branch-01"},eg.createElement("path",{id:"Icon",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 2.5V11c0 1.4 0 2.1.272 2.635a2.5 2.5 0 0 0 1.093 1.092C4.9 15 5.6 15 7 15h6m0 0a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0M3 6.667h10m0 0a2.5 2.5 0 1 0 5 0 2.5 2.5 0 0 0-5 0"}))))},{})}),V),tq={tabName:"MindMappingOutline"};function useMindTabName(e){var t=(0,$._)((0,eX.U8)(e,localStorage.getItem("rightToolTabDefaultTab")||tq.tabName,{isControlled:!1}),2);return[t[0],t[1]]}function useMindMapping(e){var t=e.resultId,n=e.links,r=e.onLoad,o=e.queryString,i=(0,$._)((0,er.useState)(!0),2),a=i[0],s=i[1],c=(0,er.useRef)(null),l=(0,$._)(useMindTabName(e.tabName),2),u=l[0],d=l[1],h=(0,er.useMemo)(function(){return tU[u].caseMapMode},[u]),f=(0,eX.a8)(),p=(0,er.useMemo)(function(){return localStorage.setItem("rightToolTabDefaultTab",u),tU[u].title},[u]);(0,er.useEffect)(function(){var t;f&&(null===(t=e.onTabChanged)||void 0===t||t.call(e,u))},[u]);var g=(0,$._)((0,er.useState)(!1),2),x=g[0],m=g[1];return(0,er.useEffect)(function(){t&&(s(!0),c.current.loadData().then(function(e){m(!e)}).catch(function(e){var n=h===eW.SF.Chart?"抽取思维导图数据失败":"抽取大纲数据失败";(0,eP.yv)(n,{variant:"error",autoHideDuration:5e3}),(0,ec.dW)(ec.Gy.MIND_MAPPING_LOAD_DATA_ERROR,{param:{resultId:t},client:(0,tc.Fk)(),error:e?e.stack?e.stack.toString():e.message:"error null"})}).finally(function(){s(!1),null==r||r()}))},[t]),{resultId:t,queryString:o,links:n,loading:a,caseMindMappingRef:c,currentTabName:u,setCurrentTabName:d,CaseMindMappingMode:h,tabTitle:p,noMindMappingResult:x}}var MindMappingBox=function(e){var t=useMindMapping(e),n=t.resultId,r=t.queryString,o=t.links,i=t.loading,a=t.caseMindMappingRef,s=t.currentTabName,c=t.setCurrentTabName,l=t.CaseMindMappingMode,u=t.tabTitle,d=t.noMindMappingResult,h=tT.useBridge("resultAPI");return(0,en.jsx)(e6.K,{show:!d,sx:e.sx,children:(0,en.jsxs)(em.Z,{children:[!e.isH5&&(0,en.jsxs)(em.Z,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",sx:{p:"14px 15px",borderBottom:"2px solid #F2F4F7"},children:[(0,en.jsxs)(em.Z,{display:"flex",flexDirection:"row",sx:{flex:1},children:[(0,en.jsx)(em.Z,{className:eJ()(to().rightToolTabTitle,to().centerBox),children:u}),(0,en.jsxs)(em.Z,{className:to().rightToolMenuItemContainer,sx:{marginLeft:"25px"},children:[(0,en.jsx)(e1.Z,{onClick:function(){c("MindMappingChart"),(0,ec.oh)("mapping-chart")},className:eJ()(to().rightToolMenuItem,"MindMappingChart"===s?to().active:""),children:(0,en.jsx)("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,en.jsx)("g",{id:"git-branch-01",children:(0,en.jsx)("path",{id:"Icon",d:"M3 2.5V11C3 12.4001 3 13.1002 3.27248 13.635C3.51217 14.1054 3.89462 14.4878 4.36502 14.7275C4.8998 15 5.59987 15 7 15H13M13 15C13 16.3807 14.1193 17.5 15.5 17.5C16.8807 17.5 18 16.3807 18 15C18 13.6193 16.8807 12.5 15.5 12.5C14.1193 12.5 13 13.6193 13 15ZM3 6.66667L13 6.66667M13 6.66667C13 8.04738 14.1193 9.16667 15.5 9.16667C16.8807 9.16667 18 8.04738 18 6.66667C18 5.28595 16.8807 4.16667 15.5 4.16667C14.1193 4.16667 13 5.28596 13 6.66667Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,en.jsx)(em.Z,{className:to().divider}),(0,en.jsx)(e1.Z,{onClick:function(){c("MindMappingOutline"),(0,ec.oh)("mapping-outline")},className:eJ()(to().rightToolMenuItem,"MindMappingOutline"===s?to().active:""),children:(0,en.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,en.jsx)("path",{d:"M17.5 9.99999L7.5 9.99999M17.5 4.99999L7.5 4.99999M17.5 15L7.5 15M4.16667 9.99999C4.16667 10.4602 3.79357 10.8333 3.33333 10.8333C2.8731 10.8333 2.5 10.4602 2.5 9.99999C2.5 9.53975 2.8731 9.16666 3.33333 9.16666C3.79357 9.16666 4.16667 9.53975 4.16667 9.99999ZM4.16667 4.99999C4.16667 5.46023 3.79357 5.83332 3.33333 5.83332C2.8731 5.83332 2.5 5.46023 2.5 4.99999C2.5 4.53975 2.8731 4.16666 3.33333 4.16666C3.79357 4.16666 4.16667 4.53975 4.16667 4.99999ZM4.16667 15C4.16667 15.4602 3.79357 15.8333 3.33333 15.8333C2.8731 15.8333 2.5 15.4602 2.5 15C2.5 14.5398 2.8731 14.1667 3.33333 14.1667C3.79357 14.1667 4.16667 14.5398 4.16667 15Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),(0,en.jsx)(ti.P,{onClick:function(){var e;null===(e=h.current)||void 0===e||e.hideMind()},placeStrategy:"static"})]}),(0,en.jsx)(e6.K,{className:"mind-mapping-box-action",show:i,display:"flex",justifyContent:"center",alignItems:"center",width:"calc(100% - 30px)",minHeight:"354px",position:"relative",sx:{padding:"25px 15px"},children:(0,en.jsx)(e_.Z,{size:"1.5em",sx:{color:"gray"},thickness:2})}),(0,en.jsx)(e6.K,{className:"mind-mapping-box-action",show:!i,display:"flex",width:"calc(100% - 30px)",minHeight:"354px",position:"relative",sx:{padding:e.isH5?"5px 0":"25px 15px",paddingBottom:"MindMappingChart"===s?"45px":"25px"},children:(0,en.jsx)(e6.K,{display:"flex",flex:"1 1",show:"MindMappingChart"===s||"MindMappingOutline"===s,children:(0,en.jsx)(eW.pb,{gid:e.gid,ref:a,resultId:n,searchKey:"1",mode:l,isH5:e.isH5,queryString:r,engineType:e.engineType,links:o})})}),e.resultExist&&(0,en.jsxs)(em.Z,{sx:{cursor:"pointer",height:"50px",borderTop:"2px solid #F2F4F7",display:"flex",alignItems:"center",justifyContent:"center","&:hover":{background:"#FCFCFC"}},onClick:function(){e.showPpt()},children:[(0,en.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",children:[(0,en.jsx)("path",{d:"M10.9167 10.4711C10.9167 10.0734 10.9167 9.8745 10.9998 9.76348C11.0722 9.66673 11.1831 9.6062 11.3036 9.59759C11.442 9.58771 11.6093 9.69524 11.9438 9.91032L15.8777 12.4392C16.168 12.6258 16.3131 12.7192 16.3633 12.8378C16.4071 12.9415 16.4071 13.0585 16.3633 13.1622C16.3131 13.2808 16.168 13.3742 15.8777 13.5608L11.9438 16.0897C11.6093 16.3048 11.442 16.4123 11.3036 16.4024C11.1831 16.3938 11.0722 16.3333 10.9998 16.2365C10.9167 16.1255 10.9167 15.9266 10.9167 15.5289V10.4711Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,en.jsx)("path",{d:"M5.5 9.5C5.5 8.09987 5.5 7.3998 5.77248 6.86502C6.01217 6.39462 6.39462 6.01217 6.86502 5.77248C7.3998 5.5 8.09987 5.5 9.5 5.5H16.5C17.9001 5.5 18.6002 5.5 19.135 5.77248C19.6054 6.01217 19.9878 6.39462 20.2275 6.86502C20.5 7.3998 20.5 8.09987 20.5 9.5V16.5C20.5 17.9001 20.5 18.6002 20.2275 19.135C19.9878 19.6054 19.6054 19.9878 19.135 20.2275C18.6002 20.5 17.9001 20.5 16.5 20.5H9.5C8.09987 20.5 7.3998 20.5 6.86502 20.2275C6.39462 19.9878 6.01217 19.6054 5.77248 19.135C5.5 18.6002 5.5 17.9001 5.5 16.5V9.5Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,en.jsx)("p",{style:{marginLeft:"10px"},children:"生成演示文稿"})]})]})})};function openAcademicReference(e,t,n,r,o){t&&e?(e.setSetting({content:(0,en.jsx)(er.Fragment,{children:(0,en.jsxs)(ev.Z,{className:"flex-auto-height",children:[(0,en.jsxs)(em.Z,{sx:{py:2,display:"flex",alignItems:"center",justifyContent:"center"},children:[r&&(0,en.jsx)(LinkToReferenceBtn,{sx:{position:"absolute",left:16},reference:n}),(0,en.jsx)(eS.Z,{sx:{textAlign:"center",fontSize:18,fontWeight:"bold",color:"black"},children:"来源[".concat(o,"]")})]}),(0,en.jsx)(ek.Z,{}),(0,en.jsx)(ev.Z,{className:eJ()({"flex-auto-height":r}),sx:{p:"20px 20px 0"},children:r?(0,en.jsx)(AcademicReference,{reference:n,isH5:!0}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(tf.Z,{href:n.link,target:"_blank",sx:{textDecoration:"none",flex:1,color:"#1570EF",fontSize:"14px",lineHeight:"22px",overflowY:"auto",minHeight:0},children:n.title}),(0,en.jsx)(em.Z,{sx:{color:"#344054",fontSize:"14px"},children:!!n.date&&"[".concat((0,ec.l6)(n.date,"-"),"]")})]})})]})},n.link),sx:{".search-page-close-button":{top:14},".MuiDrawer-paper":{borderRadius:"10px 10px 0 0",minHeight:"min(200px , 50vh)","--safe-top":"env(safe-area-inset-top, 0px)",maxHeight:"max(calc(100vh - calc(230px + var(--safe-top))), 50vh)",pb:"25px"}}}),e.toggleOpen(!0)):window.open(n.link||n.url)}(0,eE.ZP)(eT.Z)(function(e){var t=e.theme;return{"& .MuiDialogContent-root":{padding:t.spacing(2),minWidth:"410px"},"& .MuiDialogActions-root":{padding:t.spacing(1)}}}),(c=G||(G={})).Default="Default",c.Generating="Generating",c.Finished="Finished";var ExportGenerateReportButtonV2=function(e){var t,n=e.isH5,r=e.question,o=e.links,i=e.result,a=e.resultId,s=(0,er.useRef)(null),c=(0,$._)((0,er.useState)(!1),2),l=c[0],u=c[1],d=(0,eL.useSearchParams)(),h=(0,$._)(er.useState(!1),2),f=h[0],p=h[1],g=(0,e9.LM)(),x=null===(t=(0,tc.ZD)())||void 0===t?void 0:t.isMiniWebView,m=(0,td.A)().removeUrlCmd,v=(0,er.useCallback)(function(e){p(e)},[g.login,e.id,p]);(0,er.useEffect)(function(){g.hasHydrated&&b()},[g.hasHydrated]);var downloadFunc=function(e){u(!0);var t="".concat(r,".").concat(e);n?(0,te.dw)({md:getSearchResultMkData(),title:r},e,"ai-search").then(function(e){var n=e+"&uid="+(0,ea.ej)("uid");if(x){(0,tp.hk)(t,n);return}var r=document.createElement("a");r.setAttribute("download",t),r.style.display="none",r.href=n,document.body.appendChild(r),r.click(),(0,ec.oh)("export-docx")}).catch(function(e){(0,eP.yv)("下载失败，当前用户过多，请稍后再试",{variant:"error",autoHideDuration:2e3})}).finally(function(){u(!1)}):(0,te.Sv)({md:getSearchResultMkData(),title:r},e,"ai-search").then(function(n){r=ea.EO.PDF===e?"application/pdf":"application/vnd.openxmlformats-officedocument.wordprocessingml.document";var r,o=new Blob([n.data],{type:r+"charset=utf-8"}),i=document.createElement("a");i.download=t,i.style.display="none",i.href=URL.createObjectURL(o),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i),(0,ec.oh)("export-pdf")}).catch(function(e){(0,eP.yv)("下载失败，当前用户过多，请稍后再试",{variant:"error",autoHideDuration:2e3})}).finally(function(){u(!1)})},exportToXiezuocat=function(){u(!0);var e=getExportToXiezuocatMd();(0,ec.dW)(ec.Gy.ExportToXiezuocat,{query:r,md:e}),(0,ec.oh)("export-xiezuocat"),(0,ea.Vy)(r,e).then(function(e){0===e.data.errCode?window.open(e.data.data+"?exp=true"):((0,eP.yv)("导出到写作猫失败",{variant:"error",autoHideDuration:2e3}),(0,ec.dW)(ec.Gy.ExportToXiezuocatFailed,1))}).catch(function(e){(0,eP.yv)("导出到写作猫失败",{variant:"error",autoHideDuration:2e3}),(0,ec.dW)(ec.Gy.ExportToXiezuocatFailed,1)}).finally(function(){u(!1)})},_=(0,er.useCallback)(function(t){if(!g.login){var n=(0,th.GZ)(location.href,[{type:ep.a.ExportReport,payload:t}]);n.searchParams.set("gid",e.id);var r=n.href;(0,tg.z$)(-1),(0,tu.x3)({showTips:!0,redirectUrl:r});return}t===ea.EO.CAT?exportToXiezuocat():downloadFunc(t)},[g.login,exportToXiezuocat,downloadFunc]),b=(0,td.Q)(function(t,n){var r;s.current&&t.find(function(e){return e.type===ep.a.ExportReport})&&d.get("gid")==e.id&&(null===(r=s.current)||void 0===r||r.scrollIntoView({block:"center"}),setTimeout(function(){_(t.find(function(e){return e.type===ep.a.ExportReport}).payload)},500),setTimeout(function(){m(ep.a.ExportReport)},100))},{deps:[_]}),w=(0,er.useCallback)(function(e){if(!e||e.danger)return"";var t=""+(e.export||e.title)+" ";return!e.export&&e.date&&(t+="[".concat((0,ec.l6)(e.date,"-"),"]")),t},[]),getSearchResultMkData=function(){return""+("# ".concat(r,"\n\n")+getExportToXiezuocatMd())},k=tT.useBridge("exportMarkdownAPI"),getExportToXiezuocatMd=function(){var t="";t+="".concat(i.replace(/\[\[(\d+)\]\]/g,"[$1]"),"\n\n");var n=!0,r=!1,s=void 0;try{for(var c,l=Object.values(B)[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var u=c.value;if(k.current){var d=k.current.getExportMarkdownTextMap(u,a);d&&(t+=d+"\n\n")}}}catch(e){r=!0,s=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw s}}return o.length&&(t+="## ".concat(e.engineType?"参考文献":"参考资料","\n"),o.forEach(function(e,n){var r=w(e);r&&(t+="[".concat(n+1,". ").concat(r,"](").concat(e.link,")\n\n"))})),t};return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(tv.Z,{ref:s,sx:{color:"#667085",width:36,height:36,minWidth:0,fontSize:"16px",fontWeight:400},checked:f,onCheckedChange:v,children:l?(0,en.jsx)(e_.Z,{size:"1.5em",sx:{color:"gray"},thickness:2}):(0,en.jsx)(ex.Z,{})}),(0,en.jsxs)(ew.ZP,{id:"export-type",open:f,anchorEl:s.current,onClose:function(){p(!1)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[(0,en.jsx)(eI.Z,{onClick:function(){p(!1),_(ea.EO.DOCX)},style:{fontSize:"14px",color:"#344054"},children:"导出Word"}),(0,en.jsx)(eI.Z,{onClick:function(){p(!1),_(ea.EO.PDF)},style:{fontSize:"14px",color:"#344054"},children:"导出PDF"}),!x&&!n&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(em.Z,{sx:{padding:"0 16px"},children:(0,en.jsx)(ek.Z,{sx:{margin:"0"}})}),(0,en.jsx)(eI.Z,{onClick:function(){p(!1),_(ea.EO.CAT)},style:{fontSize:"14px",color:"#344054"},children:"导出到写作猫"})]})]})]})};(0,eE.ZP)(e1.Z)(function(){return{"&[class]":{color:"#1570EF",padding:"9px 15px",borderRadius:0,border:"1px solid #1570EF",cursor:"pointer",display:"flex",alignItems:"center","&:hover":{backgroundColor:"#EFF8FF"},"& svg":{marginRight:"10px"}}}});var tV=(l=(0,Q._)(function(){return(0,et.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,ea.Ur)()];case 1:if(e.sent().data.data.count>0)return[2,!0];return[2,!1]}})}),function(){return l.apply(this,arguments)});function useAutoScroll(){var e=(0,er.useRef)(0),t=(0,er.useRef)(!1);return{scroll:(0,er.useCallback)(function(n){if(!t.current){var r,o,i=null===(r=n.current)||void 0===r?void 0:r.getBoundingClientRect();i&&i.y+i.height<window.innerHeight||(null===(o=n.current)||void 0===o||o.scrollIntoView({behavior:"smooth",block:"end"}),e.current=Date.now())}},[]),revoke:(0,er.useCallback)(function(){t.current=!0},[])}}function useAutoScrollV2(e,t){var n=(0,er.useRef)(!0),r=(0,er.useCallback)(function(){n.current=!0,o(),document.addEventListener("wheel",a),document.addEventListener("touchstart",a)},[]),o=(0,er.useCallback)(function(){n.current&&(i(),setTimeout(function(){o()},t))},[]),i=(0,er.useCallback)(function(){e.current.scrollIntoView({behavior:"smooth",block:"end"})},[]),a=(0,er.useCallback)(function(){n.current=!1,document.removeEventListener("wheel",a),document.removeEventListener("touchstart",a)},[]);return{startAutoScroll:r,scrollNow:i,revoke:a}}function LinkToReferenceBtn(e){return(0,en.jsx)(tf.Z,{target:"_blank",sx:e.sx,role:"button",href:e.reference.url,children:(0,en.jsx)(eb.Z,{sx:{my:-.6,py:1},className:to()["ref-link"],children:(0,en.jsx)("svg",{width:"17",height:"18",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,en.jsx)("path",{d:"M16 6.50001L16 1.50001M16 1.50001H11M16 1.50001L8.5 9M6.83333 1.5H5C3.59987 1.5 2.8998 1.5 2.36502 1.77248C1.89462 2.01217 1.51217 2.39462 1.27248 2.86502C1 3.3998 1 4.09987 1 5.5V12.5C1 13.9001 1 14.6002 1.27248 15.135C1.51217 15.6054 1.89462 15.9878 2.36502 16.2275C2.8998 16.5 3.59987 16.5 5 16.5H12C13.4001 16.5 14.1002 16.5 14.635 16.2275C15.1054 15.9878 15.4878 15.6054 15.7275 15.135C16 14.6002 16 13.9001 16 12.5V10.6667",stroke:"#1570EF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})})}function AcademicReference(e){var t=(0,ec.x2)(e.reference.title)&&(!e.reference.abstract||e.reference.abstract&&(0,ec.x2)(e.reference.abstract))?"En":"中",n=(0,$._)((0,er.useState)(t),2),r=n[0],o=n[1],i=(0,$._)((0,er.useState)(e.reference.abstract),2),a=i[0],s=i[1],c=(0,$._)((0,er.useState)(e.reference.title),2),l=c[0],u=c[1],d=(0,er.useRef)(null),h=(0,er.useRef)(!1),getTranslate=function(n){n===r||h.current||(h.current=!0,o(n),n===t?(s(e.reference.abstract),u(e.reference.title),h.current=!1):d.current?(u(d.current.title),s(d.current.abstract),h.current=!1):doTranslateText())},doTranslateText=function(){(0,ea.O9)(l+"\n\n"+a).then(function(e){if(0===e.data.errCode){var t=e.data.data,n=(0,Y._)(t.split("\n\n")),r=n[0],o=n.slice(1).join("").replaceAll(/\${1,2}([^$]+)\${1,2}/g,function(e,t){return e.replaceAll(/\\(emph|omega|geq|oplus|times|div|neq|leq|gg|ll|equiv|sim|backsim|approx|cong|pm|mp|in|cap|bigcap|wedge|bigwedge|vee|bigvee|subset|supset|subseteq|supseteq|int|iint|iiint|iiiint|oint)(\S)/g,"\\$1 $2").replaceAll(/\\\s+(emph|omega|geq|oplus|times|div|neq|leq|gg|ll|equiv|sim|backsim|approx|cong|pm|mp|in|cap|bigcap|wedge|bigwedge|vee|bigvee|subset|supset|subseteq|supseteq|int|iint|iiint|iiiint|oint)/g,"\\$1")});d.current={title:r,abstract:o},u(d.current.title),s(d.current.abstract),h.current=!1}else if(e.data.errCode===es.cO.TOO_MANY_REQUESTS)var i=0,a=setInterval(function(){i+=1,"true"===localStorage.getItem("cloudflareVerifySuccess")&&(myClearInterval(a),doTranslateText()),i>=300&&myClearInterval(a)},1e3);else(0,eP.yv)("翻译失败",{variant:"error",autoHideDuration:2e3}),d.current={title:"",abstract:""},u(d.current.title),s(d.current.abstract),h.current=!1})},f=e.isH5;return e.noTitle,(0,en.jsxs)(ev.Z,{className:eJ()(to()["ref-container"],"flex-auto-height"),children:[(0,en.jsxs)(ev.Z,{direction:"row",justifyContent:"space-between",children:[(0,en.jsxs)(em.Z,{sx:{minWidth:0,flex:1},children:[(0,en.jsx)(em.Z,{display:"flex",children:h.current?(0,en.jsxs)(en.Fragment,{children:["中"!==t&&(0,en.jsx)(em.Z,{sx:{marginRight:"10px"},component:"span",display:"inline-block",children:(0,en.jsx)(LanguageCheckbox,{checked:"中"===r,onChange:function(e,t){getTranslate(t?"中":"En")}})}),(0,en.jsx)(eR.Z,{sx:{height:26},className:to()["ref-title"]})]}):(0,en.jsxs)(eS.Z,{className:to()["ref-title"],children:["中"!==t&&(0,en.jsx)(em.Z,{sx:{marginRight:"10px"},component:"span",display:"inline-block",children:(0,en.jsx)(LanguageCheckbox,{checked:"中"===r,onChange:function(e,t){getTranslate(t?"中":"En")}})}),l]})}),(0,en.jsx)(eS.Z,{className:to()["ref-author"],children:e.reference.author})]}),!f&&(0,en.jsx)(LinkToReferenceBtn,{reference:e.reference})]}),a&&(0,en.jsx)(ek.Z,{sx:{position:"sticky",top:0,border:f?"none":"invalid",margin:"10px 0",borderColor:"#F2F4F7"}}),(0,en.jsxs)(em.Z,{className:"flex-auto-height",sx:{overflow:h.current?"hidden":"auto",position:"relative"},children:[a&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(em.Z,{className:to()["ref-expand"],children:(0,en.jsx)(AbstractMarkdown,{content:'<span  class="ref-tag">'.concat("En"===r?"Abstract":"摘要","</span>")+a})},r),h.current&&(0,en.jsxs)(em.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"white"},children:[(0,en.jsx)(eR.Z,{width:"100%"}),(0,en.jsx)(eR.Z,{width:"100%"}),(0,en.jsx)(eR.Z,{width:"100%"}),(0,en.jsx)(eR.Z,{width:"100%"}),(0,en.jsx)(eR.Z,{width:"80%"}),(0,en.jsx)(eR.Z,{width:"80%"}),(0,en.jsx)(eR.Z,{width:"80%"})]})]}),!!(e.reference.quote&&"0"!==e.reference.quote||e.reference.date||e.reference.source||e.reference.data)&&(0,en.jsxs)(em.Z,{sx:{background:"white",position:"sticky",bottom:0,paddingBottom:"2px"},children:[(0,en.jsx)(ek.Z,{sx:{margin:"10px 0",borderColor:"#F2F4F7"}}),(0,en.jsxs)(ev.Z,{direction:"row",sx:{color:"#475467",fontSize:12,verticalAlign:"middle"},alignItems:"center",spacing:1,children:[e.reference.quote&&"0"!==e.reference.quote&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)("svg",{style:{marginBottom:"2px"},width:"11",height:"9",viewBox:"0 0 11 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,en.jsx)("path",{d:"M9.58483 0.147461C7.57589 0.147461 6.03572 1.70996 6.03572 3.71889V8.518C6.03572 8.69656 6.19196 8.85281 6.37054 8.85281H10.1652C10.3437 8.85281 10.5 8.69656 10.5 8.518V4.72335C10.5 4.54477 10.3437 4.38853 10.1652 4.38853H7.37499V3.71889C7.37499 2.60281 8.46875 1.48675 9.58482 1.48675H10.1652C10.3437 1.48675 10.5 1.33049 10.5 1.15192V0.482277C10.5 0.303715 10.3437 0.147461 10.1652 0.147461H9.58483ZM4.04911 0.147461C2.04019 0.147461 0.5 1.70996 0.5 3.71889V8.518C0.5 8.69656 0.656254 8.85281 0.834827 8.85281H4.62947C4.80804 8.85281 4.96428 8.69656 4.96428 8.518V4.72335C4.96428 4.54477 4.80804 4.38853 4.62947 4.38853H1.83929V3.71889C1.83929 2.60281 2.93303 1.48675 4.04911 1.48675H4.62947C4.80804 1.48675 4.96428 1.33049 4.96428 1.15192V0.482277C4.96428 0.303715 4.80804 0.147461 4.62947 0.147461H4.04911Z",fill:"#475467"})}),(0,en.jsx)(em.Z,{component:"span",sx:{flexShrink:0},children:e.reference.quote}),(0,en.jsx)(ek.Z,{orientation:"vertical",sx:{height:"12px",borderColor:"#F2F4F7"}})]}),(0,en.jsx)(em.Z,{component:"span",sx:{flexShrink:0},children:(0,ec.l6)(e.reference.date,"-")}),e.reference.source&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(ek.Z,{orientation:"vertical",sx:{height:"12px",borderColor:"#F2F4F7"}}),(0,en.jsx)(em.Z,{component:"span",sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:e.reference.source})]}),e.reference.data&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(ek.Z,{orientation:"vertical",sx:{height:"12px",borderColor:"#F2F4F7"}}),(0,en.jsx)(em.Z,{component:"span",sx:{flexShrink:0},children:e.reference.data})]})]})]})]},r)]})}function LanguageCheckbox(e){var t=(0,$._)((0,eX.U8)(e.checked,!1,{isControlled:!1}),2),n=t[0],r=t[1],o=(0,eZ.Z)().palette.primary.main;return(0,en.jsx)(eO.Z,(0,J._)({checked:n,sx:{"&[class]":(0,J._)({verticalAlign:"bottom",borderRadius:0,border:"1px solid  #F2F4F7",p:"3px 4px"},n?{background:"#eff8ff",borderColor:"#eff8ff","&:hover":{background:"#c9e5fe",borderColor:"#c9e5fe"}}:{})},color:"primary",onChange:function(e,t){r(t)},icon:(0,en.jsx)(language,{}),checkedIcon:(0,en.jsx)(language,{style:{color:o}})},e))}function AppendQuestionBox(e){var t=(0,er.useRef)(null),n=(0,$._)((0,er.useState)(!1),2),r=n[0],o=n[1],i=(0,$._)(er.useState(null),2),a=i[0];i[1];var s=(0,er.useContext)(tl.HO),c=(0,er.useRef)(null),l=e.inputRef||t,u=(0,er.useRef)(null),d=tT.useBridge("resultAPI"),h=(0,$._)((0,er.useState)([{label:"简洁",value:"concise",icon:(0,en.jsx)(search_menu05,{}),active:!1},{label:"深入",value:"detail",icon:(0,en.jsx)(menu01,{}),active:!0},{label:"研究",value:"research",icon:(0,en.jsx)(start_06,{}),active:!1}]),2),f=h[0],p=h[1],g=(0,$._)((0,er.useState)([{label:"全网",value:void 0,icon:(0,en.jsx)(globe_01,{}),active:!0},{label:"学术",value:"scholar",icon:(0,en.jsx)(graducation_hat_01,{}),active:!1}]),2),x=g[0],m=g[1];(0,e4.bQ)({anchor:function(){return a},popover:function(){var e;return s||(null===(e=c.current)||void 0===e?void 0:e.nodeRef.current)}},r,function(){return o(!1)});var onModesItemClick=function(e){var t=(0,ee._)(f);t.forEach(function(t,n){t.active=t.label===e.label}),p(t)},onEngineItemClick=function(e){var t=(0,ee._)(x);t.forEach(function(t,n){t.active=t.label===e.label}),m(t)};return(0,er.useEffect)(function(){var e;null===(e=u.current)||void 0===e||e.scrollIntoView({block:"center",behavior:"smooth"})},[]),(0,en.jsxs)(em.Z,{className:to()["append-search-textarea"],ref:u,children:[(0,en.jsx)(ez.ZP,{hideIcon:!0,isH5:!1,ref:l,onSubmit:function(t){var n;null===(n=d.current)||void 0===n||n.appendItem({question:t[0],mode:e.mode,engineType:e.engineType}),e.onSubmit()},onArgumentChange:function(){if(e.isH5){var t,n,r=null===(n=l.current)||void 0===n?void 0:null===(t=n.argumentRef.current)||void 0===t?void 0:t.textareaRef.current;r&&(r.style.setProperty("height","0px"),r.style.setProperty("height","".concat(r.scrollHeight,"px")))}},sx:{height:"100%",padding:"0 !important","& > label":{paddingLeft:"5px"}},onlyArgument:!0,placeholders:{argument:"继续提问..."}}),(0,en.jsx)(e4.ZP,{anchor:a,placement:"top-start",offsetOptions:{mainAxis:10},ref:c,open:r,isAutoUpdate:!0,children:(0,en.jsxs)(em.Z,{className:to()["append-setting-container"],children:[f.map(function(e,t){return(0,en.jsx)(tm.Z,{arrow:!0,placement:"top",classes:{tooltip:"custom-tooltip-popper",arrow:"custom-tooltip-arrow"},title:"强度:".concat(e.label),children:(0,en.jsx)(eb.Z,{className:eJ()(to()["append-setting-icon-button"],(0,K._)({},to()["button-active"],e.active)),onClick:function(){return onModesItemClick(e)},children:e.icon})},t)}),(0,en.jsx)(ek.Z,{orientation:"vertical",sx:{height:"20px",margin:"0 5px"}}),x.map(function(e,t){return(0,en.jsx)(tm.Z,{arrow:!0,placement:"top",classes:{tooltip:"custom-tooltip-popper",arrow:"custom-tooltip-arrow"},title:"范围:".concat(e.label),children:(0,en.jsx)(eb.Z,{className:eJ()(to()["append-setting-icon-button"],(0,K._)({},to()["button-active"],e.active)),onClick:function(){return onEngineItemClick(e)},children:e.icon})},t)})]})})]})}var useUniqueExpandEffect=function(){var e=(0,er.useRef)(null),t=(0,$._)((0,er.useState)(null),2),n=t[0],r=t[1],o=(0,er.useCallback)(function(t){return{onExpand:function(){if(n!==t){var o;null===(o=e.current)||void 0===o||o.collapse(),r(t)}},ref:n===t?e:null}},[n]);return{expandResultRef:e,lastItem:n,setLastItem:r,getResultRefProps:o}};function useSearchResultCollapseEffect(e){var t=e.apiRef,n=e.setCollapse,r=e.collapse,o=e.props,i=e.beforeScroll,a=(0,er.useRef)(null),s=(0,er.useRef)(!1);return(0,er.useImperativeHandle)(t,function(){return{collapse:function(){n(!0)}}}),(0,er.useEffect)(function(){if(r)s.current=!1;else{if(i&&!i())return;setTimeout(function(){var e;null===(e=a.current)||void 0===e||e.scrollIntoView({block:"start",behavior:"smooth"}),setTimeout(function(){o.onExpand&&o.onExpand(),s.current=!0},1e3)},200)}},[r]),(0,er.useEffect)(function(){if(s.current&&o.showMind){var e;null===(e=a.current)||void 0===e||e.scrollIntoView({block:"start",behavior:"smooth"})}},[o.showMind]),{containerRef:a}}function AbstractMarkdown(e){return(0,en.jsx)(tb.D,{remarkPlugins:[tw.Z,tk.Z,ty.Z],rehypePlugins:[tj.Z,[tC.Z,{detect:!1,ignoreMissing:!0}],tS.Z],components:{pre:function(e){return(0,en.jsx)("span",{children:e.children})}},skipHtml:!0,children:e.content})}function useSkeletonTimeRecord(e){var t=(0,$._)((0,er.useState)(new Date),2),n=t[0];return t[1],(0,er.useEffect)(function(){return function(){if(n){var t=new Date().getTime()-n.getTime();if(t>2e3){var r,o={param:e,client:(0,tc.Fk)(),spendTime:t},i=(r=F.SearchSkeletonDataReadyTime,tM.get(r));if(i){var a=new Date().getTime()-i;Object.assign(o,{spendTimeAfterDataReady:a}),a>1e3&&Object.assign(o,{spendTimeAfterDataReadyTooSlow:!0})}(0,ec.dW)(ec.Gy.SEARCH_SKELETON_DISAPPEAR_TIME_TOO_LONG,o)}}}},[]),{startTime:n}}var tG=(0,er.memo)(function(){return(0,en.jsx)(em.Z,{sx:{position:"sticky",bottom:0,bgcolor:"white"},children:(0,en.jsx)(eS.Z,{className:"search-model-tip",sx:(0,ec.KI)({fontSize:12,fontWeight:400,lineHeight:"18px",textAlign:"center",color:"#D0D5DD"}),children:"内容由AI大模型生成，不能保证完全真实，请仔细甄别"})})})},15828:function(e,t,n){"use strict";n.d(t,{LG:function(){return ReferenceNum},VY:function(){return Content}});var r,o=n(16687),i=n(35029),a=n(88965),s=n(8001),c=n(81763),l=n(50044),u=n(57437),d=n(17814);n(9792);var h=n(81854),f=n(23091),p=n(73455),g=n(2085),x=n(69575),m=n(2265),v=n(35069),_=n(52261),b=n(44826);n(27563);var w=n(21377),k=n(65081),y=n(18833),j=n(25577),C=n(11607),S=n(54887),M=n(62629),E=n(51060),T=n.n(E),I=[],pushMermaidQueue=function(e){I.push(e)},R=(r=(0,o._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:if(!(I.length>0)||!(e=I.shift()))return[3,2];return[4,e()];case 1:t.sent(),t.label=2;case 2:return setTimeout(R,50),[2]}})}),function(){return r.apply(this,arguments)});function Mermaid(e){var t=(0,m.useRef)(null),n=(0,c._)((0,m.useState)(!1),2),r=n[0],i=n[1];return(0,m.useEffect)(function(){if(e.code&&t.current){var n;pushMermaidQueue((n=(0,o._)(function(){return(0,l.Jh)(this,function(e){return i(!0),[2]})}),function(){return n.apply(this,arguments)}))}},[e.code]),(0,m.useEffect)(function(){r&&_.L.run({nodes:[t.current]}).then(function(){e.onLoaded&&e.onLoaded()}).catch(function(t){e.onError()})},[r]),(0,u.jsx)("div",{className:"no-dark",style:{cursor:"pointer",overflow:"auto"},ref:t,onClick:function(){return e.onClick?e.onClick():function(){var e,n=null===(e=t.current)||void 0===e?void 0:e.querySelector("svg");if(n){var r=new XMLSerializer().serializeToString(n),o=new Blob([r],{type:"image/svg+xml"}),i=URL.createObjectURL(o),a=window.open(i);a&&(a.onload=function(){return URL.revokeObjectURL(i)})}}()},children:r&&e.code})}function PreCode(e){var t=(0,m.useRef)(null),n=(0,c._)((0,m.useState)(""),2),r=n[0],o=n[1];return((0,m.useEffect)(function(){if(t.current){var e=t.current.querySelector("code.language-mermaid");e&&o(e.innerText)}},[e.children]),r)?(0,u.jsx)(Mermaid,{code:r,onError:function(){return o("")}}):(0,u.jsxs)("pre",{ref:t,children:[(0,u.jsx)("span",{className:"copy-code-button",onClick:function(){if(t.current){var e=t.current.innerText;(0,v.vQ)(e)}}}),e.children]})}function BootstrapP(e){e.onParagraphMounted;var t=(0,s._)(e,["onParagraphMounted"]),n=(0,m.useRef)(null);return(0,u.jsx)("p",(0,a._)((0,i._)({},t),{ref:n}))}R();var Z=m.memo(function(e){var t=e.content.replace(/([^\\])?~/g,"$1\\~");return(0,u.jsx)(d.D,{remarkPlugins:[h.Z,g.Z,f.Z],rehypePlugins:[p.Z,[x.Z,{detect:!1,ignoreMissing:!0}],b.Z],components:{pre:PreCode,a:function(e){var t,n=e.href||"",r=/^\/#/i.test(n)?"_self":null!==(t=e.target)&&void 0!==t?t:"_blank";return(0,u.jsx)("a",(0,a._)((0,i._)({},e),{onClick:function(e){var t;(null===(t=(0,y.ZD)())||void 0===t?void 0:t.isMiniWebView)&&(e.preventDefault(),(0,v.vQ)(n,!0,e.currentTarget),(0,k.pv)())},target:r}))},span:function(t){var n;return(null===(n=t.className)||void 0===n?void 0:n.includes("reference-num"))&&e.links[parseInt(t.children)-1]?(0,u.jsx)(ReferenceNum,{disableTooltip:!e.isFinished,isH5:e.isH5,num:parseInt(t.children),link:e.links[parseInt(t.children)-1]}):(0,u.jsx)("span",(0,i._)({},t))},p:function(t,n){return(0,u.jsx)(BootstrapP,(0,a._)((0,i._)({},t),{onParagraphMounted:e.onParagraphMounted}))}},skipHtml:!1,children:t})});function Content(e){var t=(0,v.BL)(e.text.substring(e.lastText.length)),n=e.lastText.split(RegExp("(\\[\\[\\d+]])","gi")).map(function(e,t){if((e=(0,v.BL)(e)).match(/\[\[\d+]]/gi)){var n=e.replace(/\[\[(\d+)]]/,"$1");return'<span data-key="'.concat(t,'" class="reference-num">').concat(n,"</span>")}return e}).join(""),r=(0,v.tk)(n+'<span class="fade-in" data-key="'.concat(e.lastText.length,'">').concat(t,"</span>"));return(0,u.jsx)(j.Z,{className:"markdown-body",children:(0,u.jsx)(Z,{content:r,links:e.links,isH5:e.isH5,isFinished:e.finished,onParagraphMounted:e.onParagraphMounted},r.length)})}function ReferenceNum(e){var t=e.num,n=e.link,r=e.onTooltipHoverChange,o=e.isH5,i=(0,c._)((0,m.useState)(null),2),a=i[0],s=i[1],l=(0,c._)((0,m.useState)(!1),2),d=l[0],h=l[1];(0,c._)((0,C.bQ)({anchor:a},d,function(){h(!1)}),1)[0];var f=!!(n.abstract||n.export||n.source),p=w.HK.useAPI("singletonDrawer");(0,m.useEffect)(function(){e.link.link&&(0,S.prefetchDNS)(e.link.link)},[]);var g=(0,m.useCallback)(function(){(0,w.xi)(p.current,o,n,f,t)},[o,n.link,n.title,t]),x=(0,u.jsx)(u.Fragment,{children:o?(0,u.jsxs)(j.Z,{component:"sup",sx:{color:"#667085",cursor:"pointer",fontSize:"10px",fontStyle:"normal",lineHeight:"12px",p:"2px"},onClick:g,children:["[",t,"]"]}):(0,u.jsx)(O,{ref:s,onClick:g,children:t})});return e.disableTooltip||o?x:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(M.M,{component:"span",anchorContainerCss:{display:"inline-flex",height:"16px",alignItems:"center",verticalAlign:"middle"},sxs:{contentWrapper:{"&[class]":{padding:"12px",fontWeight:400,fontSize:"12px",maxWidth:n.abstract?"min(80vw, 600px)":"min(80vw, 400px)",lineHeight:"18px",color:"#667085"}}},placement:"bottom",anchorChildren:x,metaPopoverProps:{isAutoUpdate:!1},onOpenChange:function(e){r&&r(e)},children:f?(0,u.jsx)(w.SI,{reference:n}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z,{sx:{color:"black","&:hover":{textDecoration:"underline"}},onClick:function(){window.open(n.link)},children:n.title}),(0,u.jsx)(j.Z,{children:!!n.date&&"[".concat((0,v.l6)(n.date,"-"),"]")})]})})})}var O=(0,m.forwardRef)(function(e,t){var n=e.children,r=e.onClick;return(0,u.jsx)(j.Z,{ref:t,component:"span",className:T()["reference-dot"],onClick:r,children:n})})},24525:function(e,t,n){"use strict";n.d(t,{B:function(){return d}});var r=n(35029),o=n(88965),i=n(81763),a=n(57437),s=n(3283),c=n(35069),l=n(2265),u=["userInfo","headImgUrl"],d=(0,l.forwardRef)(function(e,t){var n=(0,i._)((0,c.hZ)(e,u),2),d=n[0].userInfo,h=n[1],f=d?d.nickname||d.userName||"空":"",p=d?d.headImgUrl:"",g=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,function(){return{avatarNodeRef:g}}),(0,a.jsx)(s.Z,(0,o._)((0,r._)({ref:g,alt:f,title:f,src:p},h),{sx:(0,r._)({boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 3px 0px #1018281A",position:"unset","&:hover":{boxShadow:"0px 1px 2px 0px #1018280F, 0px 1px 4px 0px #bdbcbc;"}},h.sx||{}),children:f&&f.charAt(0).toUpperCase()}))});d.displayName="MetaAvatar"},508:function(e,t,n){"use strict";n.d(t,{Z:function(){return MetaLink}});var r=n(35029),o=n(8001),i=n(57437),a=n(25210),s=n(65081);function MetaLink(e){var t=e.onLinkClick,n=e.snackbarContent,c=e.useCopySibling,l=void 0===c||c,u=e.snackbarProps,d=(0,o._)(e,["onLinkClick","snackbarContent","useCopySibling","snackbarProps"]);return(0,i.jsx)(a.Z,(0,r._)({onClick:function(r){return(0,s.Uq)(e.href,l?r.currentTarget:void 0,{snackbarContent:n,snackbarProps:u})&&r.preventDefault(),null==t?void 0:t(r)}},d))}n(61396)},62629:function(e,t,n){"use strict";n.d(t,{M:function(){return MetaTooltip}});var r=n(35029),o=n(88965),i=n(8001),a=n(81763),s=n(57437),c=n(2265),l=n(11607),u=n(40218),d=n.n(u),h=n(25727),f=n.n(h),p=n(82748),g=n(25577);function MetaTooltipBase(e){var t=(0,a._)((0,p.U8)(e.open,!1,{onChange:e.onOpenChange}),2),n=t[0],i=t[1],u=(0,a._)((0,l.gZ)(i,{open:10,close:50},{anchor:e.anchor}),2)[1],h=(0,c.useMemo)(function(){return d()({contentWrapper:{"&[class]":{py:1,px:1.5,maxWidth:"min(80vw, 400px)",fontSize:12,color:"dark"==e.theme?"white":"#344054",backgroundColor:"dark"==e.theme?"black":"white",boxShadow:"0px 1px 2px 0px rgba(16, 24, 40, 0.06), 0px 1px 3px 0px rgba(16, 24, 40, 0.10)"}}},e.sxs)},[e.sxs]);return(0,s.jsx)(s.Fragment,{children:e.children&&(0,s.jsx)(l.ZP,(0,o._)((0,r._)((0,o._)((0,r._)({sxs:h,placement:e.placement||"top"},u),{offsetOptions:{mainAxis:10},open:n,isAutoUpdate:!0,anchor:e.anchor}),f()(e.metaPopoverProps,["sxs"])),{children:e.children}))})}function MetaTooltip(e){var t=e.anchorChildren,n=e.anchorContainerCss,l=e.children,u=(0,i._)(e,["anchorChildren","anchorContainerCss","children"]);(0,c.useRef)(null);var d=(0,a._)((0,c.useState)(null),2),h=d[0],f=d[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{component:e.component,ref:function(e){return f(e)},style:n,children:t}),(0,s.jsx)(MetaTooltipBase,(0,o._)((0,r._)({anchor:h},u),{children:l}))]})}},6774:function(e,t,n){"use strict";n.d(t,{Z:function(){return MetaStepProgress}});var r,o=n(86840),i=n(35029),a=n(88965),s=n(8001),c=n(81763),l=n(98499),u=n(57437),d=n(25577),h=n(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var check=function(e){return h.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),r||(r=h.createElement("g",{id:"check"},h.createElement("path",{id:"Icon",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.111 3.25 5.07 8.292 2.778 6"}))))},f=n(64016),p=n.n(f),g=n(2265),x=n(21377),m=n(35069),v=n(42744),_=n.n(v);function StepCheck(e){var t=e.noProgress,n=e.step,r=e.progress,o=e.currentStep,l=e.tip,h=(0,s._)(e,["noProgress","step","progress","currentStep","tip"]),f=(0,c._)((0,g.useState)(0),2);return f[0],f[1],(0,u.jsxs)(d.Z,(0,a._)((0,i._)({},h),{className:_()(p()["step-checker"]),children:[o===n&&!t&&100!==r&&r>=0&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("svg",{className:p()["progress-circle"],width:20,height:20,children:[(0,u.jsx)("circle",{stroke:"var(--inactive-color)"}),(0,u.jsx)("circle",{stroke:"var(--color)",style:{strokeDasharray:" calc(\n          2 * 3.1415 * (20 - 3) / 2 *\n          (".concat(r," / 100)\n          ), 1000")}})]})}),t&&(0,u.jsx)(d.Z,{className:p().bg}),(o>n||o===n&&100===r)&&(0,u.jsx)(d.Z,{className:p()["icon-container"],children:(0,u.jsx)(check,{})}),(0,u.jsx)(d.Z,{className:(0,m.zk)([p().tip,o>n||o===n&&100===r?p().active:""]),children:l})]}))}function MetaStepProgress(e){var t=(0,c._)((0,g.useState)({totalProgress:0,currentStepProgress:0,step:1}),2),n=t[0],r=t[1],i=(0,c._)((0,g.useState)(e.tips||[{text:"问题分析",subProgress:!0},{text:"全网搜索",subProgress:!1},{text:"整理答案",subProgress:!1},{text:"完成",subProgress:!1}]),2),a=i[0],s=i[1];x.vs.useRegister("progress",{onProgress:function(e){r(e)},updateStepTips:function(e,t,n){(a[e].text!==t||void 0!==n&&n!==a[e].subProgress)&&(a[e].text=t,void 0!==n&&(a[e].subProgress=n),s((0,l._)(a)))}},[a]);var h="column"===e.direction;return(0,u.jsx)(d.Z,{sx:h?{}:{height:"60px"},children:(0,u.jsxs)(d.Z,{className:_()([p()["progress-bar-container"]],(0,o._)({},p()["progress-bar-container-direction--column"],h)),children:[(0,u.jsx)(d.Z,{component:"span",className:p().progress,style:(0,o._)({},h?"height":"width",n.totalProgress+"%")}),a.map(function(e,t){return(0,u.jsx)(StepCheck,{tip:e.text,step:t+1,currentStep:n.step,noProgress:!e.subProgress,progress:n.currentStepProgress},t)})]})})}(0,g.forwardRef)(function(e,t){var n=(0,c._)((0,g.useState)({totalProgress:0,currentStepProgress:0,step:1}),2),r=n[0],i=n[1],a=(0,c._)((0,g.useState)(e.tips||[{text:"问题分析",subProgress:!0},{text:"全网搜索",subProgress:!1},{text:"整理答案",subProgress:!1},{text:"完成",subProgress:!1}]),2),s=a[0],h=a[1];(0,g.useImperativeHandle)(t,function(){return{onProgress:i,updateStepTips:function(e,t){s[e].text!==t&&(s[e].text=t,h((0,l._)(s)))}}},[]);var f="column"===e.direction;return(0,u.jsx)(d.Z,{sx:f?{}:{height:"60px"},children:(0,u.jsxs)(d.Z,{className:_()([p()["progress-bar-container"]],(0,o._)({},p()["progress-bar-container-direction--column"],f)),children:[(0,u.jsx)(d.Z,{component:"span",className:p().progress,style:(0,o._)({},f?"height":"width",r.totalProgress+"%")}),s.map(function(e,t){return(0,u.jsx)(StepCheck,{tip:e.text,step:t+1,currentStep:r.step,noProgress:!e.subProgress,progress:r.currentStepProgress},t)})]})})}).displayName="MetaStepProgressWithRef"},21366:function(e,t,n){"use strict";var r=n(35029),o=n(88965),i=n(8001),a=n(57437),s=n(2265),c=n(73701),l=n(39279),u=n(15795),d=n(66988),h=n(68395),f=n(25727),p=n.n(f),g=n(52947),x=n(45487),m=n(82748),v=(0,s.forwardRef)(function(e,t){var n=e.head,f=e.body,p=e.className,g=e.sx,x=e.containerSx,m=e.onBodyScroll,v=(0,i._)(e,["head","body","className","sx","containerSx","onBodyScroll"]),_=(0,s.useRef)(null),b=(0,s.useRef)(null),w=(0,s.useRef)(null);return(0,s.useImperativeHandle)(t,function(){return{containerRef:_,headRef:b,tableRef:w}},[]),(0,a.jsx)(u.Z,{sx:(0,r._)({overflowX:"initial",width:"100%"},x),ref:_,className:"meta-component ".concat(p," "),component:h.Z,onScroll:m,children:(0,a.jsxs)(c.Z,(0,o._)((0,r._)({sx:(0,r._)({minWidth:650,tableLayout:"fixed"},g),"aria-label":"simple table"},v),{ref:w,children:[(0,a.jsx)(d.Z,{ref:b,sx:{zIndex:2,"& th":{position:"sticky",top:0,zIndex:2,textWrap:"nowrap"}},children:n}),(0,a.jsx)(l.Z,{children:f})]}))})});t.ZP=v;var _=(0,s.createContext)(void 0);(0,s.forwardRef)(function(e,t){var n=(0,s.useContext)(_),i=(0,g.YF)({transform:!0,elements:{reference:n}}),c=i.refs,l=(i.floatingStyles,i.x,i.y),u=(i.context,i.elements),h=i.update,f=(0,m.a8)();return(0,s.useLayoutEffect)(function(){if(f){var e=u.reference;if(e&&u.floating){var t=e instanceof HTMLElement&&e.previousElementSibling||e;return(0,x.Me)(t,u.floating,h)}}},[h,f]),(0,s.useImperativeHandle)(t,function(){return c.floating.current},[c.floating]),(0,a.jsx)(d.Z,(0,o._)((0,r._)({},p()(e,["children","style"])),{style:(0,r._)({transform:"translateY(".concat(l,"px)")},e.style),ref:c.setFloating,children:e.children}))}).displayName="MetaTableHead"},27151:function(e){e.exports={root:"action-button_root__sSsRZ","tag-style":"action-button_tag-style__s5ZfP",content:"action-button_content__Mme1N","tag-content":"action-button_tag-content__FgeJ9","arrow-icon":"action-button_arrow-icon__nU_MF","arrow-icon-reverse":"action-button_arrow-icon-reverse__K670b"}},35805:function(e){e.exports={toolBar:"CaseMindMapping_toolBar__vz_Vu",toolBarItem:"CaseMindMapping_toolBarItem__swsAA",outLineContent:"CaseMindMapping_outLineContent__40wwF",outLineNumContainer:"CaseMindMapping_outLineNumContainer__r8I3F",isLineBreakStyle:"CaseMindMapping_isLineBreakStyle__Ah_hE",isH5LineBreakStyle:"CaseMindMapping_isH5LineBreakStyle__ShRYQ",outLineMarkdownContainer:"CaseMindMapping_outLineMarkdownContainer__8ieZL",mindMappingReferenceDot:"CaseMindMapping_mindMappingReferenceDot__o2IPW"}},51060:function(e){e.exports={"reference-dot":"search-kits_reference-dot__0Dldr","search-box":"search-kits_search-box__x8bDM","search-box-h5":"search-kits_search-box-h5__BSkJA","search-box-desktop":"search-kits_search-box-desktop__h7Bzi",active:"search-kits_active__Pn0cx","menu-item":"search-kits_menu-item__D9SWz","home-search-box":"search-kits_home-search-box__k3GoF",rightToolTabTitle:"search-kits_rightToolTabTitle__wQYhR",centerBox:"search-kits_centerBox__guu55",rightToolMenuItemContainer:"search-kits_rightToolMenuItemContainer__B2HRT",divider:"search-kits_divider__zQagA",rightToolMenuItem:"search-kits_rightToolMenuItem__d2Hd_",eventDesTag:"search-kits_eventDesTag__A5Nnn","pc-event-box":"search-kits_pc-event-box__SirOb","h5-event-time-box":"search-kits_h5-event-time-box__yMZpB","h5-event-time":"search-kits_h5-event-time__dmzFG","h5-event-name":"search-kits_h5-event-name__uaWiW","quick-access-loading":"search-kits_quick-access-loading__T4pc7","quick-access":"search-kits_quick-access__3_PQo","access-type":"search-kits_access-type__Y4RMA","access-detail":"search-kits_access-detail__WvmBd","access-icon":"search-kits_access-icon__OgHHc","access-icon-hide":"search-kits_access-icon-hide__iM811","access-name":"search-kits_access-name__bbetp","access-link":"search-kits_access-link__zL2Xp","search-range":"search-kits_search-range__Il_Bn",collapse:"search-kits_collapse__Ifo1q",expand:"search-kits_expand__ahTIE","range-item":"search-kits_range-item__wqRmK","range-item-name":"search-kits_range-item-name__XNakE","select-popover":"search-kits_select-popover__LzBLd",title:"search-kits_title__UX4Az",extension:"search-kits_extension__0RBqr","mode-item-container":"search-kits_mode-item-container__gyBjQ","mode-item":"search-kits_mode-item__oGeMl","list-title":"search-kits_list-title__ksXhJ","search-setting-actions":"search-kits_search-setting-actions__bEF0x","item-button":"search-kits_item-button__XMOzd","active-item-button":"search-kits_active-item-button__lybLw","primary-btn":"search-kits_primary-btn__ruYXS","ref-title":"search-kits_ref-title__IazbV","ref-link":"search-kits_ref-link__e71N8","ref-expand":"search-kits_ref-expand__JKXLu","ref-container":"search-kits_ref-container__Mguq4","ref-author":"search-kits_ref-author__apuZ9","append-setting-container":"search-kits_append-setting-container__9Ifss","append-setting-icon-button":"search-kits_append-setting-icon-button__HMlRQ","button-active":"search-kits_button-active__rsEBj","append-search-textarea":"search-kits_append-search-textarea__HrlV4","search-setting-content":"search-kits_search-setting-content___B4Lx","search-setting-popover":"search-kits_search-setting-popover__BGWV_"}},64016:function(e){e.exports={"step-checker":"meta-step-progress_step-checker__WOnDW","progress-bar-container-direction--column":"meta-step-progress_progress-bar-container-direction--column__JU7ki",bg:"meta-step-progress_bg___9L68","progress-bar-container":"meta-step-progress_progress-bar-container__dGlem",progress:"meta-step-progress_progress__97cyu",active:"meta-step-progress_active__X07an","icon-container":"meta-step-progress_icon-container__J_Va6",rotate:"meta-step-progress_rotate__D8bZH",tip:"meta-step-progress_tip__RraZ5","progress-circle":"meta-step-progress_progress-circle__Zgifl"}},7951:function(e){e.exports={"search-consult-input-wrapper":"search-consult-input_search-consult-input-wrapper__n65cu",shadow:"search-consult-input_shadow__qsBXK","search-consult-input-partition":"search-consult-input_search-consult-input-partition__uoHkZ","search-consult-textarea":"search-consult-input_search-consult-textarea__8KI6O","search-consult-textarea-icon":"search-consult-input_search-consult-textarea-icon__cRTpx","search-consult-textarea-root":"search-consult-input_search-consult-textarea-root__DJbK3","clear-btn":"search-consult-input_clear-btn__cO7TY","menu-item":"search-consult-input_menu-item__2ISFE","engine-chip":"search-consult-input_engine-chip__mAkPI"}}}]);