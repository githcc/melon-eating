!function(){"use strict";var b=function(){return b=Object.assign||function(d){for(var a,b=1,e=arguments.length,c;b<e;b++)for(c in a=arguments[b])Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d},b.apply(this,arguments)},h,x,C,ap,j,r,G,aa,H,$,ac,ad,aq,P,au,az,l,ax,w,I,F,J,L,m,f,ar,p,al,v,ab,_,g,ae,S,ag,z,ai,aj,R,n,an,ao,W,Q,O,at,N,av,s;function E(c,d,a,b){return new(a||(a=Promise))(function(g,f){function h(a){try{e(b.next(a))}catch(a){f(a)}}function i(a){try{e(b.throw(a))}catch(a){f(a)}}function e(c){var b;c.done?g(c.value):(b=c.value,b instanceof a?b:new a(function(a){a(b)})).then(h,i)}e((b=b.apply(c,d||[])).next())})}function D(g,h){var f,c,a,d,b={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return d={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function e(e){return function(i){return function(e){if(f)throw new TypeError("Generator is already executing.");for(;d&&(d=0,e[0]&&(b=0)),b;)try{if(f=1,c&&(a=2&e[0]?c.return:e[0]?c.throw||((a=c.return)&&a.call(c),0):c.next)&&!(a=a.call(c,e[1])).done)return a;switch(c=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return b.label++,{value:e[1],done:!1};case 5:b.label++,c=e[1],e=[0];continue;case 7:e=b.ops.pop(),b.trys.pop();continue;default:if(!(a=b.trys,(a=a.length>0&&a[a.length-1])||6!==e[0]&&2!==e[0])){b=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){b.label=e[1];break}if(6===e[0]&&b.label<a[1]){b.label=a[1],a=e;break}if(a&&b.label<a[2]){b.label=a[2],b.ops.push(e);break}a[2]&&b.ops.pop(),b.trys.pop();continue}e=h.call(g,b)}catch(a){e=[6,a],c=0}finally{f=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,i])}}}function o(d,b,e){if(e||2===arguments.length)for(var c,a=0,f=b.length;a<f;a++)!c&&a in b||(c||(c=Array.prototype.slice.call(b,0,a)),c[a]=b[a]);return d.concat(c||Array.prototype.slice.call(b))}function c(b=void 0){const c=!!globalThis.window&&!!globalThis.window.document&&!!globalThis.window.location;return!c&&b&&a().warn(b),c}function t(a=void 0){if(!c())throw new Error(a||"window' is not available. Seems like this code runs outside browser environment. It shouldn't happen");return window}"function"==typeof SuppressedError&&SuppressedError,h={DEBUG:{name:"DEBUG",severity:10},INFO:{name:"INFO",severity:100},WARN:{name:"WARN",severity:1e3},ERROR:{name:"ERROR",severity:1e4},NONE:{name:"NONE",severity:1e4}},x=null;function a(){return x||(x=T())}function T(e){var f=c()&&window.__eventNLogLevel,a=h.WARN,b,d;return f?(b=h[f.toUpperCase()],b&&b>0&&(a=b)):e&&(a=e),d={minLogLevel:a},Object.values(h).forEach(function(c){var b=c.name,e=c.severity;d[b.toLowerCase()]=function(){for(var c=[],d=0,h,f,g;d<arguments.length;d++)c[d]=arguments[d];e>=a.severity&&c.length>0&&(h=c[0],f=c.splice(1),g="[J-"+b+"] "+h,"DEBUG"===b||"INFO"===b?console.log.apply(console,o([g],f,!1)):"WARN"===b?console.warn.apply(console,o([g],f,!1)):console.error.apply(console,o([g],f,!1)))}}),function(b,d){if(c()){var a=window;a.__usermavenDebug||(a.__usermavenDebug={}),a.__usermavenDebug[b]=d}}("logger",d),d}function aw(k,j,c){void 0===c&&(c={});try{var h=c.maxAge,i=c.domain,f=c.path,e=c.expires,l=c.httpOnly,g=c.secure,d=c.sameSite,b=k+"="+encodeURIComponent(j);if(i&&(b+="; domain="+i),b+=f?"; path="+f:"; path=/",e&&(b+="; expires="+e.toUTCString()),h&&(b+="; max-age="+h),l&&(b+="; httponly"),g&&(b+="; secure"),d)switch("string"==typeof d?d.toLowerCase():d){case!0:b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"strict":b+="; SameSite=Strict";break;case"none":b+="; SameSite=None"}else g&&(b+="; SameSite=None");return b}catch(b){return a().error("serializeCookie",b),""}}ap=function(){if(c())return function(a){var c=a.split("."),b;return 4===c.length&&c.every(function(a){return!isNaN(a)})?a:(b=function(b){var a=b.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i);return a?a[0]:""}(a),b||(b=function(d){var c=function(a){return(a.indexOf("//")>-1?a.split("/")[2]:a.split("/")[0]).split(":")[0].split("?")[0]}(d),a=c.split("."),b=a.length;return b>2&&(2==a[b-1].length?(c=a[b-2]+"."+a[b-1],2==a[b-2].length&&(c=a[b-3]+"."+c)):c=a[b-2]+"."+a[b-1]),c}(a)),b)}(window.location.hostname)};function am(f){var d,e,a,c,b;if(!f)return{};for(d={},e=f.split(";"),a=0;a<e.length;a++)c=e[a],b=c.indexOf("="),b>0&&(d[c.substr(a>0?1:0,a>0?b-1:b)]=c.substr(b+1));return d}function ak(a,b){return Array.from(a.attributes).forEach(function(a){b.setAttribute(a.nodeName,a.nodeValue)})}function ah(e,f){var a,b,d,c;e.innerHTML=f,b=e.getElementsByTagName("script");for(a=b.length-1;a>=0;a--)d=b[a],c=document.createElement("script"),ak(d,c),d.innerHTML&&(c.innerHTML=d.innerHTML),c.setAttribute("data-usermaven-tag-id",e.id),document.getElementsByTagName("head")[0].appendChild(c),b[a].parentNode.removeChild(b[a])}j=function(f){var d,e,c,b;if(!f)return null;try{for(d=f+"=",e=t().document.cookie.split(";"),c=0;c<e.length;c++){for(b=e[c];" "==b.charAt(0);)b=b.substring(1,b.length);if(0===b.indexOf(d))return decodeURIComponent(b.substring(d.length,b.length))}}catch(b){a().error("getCookies",b)}return null},r=function(b,c,a){void 0===a&&(a={}),t().document.cookie=aw(b,c,a)},G=function(b,a){void 0===a&&(a="/"),document.cookie=b+"= ; SameSite=Strict; expires = Thu, 01 Jan 1970 00:00:00 GMT"+(a?"; path = "+a:"")},aa=function(){return Math.random().toString(36).substring(2,12)},H=function(){return Math.random().toString(36).substring(2,7)},$={utm_source:"source",utm_medium:"medium",utm_campaign:"campaign",utm_term:"term",utm_content:"content"},ac={gclid:!0,fbclid:!0,dclid:!0},ad=function(){function a(){this.queue=[]}return a.prototype.flush=function(){var a=this.queue;return this.queue=[],a},a.prototype.push=function(){for(var b,c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];(b=this.queue).push.apply(b,c)},a}(),aq=function(){function a(a){this.key=a}return a.prototype.flush=function(){var a=this.get();return a.length&&this.set([]),a},a.prototype.push=function(){for(var c=[],a=0,b;a<arguments.length;a++)c[a]=arguments[a];b=this.get(),b.push.apply(b,c),this.set(b)},a.prototype.set=function(a){localStorage.setItem(this.key,JSON.stringify(a))},a.prototype.get=function(){var a=localStorage.getItem(this.key);return null!==a&&""!==a?JSON.parse(a):[]},a}(),P=Object.prototype,au=P.toString,az=P.hasOwnProperty,l=Array.prototype.forEach,ax=Array.isArray,w={},I=ax||function(a){return"[object Array]"===au.call(a)};function M(a,c,d){if(Array.isArray(a))if(l&&a.forEach===l)a.forEach(c,d);else if("length"in a&&a.length===+a.length)for(var b=0,e=a.length;b<e;b++)if(b in a&&c.call(d,a[b],b)===w)return}F=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function d(a,d,e){var b,f,c;if(null!=a)if(l&&Array.isArray(a)&&a.forEach===l)a.forEach(d,e);else if("length"in a&&a.length===+a.length){for(b=0,f=a.length;b<f;b++)if(b in a&&d.call(e,a[b],b)===w)return}else for(c in a)if(az.call(a,c)&&d.call(e,a[c],c)===w)return}J=function(b){for(var c=[],a=1;a<arguments.length;a++)c[a-1]=arguments[a];return M(c,function(a){for(var c in a)void 0!==a[c]&&(b[c]=a[c])}),b};function i(a,b){return-1!==a.indexOf(b)}L=function(a){try{return/^\s*\bfunction\b/.test(a)}catch(a){return!1}},m=function(a){return void 0===a},f=function(){function b(a){return a&&(a.preventDefault=b.preventDefault,a.stopPropagation=b.stopPropagation),a}return b.preventDefault=function(){this.returnValue=!1},b.stopPropagation=function(){this.cancelBubble=!0},function(c,d,e,g,h){if(c)if(c.addEventListener&&!g)c.addEventListener(d,e,!!h);else{var f="on"+d,i=c[f];c[f]=function(c,d,a){return function(e){var f,g,h;if(e=e||b(window.event))return g=!0,L(a)&&(f=a(e)),h=d.call(c,e),!1!==f&&!1!==h||(g=!1),g}}(c,e,i)}else a().error("No valid element provided to register_event")}}(),ar=function(b){return function(){for(var d=[],c=0;c<arguments.length;c++)d[c]=arguments[c];try{return b.apply(this,d)}catch(b){a().error("Implementation error. Please turn on debug and contact support@usermaven.com.",b)}}},p="undefined"!=typeof Symbol?Symbol("__deepCircularCopyInProgress__"):"__deepCircularCopyInProgress__";function y(a,c,e){return a!==Object(a)?c?c(a,e):a:a[p]?void 0:(a[p]=!0,I(a)?(b=[],M(a,function(a){b.push(y(a,c))})):(b={},d(a,function(d,a){a!==p&&(b[a]=y(d,c,a))})),delete a[p],b);var b}al=["$performance_raw"];function af(b,a){return y(b,function(b,c){return c&&al.indexOf(c)>-1?b:"string"==typeof b&&null!==a?b.slice(0,a):b})}function q(a){switch(typeof a.className){case"string":return a.className;case"object":return("baseVal"in a.className?a.className.baseVal:null)||a.getAttribute("class")||"";default:return""}}function U(a){var b="";return u(a)&&!Z(a)&&a.childNodes&&a.childNodes.length&&d(a.childNodes,function(a){X(a)&&a.textContent&&(b+=F(a.textContent).split(/(\s+)/).filter(k).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),F(b)}function V(a){return!!a&&1===a.nodeType}function e(a,b){return!!a&&!!a.tagName&&a.tagName.toLowerCase()===b.toLowerCase()}function X(a){return!!a&&3===a.nodeType}function Y(a){return!!a&&11===a.nodeType}v=["a","button","form","input","select","textarea","label"];function u(a){for(var b=a,c,d,f;b.parentNode&&!e(b,"body");b=b.parentNode)if(c=q(b).split(" "),i(c,"ph-sensitive")||i(c,"ph-no-capture"))return!1;if(i(q(a).split(" "),"ph-include"))return!0;if(d=a.type||"","string"==typeof d)switch(d.toLowerCase()){case"hidden":case"password":return!1}if(f=a.name||a.id||"","string"==typeof f)if(/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(f.replace(/[^a-zA-Z0-9]/g,"")))return!1;return!0}function Z(a){return!!(e(a,"input")&&!["button","checkbox","submit","reset"].includes(a.type)||e(a,"select")||e(a,"textarea")||"true"===a.getAttribute("contenteditable"))}function k(a){if(null===a||m(a))return!1;if("string"==typeof a){if(a=F(a),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((a||"").replace(/[- ]/g,"")))return!1;if(/(^\d{3}-?\d{2}-?\d{4}$)/.test(a))return!1}return!0}ab=function(){function a(b,a){void 0===a&&(a=!1),this.clicks=[],this.instance=b,this.enabled=a}return a.prototype.click=function(b,c,d){if(this.enabled){var a=this.clicks[this.clicks.length-1];a&&Math.abs(b-a.x)+Math.abs(c-a.y)<30&&d-a.timestamp<1e3?(this.clicks.push({x:b,y:c,timestamp:d}),3===this.clicks.length&&this.instance.capture("$rageclick")):this.clicks=[{x:b,y:c,timestamp:d}]}},a}(),_=function(){function a(a){this.instance=a,this.lastScrollDepth=0,this.canSend=!0,this.documentElement=document.documentElement}return a.prototype.track=function(){var a=this.getScrollDepth();a>this.lastScrollDepth&&(this.lastScrollDepth=a,this.canSend=!0)},a.prototype.send=function(a){if(void 0===a&&(a="$scroll"),this.canSend){var b={percent:this.lastScrollDepth,window_height:this.getWindowHeight(),document_height:this.getDocumentHeight(),scroll_distance:this.getScrollDistance()};this.instance.capture(a,b),this.canSend=!1}},a.prototype.getScrollDepth=function(){try{var a=this.getWindowHeight(),b=this.getDocumentHeight(),c=this.getScrollDistance(),d=b-a;return Math.min(100,Math.floor(c/d*100))}catch(a){return 0}},a.prototype.getWindowHeight=function(){try{return window.innerHeight||this.documentElement.clientHeight||document.body.clientHeight||0}catch(a){return 0}},a.prototype.getDocumentHeight=function(){try{return Math.max(document.body.scrollHeight||0,this.documentElement.scrollHeight||0,document.body.offsetHeight||0,this.documentElement.offsetHeight||0,document.body.clientHeight||0,this.documentElement.clientHeight||0)}catch(a){return 0}},a.prototype.getScrollDistance=function(){try{return window.scrollY||window.pageYOffset||document.body.scrollTop||this.documentElement.scrollTop||0}catch(a){return 0}},a}(),g={_initializedTokens:[],_previousElementSibling:function(b){if(b.previousElementSibling)return b.previousElementSibling;var a=b;do a=a.previousSibling;while(a&&!V(a))return a},_getPropertiesFromElement:function(a,i,j){var f=a.tagName.toLowerCase(),b={tag_name:f},g,h,e,c;v.indexOf(f)>-1&&!j&&(b.$el_text=U(a)),g=q(a),g.length>0&&(b.classes=g.split(" ").filter(function(a){return""!==a})),d(a.attributes,function(c){var d;Z(a)&&-1===["name","id","class"].indexOf(c.name)||!i&&k(c.value)&&("string"!=typeof(d=c.name)||"_ngcontent"!==d.substring(0,10)&&"_nghost"!==d.substring(0,7))&&(b["attr__"+c.name]=c.value)});for(h=1,e=1,c=a;c=this._previousElementSibling(c);)h++,c.tagName===a.tagName&&e++;return b.nth_child=h,b.nth_of_type=e,b},_getDefaultProperties:function(a){return{$event_type:a,$ce_version:1}},_extractCustomPropertyValue:function(b){var a=[];return d(document.querySelectorAll(b.css_selector),function(b){var c;["input","select"].indexOf(b.tagName.toLowerCase())>-1?c=b.value:b.textContent&&(c=b.textContent),k(c)&&a.push(c)}),a.join(", ")},_getCustomProperties:function(b){var c=this,a={};return d(this._customProperties,function(e){d(e.event_selectors,function(f){d(document.querySelectorAll(f),function(d){i(b,d)&&u(d)&&(a[e.name]=c._extractCustomPropertyValue(e))})})}),a},_getEventTarget:function(a){var b;return void 0===a.target?a.srcElement||null:(null===(b=a.target)||void 0===b?void 0:b.shadowRoot)?a.composedPath()[0]||null:a.target||null},_captureEvent:function(a,n,f){var l,o=this,c=this._getEventTarget(a),j,b,g,h,m,p;if(X(c)&&(c=c.parentNode||null),"scroll"===a.type)return this.scrollDepth.track(),!0;if("visibilitychange"===a.type&&"hidden"===document.visibilityState||"popstate"===a.type)return this.scrollDepth.send(),!0;if("click"===a.type&&a instanceof MouseEvent&&(null===(l=this.rageclicks)||void 0===l||l.click(a.clientX,a.clientY,(new Date).getTime())),c&&function(a,c){var f,g,d,b,h,i,j;if(!a||e(a,"html")||!V(a))return!1;if(a.classList&&a.classList.contains("um-no-capture"))return!1;for(f=!1,g=[a],d=!0,b=a;b.parentNode&&!e(b,"body");)if(Y(b.parentNode))g.push(b.parentNode.host),b=b.parentNode.host;else{if(!(d=b.parentNode||!1))break;v.indexOf(d.tagName.toLowerCase())>-1?f=!0:(h=window.getComputedStyle(d),h&&"pointer"===h.getPropertyValue("cursor")&&(f=!0)),g.push(d),b=d}if(i=window.getComputedStyle(a),i&&"pointer"===i.getPropertyValue("cursor")&&"click"===c.type)return!0;switch(j=a.tagName.toLowerCase(),j){case"html":return!1;case"form":return"submit"===c.type;case"input":case"select":case"textarea":return"change"===c.type||"click"===c.type;default:return f?"click"===c.type:"click"===c.type&&(v.indexOf(j)>-1||"true"===a.getAttribute("contenteditable"))}}(c,a)){for(j=[c],b=c;b.parentNode&&!e(b,"body");)Y(b.parentNode)?(j.push(b.parentNode.host),b=b.parentNode.host):(j.push(b.parentNode),b=b.parentNode);return!(h=[],m=!1,d(j,function(a){var b=u(a);"a"===a.tagName.toLowerCase()&&(g=a.getAttribute("href"),g=b&&k(g)&&g),i(q(a).split(" "),"ph-no-capture")&&(m=!0),h.push(o._getPropertiesFromElement(a,null==f?void 0:f.mask_all_element_attributes,null==f?void 0:f.mask_all_text))}),(null==f?void 0:f.mask_all_text)||(h[0].$el_text=U(c)),g&&(h[0].attr__href=g),m)&&(p=J(this._getDefaultProperties(a.type),{$elements:h},this._getCustomProperties(j)),n.capture("$autocapture",p),!0)}},_navigate:function(a){window.location.href=a},_addDomEventHandlers:function(b,c){var d=this,a=function(a){a=a||window.event,d._captureEvent(a,b,c)};f(document,"submit",a,!1,!0),f(document,"change",a,!1,!0),f(document,"click",a,!1,!0),f(document,"visibilitychange",a,!1,!0),f(document,"scroll",a,!1,!0),f(window,"popstate",a,!1,!0)},_customProperties:[],rageclicks:null,scrollDepth:null,opts:{},init:function(a,b){var c=this;if(this.rageclicks=new ab(a),this.scrollDepth=new _(a),this.opts=b,!document||!document.body)return console.debug("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(function(){c.readyAutocapture(a,b)},500);this.readyAutocapture(a,b)},readyAutocapture:function(a,b){this._addDomEventHandlers(a,b)},enabledForProject:function(c,a,b){if(!c)return!0;a=m(a)?10:a,b=m(b)?10:b;for(var e=0,d=0;d<c.length;d++)e+=c.charCodeAt(d);return e%a<b},isBrowserSupported:function(){return L(document.querySelectorAll)}},!function(a){for(var b in a)"function"==typeof a[b]&&(a[b]=a[b].bind(a))}(g),function(a){for(var b in a)"function"==typeof a[b]&&(a[b]=ar(a[b]))}(g),ae=function(){function a(b,a){void 0===a&&(a="all"),this.instance=b,this.trackingType=a,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this.track.bind(this)):this.track()}return a.prototype.track=function(){var a=this;this.formElements=document.querySelectorAll("form"),"tagged"===this.trackingType&&(this.formElements=document.querySelectorAll("form[data-um-form]")),this.formElements.forEach(function(b){b.addEventListener("submit",function(b){var c=b.target,d=a._getFormDetails(c);a.instance.capture("$form",function(a){for(var b in a)(""===a[b]||null===a[b]||void 0===a[b]||"object"==typeof a[b]&&0===Object.keys(a[b]).length)&&delete a[b];return a}(d))})})},a.getInstance=function(c,b){return void 0===b&&(b="all"),a.instance||(a.instance=new a(c,b)),a.instance},a.prototype._getFormDetails=function(a){var c=this,b={form_id:a.id,form_name:a.name||"",form_action:a.action,form_method:a.method},d=a.querySelectorAll("input, select, textarea");return Array.from(d).filter(function(a){return!a.classList.contains("um-no-capture")}).forEach(function(a,d){var e=c._getFieldProps(a,d);Object.assign(b,e)}),b},a.prototype._getFieldProps=function(a,c){var b,d=Object.keys(a.dataset).length?JSON.stringify(a.dataset):void 0,e=this.getSafeText(a);return(b={})["field_"+(c+1)+"_tag"]=a.tagName.toLowerCase(),b["field_"+(c+1)+"_type"]=a instanceof HTMLInputElement?a.type:void 0,b["field_"+(c+1)+"_data_attributes"]=d,b["field_"+(c+1)+"_id"]=a.id,b["field_"+(c+1)+"_value"]=e,b["field_"+(c+1)+"_class"]=a.className,b["field_"+(c+1)+"_name"]=a.name,b},a.prototype.getSafeText=function(a){var b="";return"value"in a&&"password"!==a.type?b=a.value:a.hasChildNodes()?b=Array.from(a.childNodes).filter(function(a){return a.nodeType===Node.TEXT_NODE}).map(function(a){return a.textContent}).join(""):b=a.textContent||"",this._scrubPotentiallySensitiveValues(b)},a.prototype._scrubPotentiallySensitiveValues=function(a){return this._shouldCaptureValue(a)?a:"<redacted>"},a.prototype._shouldCaptureValue=function(a){if(this._isNullish(a))return!1;if(this._isString(a)){if(a=this._trim(a),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((a||"").replace(/[- ]/g,"")))return!1;if(/(^\d{3}-?\d{2}-?\d{4}$)/.test(a))return!1}return!0},a.prototype._isNullish=function(a){return null==a},a.prototype._isString=function(a){return"string"==typeof a||a instanceof String},a.prototype._trim=function(a){return a.trim().replace(/^\s+|\s+$/g,"")},a}(),S="production",ag="1.4.0/"+S+"@"+"2024-03-13T07:14:20.996Z",z=316224e3,ai=function(c,b){a().debug("Sending beacon",b);var d=new Blob([b],{type:"text/plain"});return navigator.sendBeacon(c,d),Promise.resolve()},aj=function(a,b){return console.debug("Jitsu client tried to send payload to "+a,function(a){if("string"==typeof a)try{return JSON.stringify(JSON.parse(a),null,2)}catch(b){return a}}(b)),Promise.resolve()};function A(b,a){void 0===a&&(a=void 0),""!=(a=null!=a?a:window.location.pathname)&&"/"!=a&&(G(b,a),A(b,a.slice(0,a.lastIndexOf("/"))))}R=function(){function b(a,b){this.cookieDomain=a,this.cookieName=b}return b.prototype.save=function(a){r(this.cookieName,JSON.stringify(a),{domain:this.cookieDomain,secure:"http:"!==document.location.protocol,maxAge:z})},b.prototype.restore=function(){var c,b;if(A(this.cookieName),c=j(this.cookieName),c)try{return b=JSON.parse(decodeURIComponent(c)),"object"!=typeof b?void a().warn("Can't restore value of "+this.cookieName+"@"+this.cookieDomain+", expected to be object, but found "+("object"!=typeof b)+": "+b+". Ignoring"):b}catch(b){return void a().error("Failed to decode JSON from "+c,b)}},b.prototype.delete=function(){G(this.cookieName)},b}(),n=function(){function a(){}return a.prototype.save=function(a){},a.prototype.restore=function(){},a.prototype.delete=function(){},a}(),an={getSourceIp:function(){},describeClient:function(){return{referer:document.referrer,url:window.location.href,page_title:document.title,doc_path:document.location.pathname,doc_host:document.location.hostname,doc_search:window.location.search,screen_resolution:screen.width+"x"+screen.height,vp_size:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)+"x"+Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),user_agent:navigator.userAgent,user_language:navigator.language,doc_encoding:document.characterSet}},getAnonymousId:function(d){var b=d.name,i=d.domain,g=d.crossDomainLinking,m=void 0===g||g,n,h,l,c,k,e,f;if(A(b),m)if(n=new URLSearchParams(window.location.search).get("_um"),h=window.location.hash.substring(1).split("~"),l=h.length>1?h[1]:void 0,c=n||l,c)return a().debug("Existing user id from other domain",c),k=j(b),k&&k===c||r(b,c,{domain:i,secure:"http:"!==document.location.protocol,maxAge:z}),c;return e=j(b),e?(a().debug("Existing user id",e),e):(f=aa(),a().debug("New user id",f),r(b,f,{domain:i,secure:"http:"!==document.location.protocol,maxAge:z}),f)}},ao={getSourceIp:function(){},describeClient:function(){return{}},getAnonymousId:function(){return""}},W=function(){return an},Q=function(){return ao},O=function(e,d,f,c){void 0===c&&(c=function(a,b){});var b=new window.XMLHttpRequest;return new Promise(function(h,g){b.onerror=function(b){a().error("Failed to send payload to "+e+": "+((null==b?void 0:b.message)||"unknown error"),d,b),c(-1,{}),g(new Error("Failed to send JSON. See console logs"))},b.onload=function(){200!==b.status?(c(b.status,{}),a().warn("Failed to send data to "+e+" (#"+b.status+" - "+b.statusText+")",d),g(new Error("Failed to send JSON. Error code: "+b.status+". See logs for details"))):c(b.status,b.responseText),h()},b.open("POST",e),b.setRequestHeader("Content-Type","application/json"),Object.entries(f||{}).forEach(function(a){var c=a[0],d=a[1];return b.setRequestHeader(c,d)}),b.send(d),a().debug("sending json",d)})},at=function(){function e(){this.userProperties={},this.groupProperties={},this.permanentProperties={globalProps:{},propsPerEvent:{}},this.cookieDomain="",this.trackingHost="",this.idCookieName="",this.randomizeUrl=!1,this.namespace="usermaven",this.crossDomainLinking=!0,this.formTracking=!1,this.domains=[],this.apiKey="",this.initialized=!1,this._3pCookies={},this.cookiePolicy="keep",this.ipPolicy="keep",this.beaconApi=!1,this.transport=O,this.customHeaders=function(){return{}},this.queue=new ad,this.maxSendAttempts=4,this.retryTimeout=[500,1e12],this.flushing=!1,this.attempt=1,this.propertyBlacklist=[],this.__autocapture_enabled=!1,this.__auto_pageview_enabled=!1,this.trackingHostFallback="https://events.usermaven.com"}return e.prototype.get_config=function(a){return this.config?this.config[a]:null},e.prototype.id=function(c,d){return this.userProperties=b(b({},this.userProperties),c),a().debug("Usermaven user identified",c),this.userIdPersistence?this.userIdPersistence.save(c):a().warn("Id() is called before initialization"),d?Promise.resolve():this.track("user_identify",{})},e.prototype.group=function(c,d){return this.groupProperties=b(b({},this.groupProperties),c),a().debug("Usermaven group identified",c),this.userIdPersistence?this.userIdPersistence.save({company:c}):a().warn("Group() is called before initialization"),d?Promise.resolve():this.track("group",{})},e.prototype.reset=function(c){if(this.userIdPersistence&&this.userIdPersistence.delete(),this.propsPersistance&&this.propsPersistance.delete(),c){var b=j(this.idCookieName);b&&(a().debug("Removing id cookie",b),r(this.idCookieName,"",{domain:this.cookieDomain,expires:new Date(0)}))}return Promise.resolve()},e.prototype.rawTrack=function(a){return this.sendJson(a)},e.prototype.makeEvent=function(f,l,i){var e,a=i.env,k=function(b,e){var d={},a,c;for(a in b)Object.prototype.hasOwnProperty.call(b,a)&&e.indexOf(a)<0&&(d[a]=b[a]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){c=0;for(a=Object.getOwnPropertySymbols(b);c<a.length;c++)e.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(b,a[c])&&(d[a[c]]=b[a[c]])}return d}(i,["env"]),h,g,d,j;return a||(a=c()?W():Q()),this.restoreId(),h=this.getCtx(a),g=b(b({},this.permanentProperties.globalProps),null!==(e=this.permanentProperties.propsPerEvent[f])&&void 0!==e?e:{}),d=b({api_key:this.apiKey,src:l,event_type:f},k),j=a.getSourceIp(),j&&(d.source_ip=j),this.compatMode?b(b(b({},g),{eventn_ctx:h}),d):b(b(b({},g),h),d)},e.prototype._send3p=function(c,d,a){var b="3rdparty",e;return a&&""!==a&&(b=a),e=this.makeEvent(b,c,{src_payload:d}),this.sendJson(e)},e.prototype.sendJson=function(a){return E(this,void 0,Promise,function(){return D(this,function(c){switch(c.label){case 0:return b="false","undefined"!=typeof window&&window.localStorage&&(b=localStorage.getItem("um_exclusion")),null!=b&&"false"!==b?[3,3]:this.maxSendAttempts>1?(this.queue.push([a,0]),this.scheduleFlush(0),[3,3]):[3,1];case 1:return[4,this.doSendJson(a)];case 2:c.sent(),c.label=3;case 3:return[2]}var b})})},e.prototype.doSendJson=function(d){var g=this,e="keep"!==this.cookiePolicy?"&cookie_policy="+this.cookiePolicy:"",f="keep"!==this.ipPolicy?"&ip_policy="+this.ipPolicy:"",h=c()?"/api/v1/event":"/api/v1/s2s/event",b=""+this.trackingHost+h+"?token="+this.apiKey+e+f,i;return this.randomizeUrl&&(b=this.trackingHost+"/api."+H()+"?p_"+H()+"="+this.apiKey+e+f),i=JSON.stringify(d),a().debug("Sending payload to "+b,d.length),this.transport(b,i,this.customHeaders(),function(a,b){return g.postHandle(a,b)})},e.prototype.scheduleFlush=function(b){var c=this,d,e;this.flushing||(this.flushing=!0,void 0===b&&(d=Math.random()+1,e=Math.pow(2,this.attempt++),b=Math.min(this.retryTimeout[0]*d*e,this.retryTimeout[1])),a().debug("Scheduling event queue flush in "+b+" ms."),setTimeout(function(){return c.flush()},b))},e.prototype.flush=function(){return E(this,void 0,Promise,function(){var b,d,e=this;return D(this,function(f){switch(f.label){case 0:if(c()&&!window.navigator.onLine&&(this.flushing=!1,this.scheduleFlush()),b=this.queue.flush(),this.flushing=!1,0===b.length)return[2];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.doSendJson(b.map(function(a){return a[0]}))];case 2:return f.sent(),this.attempt=1,a().debug("Successfully flushed "+b.length+" events from queue"),[3,4];case 3:return f.sent(),this.trackingHost!==this.trackingHostFallback&&(a().debug("Using fallback tracking host "+this.trackingHostFallback+" instead of "+this.trackingHost+" on "+S),this.trackingHost=this.trackingHostFallback),(b=b.map(function(a){return[a[0],a[1]+1]}).filter(function(b){return!(b[1]>=e.maxSendAttempts)||(a().error("Dropping queued event after "+b[1]+" attempts since max send attempts "+e.maxSendAttempts+" reached. See logs for details"),!1)})).length>0?((d=this.queue).push.apply(d,b),this.scheduleFlush()):this.attempt=1,[3,4];case 4:return[2]}})})},e.prototype.postHandle=function(j,b){var d,g,h,i,f,k,l,m,e;if("strict"===this.cookiePolicy||"comply"===this.cookiePolicy){if(200===j)if(d=b,"string"==typeof b&&(d=JSON.parse(b)),!d.delete_cookie)return;this.userIdPersistence.delete(),this.propsPersistance.delete(),G(this.idCookieName)}if(200===j)if(d=b,"string"==typeof b&&b.length>0)if(g=(d=JSON.parse(b)).jitsu_sdk_extras,g&&g.length>0)if(c()){for(h=0,i=g;h<i.length;h++)f=i[h],k=f.type,l=f.id,m=f.value,"tag"===k&&(e=document.createElement("div"),e.id=l,ah(e,m),e.childElementCount>0&&document.body.appendChild(e))}else a().error("Tags destination supported only in browser environment")},e.prototype.getCtx=function(h){var e=new Date,f=h.describeClient()||{},d=b({},this.userProperties),g=d.company||{},a,c,i;return delete d.company,i=b(b({event_id:"",user:b({anonymous_id:"strict"!==this.cookiePolicy?h.getAnonymousId({name:this.idCookieName,domain:this.cookieDomain,crossDomainLinking:this.crossDomainLinking}):""},d),ids:this._getIds(),utc_time:(a=e.toISOString(),c=a.split(".")[1],c?c.length>=7?a:a.slice(0,-1)+"0".repeat(7-c.length)+"Z":a),local_tz_offset:e.getTimezoneOffset()},f),function(b){var c={utm:{},click_id:{}},a,d,e;for(a in b)b.hasOwnProperty(a)&&(d=b[a],e=$[a],e?c.utm[e]=d:ac[a]&&(c.click_id[a]=d));return c}(function(a){var b,d,e,c,f;if(!a)return{};for(b=a.length>0&&"?"===a.charAt(0)?a.substring(1):a,d={},e=("?"===b[0]?b.substr(1):b).split("&"),c=0;c<e.length;c++)f=e[c].split("="),d[decodeURIComponent(f[0])]=decodeURIComponent(f[1]||"");return d}(f.doc_search))),Object.keys(g).length&&(i.company=g),i},e.prototype._getIds=function(){var g,d,b,e,f,a,h;if(!c())return{};for(g=function(a){if(void 0===a&&(a=!1),a&&C)return C;var b=am(document.cookie);return C=b,b}(!1),d={},b=0,e=Object.entries(g);b<e.length;b++)f=e[b],a=f[0],h=f[1],this._3pCookies[a]&&(d["_"==a.charAt(0)?a.substr(1):a]=h);return d},e.prototype.pathMatches=function(a,b){return new URL(b).pathname.match(new RegExp("^"+a.trim().replace(/\*\*/g,".*").replace(/([^\.])\*/g,"$1[^\\s/]*")+"/?$"))},e.prototype.track=function(b,e){var g=this,h=e||{},i,d,f,j;return a().debug("track event of type",b,h),i=c()?W():Q(),d=this.getCtx(i),this.config&&this.config.exclude&&this.config.exclude.length>1&&(null==d?void 0:d.url)&&this.config.exclude.split(",").some(function(a){return g.pathMatches(a.trim(),null==d?void 0:d.url)})?void a().debug("Page is excluded from tracking"):(f=e||{},"$autocapture"!==b&&"user_identify"!==b&&"pageview"!==b&&"$pageleave"!==b&&(f={event_attributes:e}),j=this.makeEvent(b,this.compatMode?"eventn":"usermaven",f),this.sendJson(j))},e.prototype.init=function(d){var f,g,i,j,o,k,p,l,m,q=this,e;if(c()&&!d.force_use_fetch)d.fetch&&a().warn("Custom fetch implementation is provided to Usermaven. However, it will be ignored since Usermaven runs in browser"),this.transport=this.beaconApi?ai:O;else{if(!d.fetch&&!globalThis.fetch)throw new Error("Usermaven runs in Node environment. However, neither UsermavenOptions.fetch is provided, nor global fetch function is defined. \nPlease, provide custom fetch implementation. You can get it via node-fetch package");this.transport=(p=d.fetch||globalThis.fetch,function(c,e,f,d){return void 0===d&&(d=function(a,b){}),E(void 0,void 0,void 0,function(){var g,i,j,h,k,n,l,m;return D(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,p(c,{method:"POST",headers:b({Accept:"application/json","Content-Type":"application/json"},f||{}),body:e})];case 1:return g=o.sent(),[3,3];case 2:return i=o.sent(),a().error("Failed to send data to "+c+": "+((null==i?void 0:i.message)||"unknown error"),e,i),d(-1,{}),[2];case 3:if(200!==g.status)return a().warn("Failed to send data to "+c+" (#"+g.status+" - "+g.statusText+")",e),d(g.status,{}),[2];j={},h="",k=null!==(m=null===(l=g.headers)||void 0===l?void 0:l.get("Content-Type"))&&void 0!==m?m:"",o.label=4;case 4:return o.trys.push([4,6,,7]),[4,g.text()];case 5:return h=o.sent(),j=JSON.parse(h),[3,7];case 6:return n=o.sent(),a().error("Failed to parse "+c+" response. Content-type: "+k+" text: "+h,n),[3,7];case 7:try{d(g.status,j)}catch(b){a().error("Failed to handle "+c+" response. Content-type: "+k+" text: "+h,b)}return[2]}})})})}d.custom_headers&&"function"==typeof d.custom_headers?this.customHeaders=d.custom_headers:d.custom_headers&&(this.customHeaders=function(){return d.custom_headers}),"echo"===d.tracking_host&&(a().warn('jitsuClient is configured with "echo" transport. Outgoing requests will be written to console'),this.transport=aj),d.ip_policy&&(this.ipPolicy=d.ip_policy),d.cookie_policy&&(this.cookiePolicy=d.cookie_policy),"strict"===d.privacy_policy&&(this.ipPolicy="strict",this.cookiePolicy="strict"),d.use_beacon_api&&navigator.sendBeacon&&(this.beaconApi=!0),"comply"===this.cookiePolicy&&this.beaconApi&&(this.cookiePolicy="strict"),d.log_level&&(l=d.log_level,(m=h[l.toLocaleUpperCase()])||(console.warn("Can't find log level with name "+l.toLocaleUpperCase()+", defaulting to INFO"),m=h.INFO),x=T(m)),this.initialOptions=d,a().debug("Initializing Usemaven Tracker tracker",d,ag),d.key?(this.compatMode=void 0!==d.compat_mode&&!!d.compat_mode,this.cookieDomain=d.cookie_domain||ap(),this.namespace=d.namespace||"usermaven",this.crossDomainLinking=null===(f=d.cross_domain_linking)||void 0===f||f,this.formTracking=null!==(g=d.form_tracking)&&void 0!==g&&g,this.domains=d.domains?d.domains.split(",").map(function(a){return a.trim()}):[],this.trackingHost=function(a){for(;b="/",-1!==(c=a).indexOf(b,c.length-b.length);)a=a.substr(0,a.length-1);var c,b;return 0===a.indexOf("https://")||0===a.indexOf("http://")?a:"https://"+a}(d.tracking_host||"t.usermaven.com"),this.randomizeUrl=d.randomize_url||!1,this.apiKey=d.key,this.__auto_pageview_enabled=d.auto_pageview||!1,this.idCookieName=d.cookie_name||"__eventn_id_"+d.key,"strict"===this.cookiePolicy?this.propsPersistance=new n:this.propsPersistance=c()?new R(this.cookieDomain,this.idCookieName+"_props"):new n,"strict"===this.cookiePolicy?this.userIdPersistence=new n:this.userIdPersistence=c()?new R(this.cookieDomain,this.idCookieName+"_usr"):new n,this.propsPersistance&&(e=this.propsPersistance.restore(),e&&(this.permanentProperties=e,this.permanentProperties.globalProps=null!==(i=e.globalProps)&&void 0!==i?i:{},this.permanentProperties.propsPerEvent=null!==(j=e.propsPerEvent)&&void 0!==j?j:{}),a().debug("Restored persistent properties",this.permanentProperties)),this.propertyBlacklist=d.property_blacklist&&d.property_blacklist.length>0?d.property_blacklist:[],this.config=J({},{autocapture:!1,properties_string_max_length:null,property_blacklist:[],sanitize_properties:null,auto_pageview:!1},d||{},this.config||{},{token:this.apiKey}),a().debug("Default Configuration",this.config),this.manageAutoCapture(this.config),this.manageFormTracking(this.config),this.manageCrossDomainLinking({cross_domain_linking:this.crossDomainLinking,domains:this.domains,cookiePolicy:this.cookiePolicy}),!1===d.capture_3rd_party_cookies?this._3pCookies={}:(d.capture_3rd_party_cookies||["_ga","_fbp","_ym_uid","ajs_user_id","ajs_anonymous_id"]).forEach(function(a){return q._3pCookies[a]=!0}),d.ga_hook&&a().warn("GA event interceptor isn't supported anymore"),d.segment_hook&&function(b){var a=window;a.analytics||(a.analytics=[]),b.interceptAnalytics(a.analytics)}(this),c()&&(d.disable_event_persistence||(this.queue=new aq(this.namespace+"-event-queue"),this.scheduleFlush(0)),window.addEventListener("beforeunload",function(){return q.flush()})),this.__auto_pageview_enabled&&function(c){var a=function(){return c.track("pageview")},b=history.pushState;b&&(history.pushState=function(c,d,e){b.apply(this,[c,d,e]),a()},addEventListener("popstate",a)),addEventListener("hashchange",a)}(this),this.retryTimeout=[null!==(o=d.min_send_timeout)&&void 0!==o?o:this.retryTimeout[0],null!==(k=d.max_send_timeout)&&void 0!==k?k:this.retryTimeout[1]],d.max_send_attempts&&(this.maxSendAttempts=d.max_send_attempts),this.initialized=!0):a().error("Can't initialize Usemaven, key property is not set")},e.prototype.interceptAnalytics=function(c){var e=this,d=function(d){var g,c,h,f,i;try{c=b({},d.payload),a().debug("Intercepted segment payload",c.obj),h=d.integrations["Segment.io"],h&&h.analytics&&(f=h.analytics,"function"==typeof f.user&&f.user()&&"function"==typeof f.user().id&&(c.obj.userId=f.user().id())),(null===(g=null==c?void 0:c.obj)||void 0===g?void 0:g.timestamp)&&(c.obj.sentAt=c.obj.timestamp),i=d.payload.type(),"track"===i&&(i=d.payload.event()),e._send3p("ajs",c,i)}catch(b){a().warn("Failed to send an event",b)}d.next(d.payload)};"function"==typeof c.addSourceMiddleware?(a().debug("Analytics.js is initialized, calling addSourceMiddleware"),c.addSourceMiddleware(d)):(a().debug("Analytics.js is not initialized, pushing addSourceMiddleware to callstack"),c.push(["addSourceMiddleware",d])),c.__en_intercepted=!0},e.prototype.restoreId=function(){if(this.userIdPersistence){var a=this.userIdPersistence.restore();a&&(this.userProperties=b(b({},a),this.userProperties))}},e.prototype.set=function(e,a){var c,d=null==a?void 0:a.eventType,f=void 0===(null==a?void 0:a.persist)||(null==a?void 0:a.persist),g;void 0!==d?(g=null!==(c=this.permanentProperties.propsPerEvent[d])&&void 0!==c?c:{},this.permanentProperties.propsPerEvent[d]=b(b({},g),e)):this.permanentProperties.globalProps=b(b({},this.permanentProperties.globalProps),e),this.propsPersistance&&f&&this.propsPersistance.save(this.permanentProperties)},e.prototype.unset=function(c,a){t();var b=null==a?void 0:a.eventType,d=void 0===(null==a?void 0:a.persist)||(null==a?void 0:a.persist);b?this.permanentProperties.propsPerEvent[b]&&delete this.permanentProperties.propsPerEvent[b][c]:delete this.permanentProperties.globalProps[c],this.propsPersistance&&d&&this.propsPersistance.save(this.permanentProperties)},e.prototype.manageCrossDomainLinking=function(a){if(!c()||!a.cross_domain_linking||0===a.domains.length||"strict"===a.cookiePolicy)return!1;var b=this.idCookieName,d=a.domains||[];document.addEventListener("click",function(g){var a=function(a){for(;a&&a.tagName;){if("a"==a.tagName.toLowerCase())return a;a=a.parentNode}return null}(g.target),e,c,f;if(a)if(e=(null==a?void 0:a.hasAttribute("href"))?null==a?void 0:a.getAttribute("href"):"",e&&e.startsWith("http")){if(c=new URL(e),f=j(b),c.hostname===window.location.hostname)return;d.includes(c.hostname)&&f&&(c.searchParams.append("_um",f),a.setAttribute("href",c.toString()))}},!1)},e.prototype.manageAutoCapture=function(b){a().debug("Auto Capture Status: ",this.config.autocapture),this.__autocapture_enabled=this.config.autocapture&&c(),this.__autocapture_enabled&&(g.enabledForProject(this.apiKey,100,100)?g.isBrowserSupported()?(a().debug("Autocapture enabled..."),g.init(this,b)):(this.config.autocapture=!1,this.__autocapture_enabled=!1,a().debug("Disabling Automatic Event Collection because this browser is not supported")):(this.config.autocapture=!1,this.__autocapture_enabled=!1,a().debug("Not in active bucket: disabling Automatic Event Collection.")))},e.prototype.manageFormTracking=function(d){if(c()&&this.formTracking&&"none"!==this.formTracking){a().debug("Form tracking enabled...");var b=!0===this.formTracking?"all":this.formTracking;ae.getInstance(this,b).track()}},e.prototype.capture=function(a,b){var d,e,c;void 0===b&&(b={}),this.initialized?m(a)||"string"!=typeof a?console.error("No event name provided to usermaven.capture"):(c={event:a+(b.$event_type?"_"+b.$event_type:""),properties:this._calculate_event_properties(a,b)},(null===(e=null===(d=(c=af(c,this.get_config("properties_string_max_length"))).properties)||void 0===d?void 0:d.autocapture_attributes)||void 0===e?void 0:e.tag_name)&&this.track("$autocapture",c.properties),"$scroll"===a&&this.track(a,c.properties),"$form"===a&&this.track(a,c.properties)):console.error("Trying to capture event before initialization")},e.prototype._calculate_event_properties=function(b,h){var c,e,a=h||{},f,g;return"$snapshot"===b||"$scroll"===b||"$form"===b?a:(I(this.propertyBlacklist)?d(this.propertyBlacklist,function(b){delete a[b]}):console.error("Invalid value for property_blacklist config: "+this.propertyBlacklist),f={},g=a.$elements||[],g.length&&(f=g[0]),a.autocapture_attributes=f,a.autocapture_attributes.el_text=null!==(c=a.autocapture_attributes.$el_text)&&void 0!==c?c:"",a.autocapture_attributes.event_type=null!==(e=a.$event_type)&&void 0!==e?e:"",["$ce_version","$event_type","$initial_referrer","$initial_referring_domain","$referrer","$referring_domain","$elements"].forEach(function(b){delete a[b]}),delete a.autocapture_attributes.$el_text,delete a.autocapture_attributes.nth_child,delete a.autocapture_attributes.nth_of_type,a)},e}(),N="lib.js",av=["use_beacon_api","cookie_domain","tracking_host","cookie_name","key","ga_hook","segment_hook","randomize_url","capture_3rd_party_cookies","id_method","log_level","compat_mode","privacy_policy","cookie_policy","ip_policy","custom_headers","force_use_fetch","min_send_timeout","max_send_timeout","max_send_attempts","disable_event_persistence","project_id","autocapture","properties_string_max_length","property_blacklist","exclude","auto_pageview","namespace","cross_domain_linking","domains","form_tracking"],s="data-suppress-interception-warning";function K(a){return"\n      ATTENTION! "+a+"-hook set to true along with defer/async attribute! If "+a+" code is inserted right after Usermaven tag,\n      first tracking call might not be intercepted! Consider one of the following:\n       - Inject usermaven tracking code without defer/async attribute\n       - If you're sure that events won't be sent to "+a+" before Usermaven is fully initialized, set "+s+'="true"\n       script attribute\n    '}function ay(c){var b=document.currentScript,g,d,e,f,h;if(b)return d={tracking_host:(g=b.getAttribute("src"),g.replace("/s/"+N,"").replace("/"+N,"")),key:null},e=b.getAttribute("data-namespace")||"usermaven",av.forEach(function(e){var c="data-"+e.replace(new RegExp("_","g"),"-"),a;void 0!==b.getAttribute(c)&&null!==b.getAttribute(c)&&(a=b.getAttribute(c),"true"===a?a=!0:"false"===a&&(a=!1),d[e]=a)}),f=e+"Client",c[f]=function(b){var a=new at;return a.init(b),a}(d),!d.segment_hook||null===b.getAttribute("defer")&&null===b.getAttribute("async")||null!==b.getAttribute(s)||a().warn(K("segment")),!d.ga_hook||null===b.getAttribute("defer")&&null===b.getAttribute("async")||null!==b.getAttribute(s)||a().warn(K("ga")),!function(a,b,d){c[a]=function(){var d=c[a+"Q"]=c[a+"Q"]||[];d.push(arguments),B(d,c[b])}}(e,f),d.project_id&&c[e]("set",{project_id:d.project_id}),"true"!==b.getAttribute("data-init-only")&&"yes"!==b.getAttribute("data-init-only")&&c[e]("track","pageview"),h=void 0===c.onpagehide?"unload":"pagehide",c.addEventListener(h,function(){c[e]("track","$pageleave")}),c[f];a().warn("Usermaven script is not properly initialized. The definition must contain data-usermaven-api-key as a parameter")}function B(b,f){var c,d,g,h,e;a().debug("Processing queue",b);for(c=0;c<b.length;c+=1)d=o([],b[c],!0)||[],g=d[0],h=d.slice(1),e=f[g],"function"==typeof e&&e.apply(f,h);b.length=0}!function(e){if(window){var b=window,c=e,d=ay(b);d?(a().debug("Usermaven in-browser tracker has been initialized",c),b[c]=function(){var a=b[c+"Q"]=b[c+"Q"]||[];a.push(arguments),B(a,d)},b[c+"Q"]&&(a().debug("Initial queue size of "+b[c+"Q"].length+" will be processed"),B(b[c+"Q"],d))):a().error("Usermaven tracker has not been initialized (reason unknown)")}else a().warn("Usermaven tracker called outside browser context. It will be ignored")}(document.currentScript.getAttribute("data-namespace")||"usermaven")}()